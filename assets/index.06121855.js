var ke=Object.defineProperty,Ce=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var de=(e,t,s)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,F=(e,t)=>{for(var s in t||(t={}))Me.call(t,s)&&de(e,s,t[s]);if(ue)for(var s of ue(t))De.call(t,s)&&de(e,s,t[s]);return e},oe=(e,t)=>Ce(e,Ie(t));import{c as Be,a as Le,T as Se,A as te,d as Te,s as Re,b as J,e as je,R as Ee,f as I,o as d,g as D,m as pe,u as a,I as Ue,h as se,i as g,r as K,w as B,j as i,k as _,l as Z,F as W,t as $,n as h,p as q,q as z,E as Ne,v as O,x as V,y as _e,z as j,B as E,C as U,D as k,G as P,H as me,J as Ve,K as he,L as Pe,M as fe,N as ve,O as ge,P as Ae,Q as Fe,S as We,U as qe,V as ze,W as ae,X as He}from"./vendor.a792f018.js";const Oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};Oe();const Ye="modulepreload",ye={},Ge="/",re=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${Ge}${o}`,o in ye)return;ye[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":Ye,n||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),n)return new Promise((u,l)=>{c.addEventListener("load",u),c.addEventListener("error",l)})})).then(()=>t())};var Je=Be({history:Le(),routes:[{path:"/",name:"home",component:()=>re(()=>import("./Home.37027f30.js"),[])},{path:"/channel/:channelId",name:"channel",component:()=>re(()=>import("./Channel.769a49d2.js"),["assets/Channel.769a49d2.js","assets/Channel.85be5dda.css","assets/vendor.a792f018.js"])}]}),be=new Se({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",text:"string",ts:"uint",isEdited:"boolean","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","imageUrl?":"string","quoteId?":"uint","channelId?":"string"}]}]}]});te.init({workerUrl:"/libarchive.js/worker-bundle.js"});const ie=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},Y=e=>Math.floor(Number(e)*1e3),$e=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",N=Te("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:$e(window.innerWidth)}),actions:{async loadBinary(){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const o=await fetch("/export.bin.zip");if(!o.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const c=(await(await te.open(new File([await o.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await c.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:e,users:t}=await be.decode(this.binaryData);this.channels=e.map(o=>{var n;return oe(F({},o),{rootMessages:(n=o.messages)==null?void 0:n.filter(r=>!r.threadId)})});const s={};t.forEach(o=>{s[o.id]=o}),this.users=s,this.status="Done",this.dataLoaded=!0}catch(e){this.status=`Error: ${e.message}`,console.error(e)}},processUser(e){var t,s,o,n,r,c,u,l;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((o=e.profile)==null?void 0:o.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((r=e.profile)==null?void 0:r.image_512)||((c=e.profile)==null?void 0:c.image_192),image24:(u=e.profile)==null?void 0:u.image_24,image72:(l=e.profile)==null?void 0:l.image_72}},processMessage(e){var t,s,o,n,r,c,u;return{id:Y(e.ts),type:e.subtype||e.type||"message",text:((t=e.text)==null?void 0:t.trim())||"",userId:e.user,ts:Y(e.ts),isEdited:!!e.edited,threadId:e.parent_user_id?Y(e.thread_ts):void 0,replyCount:e.reply_count||((s=e.replies)==null?void 0:s.length),replyUsersCount:e.reply_users_count||((o=e.replies_users)==null?void 0:o.length),latestReply:e.latest_reply?Y(e.latest_reply):void 0,replyMessageIds:(n=e.replies)==null?void 0:n.map(l=>Y(l.ts)),replyUserIds:e.reply_users,reactions:(r=e.reactions)==null?void 0:r.map(l=>({name:l.name,count:l.count,userIds:l.users})),files:(c=e.files)==null?void 0:c.map(l=>({id:l.id,name:l.name||l.filetype?`${l.id}.${l.filetype}`:"Untitled",mimeType:l.mimetype,src:l.url_private,width:l.original_w,height:l.original_h})).filter(l=>l.src&&l.mimeType&&l.id),attachments:(u=e.attachments)==null?void 0:u.map(l=>({serviceName:l.service_name,serviceIcon:l.service_icon,title:l.title,titleUrl:l.title_link,text:l.text,thumbUrl:l.thumb_url,imageUrl:l.image_url,quoteId:l.ts?Y(l.ts):void 0,channelId:l.channel_id})).filter(l=>!!l.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,o;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((o=e.messages)==null?void 0:o.map(n=>this.processMessage(n)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await te.open(e)).extractFiles();this.status="Processing Channels...";const o=await ie(s,"channels.json"),r=(await ie(s,"users.json")).map(u=>this.processUser(u)),c=o.filter(u=>!u.is_archived||!this.exportConfig.skipArchivedChannels).map(u=>this.processChannel(u));await c.reduce(async(u,l,p)=>{await u,this.status=`Processing Messages for #${l.name} (${p+1}/${c.length})`;const m=[];await Promise.all(Object.keys(s[l.name]).map(async x=>{const v=await ie(s[l.name],x);m.push(...v.filter(b=>{var w;return!((w=b.subtype)==null?void 0:w.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(b=>this.processMessage(b)))})),l.messages=Re(m,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await be.encode({channels:c,users:r})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const o=await(await te.open(e)).getFilesObject();if(!o["export.bin"])return!1;const n=await((t=o["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await n.arrayBuffer()),this.exportNeeded=!1,this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await re(()=>import("./jszip.min.d40cebec.js").then(function(c){return c.j}),["assets/jszip.min.d40cebec.js","assets/vendor.a792f018.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const o=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download="export.bin.zip",r.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=$e(this.deviceWidth)}}});J.extend(je);J.extend(Ee);const A=I({setup(e){return(t,s)=>(d(),D(a(Ue),pe(t.$attrs,{class:"icon"}),null,16))}});var S=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s};const Ke=e=>(q("data-v-72abe67b"),e=e(),z(),e),Ze={class:"user-avatars"},Qe={class:"replies-count"},Xe={class:"replies-count-text"},et={class:"replies-info"},tt={class:"last-reply"},st=Ke(()=>i("span",{class:"cta"}," View thread ",-1)),nt={class:"chevron"},ot=I({props:{message:null},setup(e){const t=e,s=N(),o=se(),n=g(()=>{var l;let u=5;return s.deviceType==="sm"&&(u=3),s.deviceType==="xs"&&(u=1),((l=t.message.replyUserIds)==null?void 0:l.map(p=>{const m=s.users[p];return{src:m.image24||m.image72,alt:m.name}}).splice(0,u))||[]}),r=g(()=>J(t.message.latestReply)),c=g(()=>`${o.params.channelId}-${t.message.id}`);return(u,l)=>{const p=A,m=K("router-link");return d(),D(m,{to:{query:{threadRef:a(c)}},class:"replies-btn"},{default:B(()=>[i("div",Ze,[(d(!0),_(W,null,Z(a(n),(x,v)=>(d(),_("img",pe({key:v},x),null,16))),128))]),i("div",Qe,[i("span",Xe,$(e.message.replyCount)+" replies ",1)]),i("div",et,[i("span",tt," Last reply "+$(a(r).fromNow()),1),st]),i("div",nt,[h(p,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var at=S(ot,[["__scopeId","data-v-72abe67b"]]);const Q=new Ne,H="google";Q.img_set=H;Q.img_sets[H].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${H}@7.0.2/img/${H}/64/`;Q.img_sets[H].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${H}@7.0.2/img/${H}/sheets/64.png`;const rt=e=>(q("data-v-73aab79a"),e=e(),z(),e),it={class:"react-chip"},lt=["innerHTML"],ct={class:"react-count"},ut={class:"react-popper-content"},dt=["src","alt"],pt=rt(()=>i("br",null,null,-1)),_t={class:"names"},mt=V(" reacted with "),ht=I({props:{react:null},setup(e){const t=e,s=N(),o=g(()=>`:${t.react.name}:`),n=g(()=>Q.replace_colons(o.value)),r=g(()=>{var u;return(u=n.value.match(/https?:\/\/[^)]+/))==null?void 0:u[0]}),c=g(()=>{let u=t.react.userIds.map((l,p)=>{const m=s.users[l];let x="";return p!==0&&p===t.react.userIds.length-1&&(x="and "),`${x}${m==null?void 0:m.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(u+=` +${t.react.userIds.length-10} more`),u});return(u,l)=>(d(),D(a(O),{placement:"top",hover:"",arrow:""},{content:B(()=>[i("div",ut,[i("img",{src:a(r),alt:e.react.name},null,8,dt),pt,i("strong",_t,$(a(c)),1),mt,i("strong",null,$(a(o)),1)])]),default:B(()=>[i("div",it,[i("span",{innerHTML:a(n)},null,8,lt),i("span",ct,$(e.react.count),1)])]),_:1}))}});var ft=S(ht,[["__scopeId","data-v-73aab79a"]]);const vt={class:"file-preview"},gt=["src"],yt=["href"],bt=["src","alt"],$t={key:1,class:"unknown-preview"},xt={class:"file-name"},wt=I({props:{file:null,maxWidth:null},setup(e){const t=e,s=g(()=>t.file.mimeType.split("/")[0]),o=g(()=>t.file.src),n=g(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const r=t.maxWidth,c=360,u=t.file.width,l=t.file.height,p=u/l;return{height:`${Math.min(p>1?r/p:c,l)}px`}});return(r,c)=>{const u=A;return d(),_("div",vt,[a(s)==="video"?(d(),_("video",{key:0,src:a(o),controls:"",style:_e(a(n))},null,12,gt)):(d(),_("a",{key:1,href:a(o),target:"_blank"},[a(s)==="image"?(d(),_("img",{key:0,src:a(o),alt:t.file.name,style:_e(a(n))},null,12,bt)):(d(),_("div",$t,[h(u,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),i("div",xt,$(t.file.name),1)]))],8,yt))])}}});var kt=S(wt,[["__scopeId","data-v-fc0cdeb8"]]);const Ct={class:"file-list-header"},It={class:"file-list-header-title"},Mt={class:"file-list-header-actions"},Dt=I({props:{files:null},setup(e){const t=e,s=j(!1),o=j(null),n=g(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(r,c)=>{const u=A,l=kt;return d(),_("div",{ref_key:"wrapper",ref:o,class:"file-list"},[i("div",Ct,[i("span",It,$(a(n)),1),i("span",Mt,[h(u,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:c[0]||(c[0]=p=>s.value=!s.value)},null,8,["icon"])])]),(d(!0),_(W,null,Z(o.value?e.files:[],p=>{var m;return E((d(),D(l,{key:p.id,file:p,"max-width":(m=o.value)==null?void 0:m.offsetWidth},null,8,["file","max-width"])),[[U,!s.value]])}),128))],512)}}});var Bt=S(Dt,[["__scopeId","data-v-32e3d2e3"]]);const X=(e,t)=>e.split(t)[0].length,ne={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},ee=e=>Object.keys(ne).reduce((t,s)=>t.replaceAll(s,ne[s]),e),Lt=e=>Object.keys(ne).reduce((t,s)=>t.replaceAll(ne[s],s),e),G=/(-|\* |•|◦|▪︎)/,St=(e,t,s)=>Lt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,o=>{const n=o.split(`
`).filter(Boolean);return n.map((r,c)=>{let u="";const l=n[c-1],p=c===0,m=c===n.length-1;return l&&X(l,G)!==X(r,G)&&(u+="</ul>"),(p||X(l,G)!==X(r,G))&&(u+=`<ul class="formatter-ul" data-indent="${Math.round(X(r,G)/4)}">`),u+=`<li>${r.split(G)[2].trim()}</li>`,m&&(u+="</ul>"),u}).join("")}).replace(/<@(U[\w]+)>/g,(o,n)=>{var u,l;const r=t[n],c=((u=r.profile)==null?void 0:u.display_name)||((l=r.profile)==null?void 0:l.real_name)||r.name;return ee(r?`<span class="formatter-mention">@${c}</span>`:o)}).replace(/<!([\w\^]+)>/g,(o,n)=>ee(`<span class="formatter-mention">@${n}</span>`)).replace(/<#(C[\w\^\|]+)>/g,(o,n)=>{const r=s.find(c=>n.startsWith(c.id));return ee(r?`<a class="formatter-mention" href="#${r.name}">#${r.name}</a>`:o)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(o,n,r,c)=>ee(`<a class="formatter-link" href="${n}" target="_blank">${c||n}</a>`)).replace(/(:[^: ]+:)/gm,o=>{const n=Q.replace_colons(o);return n.includes("<span")?ee(n):n}).replace(/\*([^\*]+)\*/gm,(o,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(o,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(o,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var le=(e,t,s)=>e.split("```").map((o,n)=>n%2==0?e.split("`").map((r,c)=>c%2==0?St(r,t,s):`<code class="formatter-code inline">${r}</code>`).join(""):`<pre class="formatter-code block"><code>${o}</code></pre>`).join("");const Tt=e=>(q("data-v-197a4589"),e=e(),z(),e),Rt=["id"],jt={key:0,class:"message-list-date-wrap"},Et=Tt(()=>i("hr",null,null,-1)),Ut={class:"message-list-date"},Nt={class:"message-left"},Vt={key:0,class:"message-avatar"},Pt=["src"],At={key:1},Ft={class:"message-main"},Wt={key:0,class:"message-header"},qt={class:"message-author"},zt={class:"message-timestamp"},Ht=["innerHTML"],Ot={key:3,class:"message-reactions"},Yt=I({props:{message:null,aboveMessage:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean}},setup(e){const t=e;j([]);const s=N(),o=g(()=>{var p;return J((p=t.message)==null?void 0:p.ts)}),n=g(()=>{var x;const p=o.value.format("YYYY-MM-DD"),m=J((x=t.aboveMessage)==null?void 0:x.ts).format("YYYY-MM-DD");return!t.aboveMessage||p!==m}),r=g(()=>{var p;return!n.value&&t.message.userId===((p=t.aboveMessage)==null?void 0:p.userId)}),c=g(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),u=g(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),l=g(()=>{var p,m;return t.hideDateRule&&n.value?(p=o.value)==null?void 0:p.format("Do MMM, YYYY [at] h:mm a"):(m=o.value)==null?void 0:m.format("h:mm a").toUpperCase()});return(p,m)=>{var w,y,f,L,M;const x=Bt,v=ft,b=at;return((w=e.message)==null?void 0:w.id)?(d(),_("div",{key:0,id:`message-${e.message.id}`},[a(n)&&!e.hideDateRule?(d(),_("div",jt,[Et,i("div",Ut,$(a(o).format("MMMM Do, YYYY")),1)])):k("",!0),e.message?(d(),_("div",{key:1,class:P({message:!0,continued:a(r)})},[i("div",Nt,[a(r)?(d(),_("span",At,$(a(o).format("h:mm")),1)):(d(),_("div",Vt,[i("img",{src:(y=a(c))==null?void 0:y.image72,alt:""},null,8,Pt)]))]),i("div",Ft,[a(r)?k("",!0):(d(),_("div",Wt,[i("span",qt,$((f=a(c))==null?void 0:f.name),1),i("span",zt,$(a(l)),1)])),e.message.text?(d(),_("div",{key:1,class:P({"message-content":!0,"just-emoji":a(u),"non-message":e.message.type!=="message"}),innerHTML:a(le)(e.message.text,a(s).users,a(s).channels)},null,10,Ht)):k("",!0),((L=e.message.files)==null?void 0:L.length)?(d(),D(x,{key:2,files:e.message.files},null,8,["files"])):k("",!0),((M=e.message.reactions)==null?void 0:M.length)?(d(),_("div",Ot,[(d(!0),_(W,null,Z(e.message.reactions,T=>(d(),D(v,{key:T.name,react:T},null,8,["react"]))),128))])):k("",!0),e.message.replyCount&&!t.hideReplies?(d(),D(b,{key:4,message:e.message},null,8,["message"])):k("",!0)])],2)):k("",!0)],8,Rt)):k("",!0)}}});var Gt=S(Yt,[["__scopeId","data-v-197a4589"]]);const Jt={class:"chat-header"},Kt={key:0,class:"chat-header-actions"},Zt={class:"chat-header-title spacer"},Qt=["innerHTML"],Xt=["innerHTML"],es={key:1,class:"chat-header-actions"},ts=I({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,o=N();return(n,r)=>{const c=A,u=K("router-link");return d(),_("div",Jt,[s.showMenuButton?(d(),_("div",Kt,[i("button",{class:"btn btn-icon menu-button",onClick:r[0]||(r[0]=l=>a(o).toggleSidebar())},[h(c,{icon:"mdi:menu-open"})])])):k("",!0),i("div",Zt,[i("strong",null,$(s.title),1),s.subtitle&&!s.subtitleTo?(d(),D(a(O),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:B(()=>[i("div",{class:"subtitle-popout",innerHTML:a(le)(s.subtitle,a(o).users,a(o).channels)},null,8,Xt)]),default:B(()=>[i("span",{innerHTML:a(le)(s.subtitle,a(o).users,a(o).channels)},null,8,Qt)]),_:1})):k("",!0),s.subtitle&&s.subtitleTo?(d(),D(u,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:$(s.subtitle)},null,8,["to","textContent"])):k("",!0)]),s.showCloseButton?(d(),_("div",es,[i("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=l=>t("close"))},[h(c,{icon:"mdi:close"})])])):k("",!0)])}}});var ss=S(ts,[["__scopeId","data-v-13add010"]]);const ns=e=>(q("data-v-5bea8671"),e=e(),z(),e),os={class:"thread-list"},as=ns(()=>i("hr",null,null,-1)),rs={class:"replies-count"},is=I({setup(e){var x;const t=se(),s=me(),o=N(),n=j(`${(x=t.query.threadRef)!=null?x:""}`),r=g(()=>{var v;return`${(v=t.query.threadRef)!=null?v:""}`}),c=g(()=>{var b;const v=n.value.split("-")[0];return(b=o.channels)==null?void 0:b.find(w=>w.id===v)}),u=g(()=>{var b,w;const v=Number(n.value.split("-")[1]);return(w=(b=c.value)==null?void 0:b.rootMessages)==null?void 0:w.find(y=>y.id===v)}),l=g(()=>{var b,w;const v=Number(n.value.split("-")[1]);return((w=(b=c.value)==null?void 0:b.messages)==null?void 0:w.filter(y=>{var f;return y.threadId===v||((f=u.value)==null?void 0:f.replyMessageIds.indexOf(y.id))!==-1}))||[]}),p=()=>{s.push({query:he(t.query,"threadRef")})},m=v=>v>0?l.value[v-1]:oe(F({},u.value),{userId:""});return Ve(r,()=>{var v;n.value=`${(v=t.query.threadRef)!=null?v:""}`}),(v,b)=>{var f,L;const w=ss,y=Gt;return d(),_(W,null,[((f=a(c))==null?void 0:f.id)?(d(),D(w,{key:0,title:"Thread",subtitle:`#${(L=a(c))==null?void 0:L.name}`,"subtitle-to":{params:{channelId:a(c).id},query:F({},a(t).query),name:"channel"},"show-close-button":"",onClose:p},null,8,["subtitle","subtitle-to"])):k("",!0),i("div",os,[h(y,{message:a(u),"above-message":null,style:{margin:"16px 0"},"hide-date-rule":"","hide-replies":""},null,8,["message"]),as,i("div",rs,[i("small",null,$(a(l).length)+" Repl"+$(a(l).length===1?"y":"ies"),1)]),(d(!0),_(W,null,Z(a(l),(M,T)=>(d(),D(y,{key:M.id,message:M,"above-message":m(T),class:P({last:T===a(l).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","class"]))),128))])],64)}}});var ls=S(is,[["__scopeId","data-v-5bea8671"]]);const cs={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},us=["src"],ds=I({setup(e){const t=N(),s=j(!1),o="mrfrase3",n="Support me on Buy me a coffee!",r=g(()=>`https://www.buymeacoffee.com/widget/page/${o}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return Pe(()=>{!t.coffeeMenu||(s.value=!0)}),(c,u)=>{const l=A;return d(),D(a(O),{placement:"top",class:"coffee-pop",show:a(t).coffeeMenu},{content:B(()=>[s.value||a(t).coffeeMenu?(d(),_("iframe",{key:0,src:a(r),title:"Buy me a coffee",class:"bmc-iframe"},null,8,us)):k("",!0)]),default:B(()=>[i("div",{class:"coffee-btn",onClick:u[0]||(u[0]=p=>a(t).coffeeMenu=!a(t).coffeeMenu)},[E(h(l,{icon:"mdi:close"},null,512),[[U,a(t).coffeeMenu]]),E(i("img",cs,null,512),[[U,!a(t).coffeeMenu]])])]),_:1},8,["show"])}}});var ps=S(ds,[["__scopeId","data-v-5dfad6fe"]]);const _s=e=>(q("data-v-6cf7f162"),e=e(),z(),e),ms={class:"sidebar-footer"},hs=_s(()=>i("div",{class:"spacer"},null,-1)),fs={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},vs=I({setup(e){const t=N(),s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(o,n)=>{const r=A,c=ps;return d(),_("div",ms,[(a(t).binarySource,d(),D(a(O),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:B(()=>[h(r,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=u=>a(t).downloadBinary())})]),_:1})),h(a(O),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:B(()=>[h(r,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),hs,h(a(O),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:B(()=>[i("a",fs,[h(r,{class:"action-icon",icon:"mdi:github"})])]),_:1}),h(c)])}}});var gs=S(vs,[["__scopeId","data-v-6cf7f162"]]);const xe=e=>(q("data-v-39bb419c"),e=e(),z(),e),ys={class:"channel-list"},bs=xe(()=>i("div",{class:"title"}," Channels ",-1)),$s=xe(()=>i("span",{style:{"padding-right":"8px"}},"#",-1)),xs=I({setup(e){const t=N(),s=se(),o=n=>s.params.channelId===n.id;return(n,r)=>{const c=K("router-link");return d(),_("div",ys,[bs,i("ul",null,[(d(!0),_(W,null,Z(a(t).channels,u=>(d(),_("li",{key:u.id},[h(c,{to:{params:{channelId:u.id},query:F({},a(s).query),name:"channel"},class:P({link:!0,active:o(u)})},{default:B(()=>[$s,V(" "+$(u.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var ws=S(xs,[["__scopeId","data-v-39bb419c"]]);const ks={class:"checkbox-text"},Cs={class:"checkbox-label"},Is={class:"checkbox-hint"},Ms=I({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=()=>{t("update:modelValue",!s.modelValue)};return(n,r)=>{const c=A;return d(),_("div",{class:"checkbox-wrap",onClick:o},[h(c,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),i("div",ks,[i("div",Cs,[fe(n.$slots,"label",{},()=>[V($(s.label),1)],!0)]),i("div",Is,[fe(n.$slots,"hint",{},()=>[V($(s.hint),1)],!0)])])])}}});var Ds=S(Ms,[["__scopeId","data-v-690ba907"]]),Bs="/assets/loading.7cbe3464.svg",we="/slax.svg";const C=e=>(q("data-v-f73075ca"),e=e(),z(),e),Ls={class:"loading-splash moving-gradient"},Ss=C(()=>i("img",{alt:"Loading",src:Bs},null,-1)),Ts=C(()=>i("br",null,null,-1)),Rs=C(()=>i("br",null,null,-1)),js=C(()=>i("br",null,null,-1)),Es=C(()=>i("div",{class:"header"},[i("h1",null,[i("img",{src:we,alt:"",style:{height:"1em","margin-right":"8px"}}),V(" Slax Pro ")]),i("p",null,[V("A "),i("i",null,"Free & Professional"),V(" viewer for slack-like export content.")])],-1)),Us=["onDrop","onDragover"],Ns={key:0},Vs=C(()=>i("strong",null,"Drop .zip file here",-1)),Ps=C(()=>i("br",null,null,-1)),As=C(()=>i("small",null,"or click to select",-1)),Fs=[Vs,Ps,As],Ws={key:1},qs=C(()=>i("strong",null,"Kobe!",-1)),zs=[qs],Hs={key:2},Os=C(()=>i("strong",null,"File must be a .zip",-1)),Ys=C(()=>i("br",null,null,-1)),Gs=C(()=>i("small",null,"Please try again",-1)),Js=[Os,Ys,Gs],Ks={class:"config"},Zs=C(()=>i("h2",null,"Export Preferences",-1)),Qs={class:"actions"},Xs=C(()=>i("div",{class:"spacer"},null,-1)),en=C(()=>i("span",null,"Process",-1)),tn=I({setup(e){const t=N(),s=j(null),o=j(!1),n=j(!1),r=j(!1),c=j(!1),u=g(()=>r.value?"mdi:alert-outline":o.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),l=g(()=>r.value?!0:!(!o.value||n.value)),p=g(()=>l.value?"error":o.value?"success":""),m=y=>y?Array.from(y):[],x=y=>{var f;r.value=!1,o.value=!0,n.value=!!((f=y.dataTransfer)==null?void 0:f.types.includes("Files"))},v=()=>{r.value=!1,o.value=!1,n.value=!1},b=async y=>{var L,M;y.preventDefault();const f=(L=y.dataTransfer)!=null?L:y.target;s.value=(M=m(f.files).find(T=>T.type==="application/zip"))!=null?M:null,v(),r.value=!s.value,s.value&&(c.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),c.value=!1)},w=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)};return ve(()=>{t.loadBinary()}),(y,f)=>{var T,ce;const L=A,M=Ds;return E((d(),_("div",Ls,[E(i("div",null,[Ss,Ts,Rs,i("strong",null,$(a(t).status),1),js,a(t).status.startsWith("Error:")?(d(),_("button",{key:0,onClick:f[0]||(f[0]=R=>a(t).exportNeeded=!0)}," Back ")):k("",!0)],512),[[U,!a(t).exportNeeded||c.value]]),E(i("div",null,[E((d(),_("input",{key:(T=s.value)==null?void 0:T.name,ref:"fileInput",type:"file",accept:".zip",onChange:b},null,32)),[[U,!1]]),Es,E(i("div",{class:P(`drop-area ${a(p)}`),onDrop:ge(b,["prevent"]),onDragenter:x,onDragover:ge(x,["prevent"]),onDragleave:v,onClick:f[1]||(f[1]=R=>y.$refs.fileInput.click())},[h(L,{class:"zip-icon",icon:a(u)},null,8,["icon"]),!a(l)&&!o.value?(d(),_("div",Ns,Fs)):a(l)?(d(),_("div",Hs,Js)):(d(),_("div",Ws,zs))],42,Us),[[U,!s.value]]),E(i("div",Ks,[Zs,i("span",null,[h(L,{icon:"mdi:folder-zip-outline"}),i("strong",null,$((ce=s.value)==null?void 0:ce.name),1)]),h(M,{modelValue:a(t).exportConfig.preferDisplayName,"onUpdate:modelValue":f[2]||(f[2]=R=>a(t).exportConfig.preferDisplayName=R),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),h(M,{modelValue:a(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":f[3]||(f[3]=R=>a(t).exportConfig.hideChannelMessages=R),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),h(M,{modelValue:a(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":f[4]||(f[4]=R=>a(t).exportConfig.skipArchivedChannels=R),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),h(M,{modelValue:a(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":f[5]||(f[5]=R=>a(t).exportConfig.removeLinkPreviews=R),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),i("div",Qs,[i("button",{class:"btn btn-text",onClick:f[6]||(f[6]=R=>s.value=null)}," Back "),Xs,i("button",{class:"btn",onClick:w},[h(L,{icon:"mdi:cog"}),en])])],512),[[U,s.value]])],512),[[U,a(t).exportNeeded&&!c.value]])],512)),[[U,!a(t).dataLoaded]])}}});var sn=S(tn,[["__scopeId","data-v-f73075ca"]]);const nn=i("h1",null,[i("img",{src:we,alt:"",style:{height:"1em","margin-right":"8px"}}),V(" Slax Pro ")],-1),on=I({setup(e){const t=N(),s=se(),o=me(),n=g(()=>{var u;return(u=s.query)==null?void 0:u.threadRef}),r=()=>{t.leftSidebar=!1,o.push({query:F({},he(s.query,["threadRef"]))})},c=Ae(()=>t.onWidthChange(),100);return ve(()=>window.addEventListener("resize",c)),Fe(()=>window.removeEventListener("resize",c)),(u,l)=>{const p=sn,m=K("router-link"),x=ws,v=gs,b=ls,w=K("router-view");return d(),_(W,null,[h(p),i("div",{class:P({sidebar:!0,closed:!a(t).leftSidebar})},[h(m,{class:"no-link",to:{name:"home",params:{},query:F({},a(s).query)}},{default:B(()=>[nn]),_:1},8,["to"]),h(x),h(v)],2),i("div",{class:P({"thread-sidebar":!0,closed:!a(n)})},[h(b)],2),h(We,{name:"fade"},{default:B(()=>[E(i("div",{class:"sidebar-overlay",onClick:l[0]||(l[0]=y=>r())},null,512),[[U,a(t).leftSidebar||a(n)]])]),_:1}),i("div",{class:P({main:!0,"offset-right":!!a(n)})},[h(w)],2)],64)}}});window.Buffer=qe.Buffer;ze(on).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,ae.bind(e,t,s)},updated:ae.update,unmounted:ae.unbind}).use(He()).use(Je).mount("#app");export{ss as C,S as _,Gt as a,N as u};
