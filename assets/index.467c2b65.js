var xe=Object.defineProperty,we=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var ue=(e,t,s)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,A=(e,t)=>{for(var s in t||(t={}))Ce.call(t,s)&&ue(e,s,t[s]);if(ce)for(var s of ce(t))Ie.call(t,s)&&ue(e,s,t[s]);return e},ne=(e,t)=>we(e,ke(t));import{c as Me,a as De,T as Le,A as oe,d as Se,s as Be,b as G,e as Te,R as Re,f as C,o as d,g as D,m as de,u as a,I as Ee,h as te,i as y,r as J,w as L,j as l,k as p,l as K,F as W,t as b,n as f,p as q,q as z,E as je,v as F,x as Q,y as _e,z as U,B as R,C as E,D as k,G as V,H as pe,J as Ue,K as me,L as Ne,M as he,N as fe,O as ve,P as Ve,Q as Pe,S as Ae,U as We,V as qe,W as ae,X as ze}from"./vendor.a792f018.js";const He=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};He();const Fe="modulepreload",ge={},Oe="/",re=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${Oe}${o}`,o in ge)return;ge[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":Fe,n||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),n)return new Promise((u,i)=>{c.addEventListener("load",u),c.addEventListener("error",i)})})).then(()=>t())};var Ye=Me({history:De(),routes:[{path:"/",name:"home",component:()=>re(()=>import("./Home.37027f30.js"),[])},{path:"/channel/:channelId",name:"channel",component:()=>re(()=>import("./Channel.d508e877.js"),["assets/Channel.d508e877.js","assets/Channel.7c6996fb.css","assets/vendor.a792f018.js"])}]}),ye=new Le({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",text:"string",ts:"uint",isEdited:"boolean","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","imageUrl?":"string","quoteId?":"uint","channelId?":"string"}]}]}]});oe.init({workerUrl:"/libarchive.js/worker-bundle.js"});const ie=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},O=e=>Math.floor(Number(e)*1e3),be=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",j=Se("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:be(window.innerWidth)}),actions:{async loadBinary(){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const s=await fetch("/export.bin.zip");if(!s.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const r=(await(await oe.open(new File([await s.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await r.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:e,users:t}=await ye.decode(this.binaryData);this.channels=e.map(s=>{var o;return ne(A({},s),{rootMessages:(o=s.messages)==null?void 0:o.filter(n=>!n.threadId)})}),t.forEach(s=>{this.users[s.id]=s}),this.status="Done",this.dataLoaded=!0}catch(e){this.status=`Error: ${e.message}`,console.error(e)}},processUser(e){var t,s,o,n,r,c,u,i;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((o=e.profile)==null?void 0:o.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((r=e.profile)==null?void 0:r.image_512)||((c=e.profile)==null?void 0:c.image_192),image24:(u=e.profile)==null?void 0:u.image_24,image72:(i=e.profile)==null?void 0:i.image_72}},processMessage(e){var t,s,o,n,r,c,u;return{id:O(e.ts),type:e.subtype||e.type||"message",text:((t=e.text)==null?void 0:t.trim())||"",userId:e.user,ts:O(e.ts),isEdited:!!e.edited,threadId:e.parent_user_id?O(e.thread_ts):void 0,replyCount:e.reply_count||((s=e.replies)==null?void 0:s.length),replyUsersCount:e.reply_users_count||((o=e.replies_users)==null?void 0:o.length),latestReply:e.latest_reply?O(e.latest_reply):void 0,replyMessageIds:(n=e.replies)==null?void 0:n.map(i=>O(i.ts)),replyUserIds:e.reply_users,reactions:(r=e.reactions)==null?void 0:r.map(i=>({name:i.name,count:i.count,userIds:i.users})),files:(c=e.files)==null?void 0:c.map(i=>({id:i.id,name:i.name||i.filetype?`${i.id}.${i.filetype}`:"Untitled",mimeType:i.mimetype,src:i.url_private,width:i.original_w,height:i.original_h})).filter(i=>i.src&&i.mimeType&&i.id),attachments:(u=e.attachments)==null?void 0:u.map(i=>({serviceName:i.service_name,serviceIcon:i.service_icon,title:i.title,titleUrl:i.title_link,text:i.text,thumbUrl:i.thumb_url,imageUrl:i.image_url,quoteId:i.ts?O(i.ts):void 0,channelId:i.channel_id})).filter(i=>!!i.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,o;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((o=e.messages)==null?void 0:o.map(n=>this.processMessage(n)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await oe.open(e)).extractFiles();this.status="Processing Channels...";const o=await ie(s,"channels.json"),r=(await ie(s,"users.json")).map(u=>this.processUser(u)),c=o.filter(u=>!u.is_archived||!this.exportConfig.skipArchivedChannels).map(u=>this.processChannel(u));await c.reduce(async(u,i,_)=>{await u,this.status=`Processing Messages for #${i.name} (${_+1}/${c.length})`;const m=[];await Promise.all(Object.keys(s[i.name]).map(async $=>{const g=await ie(s[i.name],$);m.push(...g.filter(x=>{var v;return!((v=x.subtype)==null?void 0:v.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(x=>this.processMessage(x)))})),i.messages=Be(m,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await ye.encode({channels:c,users:r})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await re(()=>import("./jszip.min.d40cebec.js").then(function(c){return c.j}),["assets/jszip.min.d40cebec.js","assets/vendor.a792f018.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const o=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download="export.bin.zip",r.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=be(this.deviceWidth)}}});G.extend(Te);G.extend(Re);const P=C({setup(e){return(t,s)=>(d(),D(a(Ee),de(t.$attrs,{class:"icon"}),null,16))}});var S=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s};const Ge=e=>(q("data-v-72abe67b"),e=e(),z(),e),Je={class:"user-avatars"},Ke={class:"replies-count"},Qe={class:"replies-count-text"},Xe={class:"replies-info"},Ze={class:"last-reply"},et=Ge(()=>l("span",{class:"cta"}," View thread ",-1)),tt={class:"chevron"},st=C({props:{message:null},setup(e){const t=e,s=j(),o=te(),n=y(()=>{var i;let u=5;return s.deviceType==="sm"&&(u=3),s.deviceType==="xs"&&(u=1),((i=t.message.replyUserIds)==null?void 0:i.map(_=>{const m=s.users[_];return{src:m.image24||m.image72,alt:m.name}}).splice(0,u))||[]}),r=y(()=>G(t.message.latestReply)),c=y(()=>`${o.params.channelId}-${t.message.id}`);return(u,i)=>{const _=P,m=J("router-link");return d(),D(m,{to:{query:{threadRef:a(c)}},class:"replies-btn"},{default:L(()=>[l("div",Je,[(d(!0),p(W,null,K(a(n),($,g)=>(d(),p("img",de({key:g},$),null,16))),128))]),l("div",Ke,[l("span",Qe,b(e.message.replyCount)+" replies ",1)]),l("div",Xe,[l("span",Ze," Last reply "+b(a(r).fromNow()),1),et]),l("div",tt,[f(_,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var nt=S(st,[["__scopeId","data-v-72abe67b"]]);const X=new je,H="google";X.img_set=H;X.img_sets[H].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${H}@7.0.2/img/${H}/64/`;X.img_sets[H].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${H}@7.0.2/img/${H}/sheets/64.png`;const ot=e=>(q("data-v-73aab79a"),e=e(),z(),e),at={class:"react-chip"},rt=["innerHTML"],it={class:"react-count"},lt={class:"react-popper-content"},ct=["src","alt"],ut=ot(()=>l("br",null,null,-1)),dt={class:"names"},_t=Q(" reacted with "),pt=C({props:{react:null},setup(e){const t=e,s=j(),o=y(()=>`:${t.react.name}:`),n=y(()=>X.replace_colons(o.value)),r=y(()=>{var u;return(u=n.value.match(/https?:\/\/[^)]+/))==null?void 0:u[0]}),c=y(()=>{let u=t.react.userIds.map((i,_)=>{const m=s.users[i];let $="";return _!==0&&_===t.react.userIds.length-1&&($="and "),`${$}${m==null?void 0:m.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(u+=` +${t.react.userIds.length-10} more`),u});return(u,i)=>(d(),D(a(F),{placement:"top",hover:"",arrow:""},{content:L(()=>[l("div",lt,[l("img",{src:a(r),alt:e.react.name},null,8,ct),ut,l("strong",dt,b(a(c)),1),_t,l("strong",null,b(a(o)),1)])]),default:L(()=>[l("div",at,[l("span",{innerHTML:a(n)},null,8,rt),l("span",it,b(e.react.count),1)])]),_:1}))}});var mt=S(pt,[["__scopeId","data-v-73aab79a"]]);const ht={class:"file-preview"},ft=["src"],vt=["href"],gt=["src","alt"],yt={key:1,class:"unknown-preview"},bt={class:"file-name"},$t=C({props:{file:null,maxWidth:null},setup(e){const t=e,s=y(()=>t.file.mimeType.split("/")[0]),o=y(()=>t.file.src),n=y(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const r=t.maxWidth,c=360,u=t.file.width,i=t.file.height,_=u/i;return{height:`${Math.min(_>1?r/_:c,i)}px`}});return(r,c)=>{const u=P;return d(),p("div",ht,[a(s)==="video"?(d(),p("video",{key:0,src:a(o),controls:"",style:_e(a(n))},null,12,ft)):(d(),p("a",{key:1,href:a(o),target:"_blank"},[a(s)==="image"?(d(),p("img",{key:0,src:a(o),alt:t.file.name,style:_e(a(n))},null,12,gt)):(d(),p("div",yt,[f(u,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),l("div",bt,b(t.file.name),1)]))],8,vt))])}}});var xt=S($t,[["__scopeId","data-v-fc0cdeb8"]]);const wt={class:"file-list-header"},kt={class:"file-list-header-title"},Ct={class:"file-list-header-actions"},It=C({props:{files:null},setup(e){const t=e,s=U(!1),o=U(null),n=y(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(r,c)=>{const u=P,i=xt;return d(),p("div",{ref_key:"wrapper",ref:o,class:"file-list"},[l("div",wt,[l("span",kt,b(a(n)),1),l("span",Ct,[f(u,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:c[0]||(c[0]=_=>s.value=!s.value)},null,8,["icon"])])]),(d(!0),p(W,null,K(o.value?e.files:[],_=>{var m;return R((d(),D(i,{key:_.id,file:_,"max-width":(m=o.value)==null?void 0:m.offsetWidth},null,8,["file","max-width"])),[[E,!s.value]])}),128))],512)}}});var Mt=S(It,[["__scopeId","data-v-32e3d2e3"]]);const Z=(e,t)=>e.split(t)[0].length,se={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},ee=e=>Object.keys(se).reduce((t,s)=>t.replaceAll(s,se[s]),e),Dt=e=>Object.keys(se).reduce((t,s)=>t.replaceAll(se[s],s),e),Y=/(-|\* |•|◦|▪︎)/,Lt=(e,t,s)=>Dt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,o=>{const n=o.split(`
`).filter(Boolean);return n.map((r,c)=>{let u="";const i=n[c-1],_=c===0,m=c===n.length-1;return i&&Z(i,Y)!==Z(r,Y)&&(u+="</ul>"),(_||Z(i,Y)!==Z(r,Y))&&(u+=`<ul class="formatter-ul" data-indent="${Math.round(Z(r,Y)/4)}">`),u+=`<li>${r.split(Y)[2].trim()}</li>`,m&&(u+="</ul>"),u}).join("")}).replace(/<@(U[\w]+)>/g,(o,n)=>{var u,i;const r=t[n],c=((u=r.profile)==null?void 0:u.display_name)||((i=r.profile)==null?void 0:i.real_name)||r.name;return ee(r?`<span class="formatter-mention">@${c}</span>`:o)}).replace(/<!([\w\^]+)>/g,(o,n)=>ee(`<span class="formatter-mention">@${n}</span>`)).replace(/<#(C[\w\^\|]+)>/g,(o,n)=>{const r=s.find(c=>n.startsWith(c.id));return ee(r?`<a class="formatter-mention" href="#${r.name}">#${r.name}</a>`:o)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(o,n,r,c)=>ee(`<a class="formatter-link" href="${n}" target="_blank">${c||n}</a>`)).replace(/(:[^: ]+:)/gm,o=>{const n=X.replace_colons(o);return n.includes("<span")?ee(n):n}).replace(/\*([^\*]+)\*/gm,(o,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(o,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(o,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var le=(e,t,s)=>e.split("```").map((o,n)=>n%2==0?e.split("`").map((r,c)=>c%2==0?Lt(r,t,s):`<code class="formatter-code inline">${r}</code>`).join(""):`<pre class="formatter-code block"><code>${o}</code></pre>`).join("");const St=e=>(q("data-v-197a4589"),e=e(),z(),e),Bt=["id"],Tt={key:0,class:"message-list-date-wrap"},Rt=St(()=>l("hr",null,null,-1)),Et={class:"message-list-date"},jt={class:"message-left"},Ut={key:0,class:"message-avatar"},Nt=["src"],Vt={key:1},Pt={class:"message-main"},At={key:0,class:"message-header"},Wt={class:"message-author"},qt={class:"message-timestamp"},zt=["innerHTML"],Ht={key:3,class:"message-reactions"},Ft=C({props:{message:null,aboveMessage:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean}},setup(e){const t=e;U([]);const s=j(),o=y(()=>{var _;return G((_=t.message)==null?void 0:_.ts)}),n=y(()=>{var $;const _=o.value.format("YYYY-MM-DD"),m=G(($=t.aboveMessage)==null?void 0:$.ts).format("YYYY-MM-DD");return!t.aboveMessage||_!==m}),r=y(()=>{var _;return!n.value&&t.message.userId===((_=t.aboveMessage)==null?void 0:_.userId)}),c=y(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),u=y(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),i=y(()=>{var _,m;return t.hideDateRule&&n.value?(_=o.value)==null?void 0:_.format("Do MMM, YYYY [at] h:mm a"):(m=o.value)==null?void 0:m.format("h:mm a").toUpperCase()});return(_,m)=>{var v,h,w,M,B;const $=Mt,g=mt,x=nt;return((v=e.message)==null?void 0:v.id)?(d(),p("div",{key:0,id:`message-${e.message.id}`},[a(n)&&!e.hideDateRule?(d(),p("div",Tt,[Rt,l("div",Et,b(a(o).format("MMMM Do, YYYY")),1)])):k("",!0),e.message?(d(),p("div",{key:1,class:V({message:!0,continued:a(r)})},[l("div",jt,[a(r)?(d(),p("span",Vt,b(a(o).format("h:mm")),1)):(d(),p("div",Ut,[l("img",{src:(h=a(c))==null?void 0:h.image72,alt:""},null,8,Nt)]))]),l("div",Pt,[a(r)?k("",!0):(d(),p("div",At,[l("span",Wt,b((w=a(c))==null?void 0:w.name),1),l("span",qt,b(a(i)),1)])),e.message.text?(d(),p("div",{key:1,class:V({"message-content":!0,"just-emoji":a(u),"non-message":e.message.type!=="message"}),innerHTML:a(le)(e.message.text,a(s).users,a(s).channels)},null,10,zt)):k("",!0),((M=e.message.files)==null?void 0:M.length)?(d(),D($,{key:2,files:e.message.files},null,8,["files"])):k("",!0),((B=e.message.reactions)==null?void 0:B.length)?(d(),p("div",Ht,[(d(!0),p(W,null,K(e.message.reactions,N=>(d(),D(g,{key:N.name,react:N},null,8,["react"]))),128))])):k("",!0),e.message.replyCount&&!t.hideReplies?(d(),D(x,{key:4,message:e.message},null,8,["message"])):k("",!0)])],2)):k("",!0)],8,Bt)):k("",!0)}}});var Ot=S(Ft,[["__scopeId","data-v-197a4589"]]);const Yt={class:"chat-header"},Gt={key:0,class:"chat-header-actions"},Jt={class:"chat-header-title spacer"},Kt=["innerHTML"],Qt=["innerHTML"],Xt={key:1,class:"chat-header-actions"},Zt=C({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,o=j();return(n,r)=>{const c=P,u=J("router-link");return d(),p("div",Yt,[s.showMenuButton?(d(),p("div",Gt,[l("button",{class:"btn btn-icon menu-button",onClick:r[0]||(r[0]=i=>a(o).toggleSidebar())},[f(c,{icon:"mdi:menu-open"})])])):k("",!0),l("div",Jt,[l("strong",null,b(s.title),1),s.subtitle&&!s.subtitleTo?(d(),D(a(F),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:L(()=>[l("div",{class:"subtitle-popout",innerHTML:a(le)(s.subtitle,a(o).users,a(o).channels)},null,8,Qt)]),default:L(()=>[l("span",{innerHTML:a(le)(s.subtitle,a(o).users,a(o).channels)},null,8,Kt)]),_:1})):k("",!0),s.subtitle&&s.subtitleTo?(d(),D(u,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:b(s.subtitle)},null,8,["to","textContent"])):k("",!0)]),s.showCloseButton?(d(),p("div",Xt,[l("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=i=>t("close"))},[f(c,{icon:"mdi:close"})])])):k("",!0)])}}});var es=S(Zt,[["__scopeId","data-v-13add010"]]);const ts=e=>(q("data-v-5bea8671"),e=e(),z(),e),ss={class:"thread-list"},ns=ts(()=>l("hr",null,null,-1)),os={class:"replies-count"},as=C({setup(e){var $;const t=te(),s=pe(),o=j(),n=U(`${($=t.query.threadRef)!=null?$:""}`),r=y(()=>{var g;return`${(g=t.query.threadRef)!=null?g:""}`}),c=y(()=>{var x;const g=n.value.split("-")[0];return(x=o.channels)==null?void 0:x.find(v=>v.id===g)}),u=y(()=>{var x,v;const g=Number(n.value.split("-")[1]);return(v=(x=c.value)==null?void 0:x.rootMessages)==null?void 0:v.find(h=>h.id===g)}),i=y(()=>{var x,v;const g=Number(n.value.split("-")[1]);return((v=(x=c.value)==null?void 0:x.messages)==null?void 0:v.filter(h=>{var w;return h.threadId===g||((w=u.value)==null?void 0:w.replyMessageIds.indexOf(h.id))!==-1}))||[]}),_=()=>{s.push({query:me(t.query,"threadRef")})},m=g=>g>0?i.value[g-1]:ne(A({},u.value),{userId:""});return Ue(r,()=>{var g;n.value=`${(g=t.query.threadRef)!=null?g:""}`}),(g,x)=>{var w,M;const v=es,h=Ot;return d(),p(W,null,[((w=a(c))==null?void 0:w.id)?(d(),D(v,{key:0,title:"Thread",subtitle:`#${(M=a(c))==null?void 0:M.name}`,"subtitle-to":{params:{channelId:a(c).id},query:A({},a(t).query),name:"channel"},"show-close-button":"",onClose:_},null,8,["subtitle","subtitle-to"])):k("",!0),l("div",ss,[f(h,{message:a(u),"above-message":null,style:{margin:"16px 0"},"hide-date-rule":"","hide-replies":""},null,8,["message"]),ns,l("div",os,[l("small",null,b(a(i).length)+" Repl"+b(a(i).length===1?"y":"ies"),1)]),(d(!0),p(W,null,K(a(i),(B,N)=>(d(),D(h,{key:B.id,message:B,"above-message":m(N),class:V({last:N===a(i).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","class"]))),128))])],64)}}});var rs=S(as,[["__scopeId","data-v-5bea8671"]]);const is={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},ls=["src"],cs=C({setup(e){const t=j(),s=U(!1),o="mrfrase3",n="Support me on Buy me a coffee!",r=y(()=>`https://www.buymeacoffee.com/widget/page/${o}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return Ne(()=>{!t.coffeeMenu||(s.value=!0)}),(c,u)=>{const i=P;return d(),D(a(F),{placement:"top",class:"coffee-pop",show:a(t).coffeeMenu},{content:L(()=>[s.value||a(t).coffeeMenu?(d(),p("iframe",{key:0,src:a(r),title:"Buy me a coffee",class:"bmc-iframe"},null,8,ls)):k("",!0)]),default:L(()=>[l("div",{class:"coffee-btn",onClick:u[0]||(u[0]=_=>a(t).coffeeMenu=!a(t).coffeeMenu)},[R(f(i,{icon:"mdi:close"},null,512),[[E,a(t).coffeeMenu]]),R(l("img",is,null,512),[[E,!a(t).coffeeMenu]])])]),_:1},8,["show"])}}});var us=S(cs,[["__scopeId","data-v-5dfad6fe"]]);const ds=e=>(q("data-v-6cf7f162"),e=e(),z(),e),_s={class:"sidebar-footer"},ps=ds(()=>l("div",{class:"spacer"},null,-1)),ms={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},hs=C({setup(e){const t=j(),s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(o,n)=>{const r=P,c=us;return d(),p("div",_s,[(a(t).binarySource,d(),D(a(F),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:L(()=>[f(r,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=u=>a(t).downloadBinary())})]),_:1})),f(a(F),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:L(()=>[f(r,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),ps,f(a(F),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:L(()=>[l("a",ms,[f(r,{class:"action-icon",icon:"mdi:github"})])]),_:1}),f(c)])}}});var fs=S(hs,[["__scopeId","data-v-6cf7f162"]]);const $e=e=>(q("data-v-39bb419c"),e=e(),z(),e),vs={class:"channel-list"},gs=$e(()=>l("div",{class:"title"}," Channels ",-1)),ys=$e(()=>l("span",{style:{"padding-right":"8px"}},"#",-1)),bs=C({setup(e){const t=j(),s=te(),o=n=>s.params.channelId===n.id;return(n,r)=>{const c=J("router-link");return d(),p("div",vs,[gs,l("ul",null,[(d(!0),p(W,null,K(a(t).channels,u=>(d(),p("li",{key:u.id},[f(c,{to:{params:{channelId:u.id},query:A({},a(s).query),name:"channel"},class:V({link:!0,active:o(u)})},{default:L(()=>[ys,Q(" "+b(u.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var $s=S(bs,[["__scopeId","data-v-39bb419c"]]);const xs={class:"checkbox-text"},ws={class:"checkbox-label"},ks={class:"checkbox-hint"},Cs=C({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=()=>{t("update:modelValue",!s.modelValue)};return(n,r)=>{const c=P;return d(),p("div",{class:"checkbox-wrap",onClick:o},[f(c,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),l("div",xs,[l("div",ws,[he(n.$slots,"label",{},()=>[Q(b(s.label),1)],!0)]),l("div",ks,[he(n.$slots,"hint",{},()=>[Q(b(s.hint),1)],!0)])])])}}});var Is=S(Cs,[["__scopeId","data-v-d80c7f36"]]),Ms="/assets/loading.7cbe3464.svg";const I=e=>(q("data-v-1f3c2901"),e=e(),z(),e),Ds={class:"loading-splash moving-gradient"},Ls=I(()=>l("img",{alt:"Loading",src:Ms},null,-1)),Ss=I(()=>l("br",null,null,-1)),Bs=I(()=>l("br",null,null,-1)),Ts=I(()=>l("br",null,null,-1)),Rs=["onDrop","onDragover"],Es={key:0},js=I(()=>l("strong",null,"Drop .zip file here",-1)),Us=I(()=>l("br",null,null,-1)),Ns=I(()=>l("small",null,"or click to select",-1)),Vs=[js,Us,Ns],Ps={key:1},As=I(()=>l("strong",null,"Kobe!",-1)),Ws=[As],qs={key:2},zs=I(()=>l("strong",null,"File must be a .zip",-1)),Hs=I(()=>l("br",null,null,-1)),Fs=I(()=>l("small",null,"Please try again",-1)),Os=[zs,Hs,Fs],Ys={class:"config"},Gs=I(()=>l("h2",null,"Export Preferences",-1)),Js={class:"actions"},Ks=I(()=>l("div",{class:"spacer"},null,-1)),Qs=I(()=>l("span",null,"Process",-1)),Xs=C({setup(e){const t=j(),s=U(null),o=U(!1),n=U(!1),r=U(!1),c=y(()=>r.value?"mdi:alert-outline":o.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),u=y(()=>r.value?!0:!(!o.value||n.value)),i=y(()=>u.value?"error":o.value?"success":""),_=v=>v?Array.from(v):[],m=v=>{var h;r.value=!1,o.value=!0,n.value=!!((h=v.dataTransfer)==null?void 0:h.types.includes("Files"))},$=()=>{r.value=!1,o.value=!1,n.value=!1},g=v=>{var w,M;v.preventDefault();const h=(w=v.dataTransfer)!=null?w:v.target;s.value=(M=_(h.files).find(B=>B.type==="application/zip"))!=null?M:null,$(),r.value=!s.value},x=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary())};return fe(()=>{t.loadBinary()}),(v,h)=>{var B,N;const w=P,M=Is;return R((d(),p("div",Ds,[R(l("div",null,[Ls,Ss,Bs,l("strong",null,b(a(t).status),1),Ts,a(t).status.startsWith("Error:")?(d(),p("button",{key:0,onClick:h[0]||(h[0]=T=>a(t).exportNeeded=!0)}," Back ")):k("",!0)],512),[[E,!a(t).exportNeeded]]),R(l("div",null,[R((d(),p("input",{key:(B=s.value)==null?void 0:B.name,ref:"fileInput",type:"file",accept:".zip",onChange:g},null,32)),[[E,!1]]),R(l("div",{class:V(`drop-area ${a(i)}`),onDrop:ve(g,["prevent"]),onDragenter:m,onDragover:ve(m,["prevent"]),onDragleave:$,onClick:h[1]||(h[1]=T=>v.$refs.fileInput.click())},[f(w,{class:"zip-icon",icon:a(c)},null,8,["icon"]),!a(u)&&!o.value?(d(),p("div",Es,Vs)):a(u)?(d(),p("div",qs,Os)):(d(),p("div",Ps,Ws))],42,Rs),[[E,!s.value]]),R(l("div",Ys,[Gs,l("span",null,[f(w,{icon:"mdi:folder-zip-outline"}),l("strong",null,b((N=s.value)==null?void 0:N.name),1)]),f(M,{modelValue:a(t).exportConfig.preferDisplayName,"onUpdate:modelValue":h[2]||(h[2]=T=>a(t).exportConfig.preferDisplayName=T),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),f(M,{modelValue:a(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":h[3]||(h[3]=T=>a(t).exportConfig.hideChannelMessages=T),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),f(M,{modelValue:a(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":h[4]||(h[4]=T=>a(t).exportConfig.skipArchivedChannels=T),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),f(M,{modelValue:a(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":h[5]||(h[5]=T=>a(t).exportConfig.removeLinkPreviews=T),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),l("div",Js,[l("button",{class:"btn btn-text",onClick:h[6]||(h[6]=T=>s.value=null)}," Back "),Ks,l("button",{class:"btn",onClick:x},[f(w,{icon:"mdi:cog"}),Qs])])],512),[[E,s.value]])],512),[[E,a(t).exportNeeded]])],512)),[[E,!a(t).dataLoaded]])}}});var Zs=S(Xs,[["__scopeId","data-v-1f3c2901"]]),en="/slax.svg";const tn=l("h1",null,[l("img",{src:en,alt:"",style:{height:"1em","margin-right":"8px"}}),Q(" Slax Pro ")],-1),sn=C({setup(e){const t=j(),s=te(),o=pe(),n=y(()=>{var u;return(u=s.query)==null?void 0:u.threadRef}),r=()=>{t.leftSidebar=!1,o.push({query:A({},me(s.query,["threadRef"]))})},c=Ve(()=>t.onWidthChange(),100);return fe(()=>window.addEventListener("resize",c)),Pe(()=>window.removeEventListener("resize",c)),(u,i)=>{const _=Zs,m=J("router-link"),$=$s,g=fs,x=rs,v=J("router-view");return d(),p(W,null,[f(_),l("div",{class:V({sidebar:!0,closed:!a(t).leftSidebar})},[f(m,{class:"no-link",to:{name:"home",params:{},query:A({},a(s).query)}},{default:L(()=>[tn]),_:1},8,["to"]),f($),f(g)],2),l("div",{class:V({"thread-sidebar":!0,closed:!a(n)})},[f(x)],2),f(Ae,{name:"fade"},{default:L(()=>[R(l("div",{class:"sidebar-overlay",onClick:i[0]||(i[0]=h=>r())},null,512),[[E,a(t).leftSidebar||a(n)]])]),_:1}),l("div",{class:V({main:!0,"offset-right":!!a(n)})},[f(v)],2)],64)}}});window.Buffer=We.Buffer;qe(sn).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,ae.bind(e,t,s)},updated:ae.update,unmounted:ae.unbind}).use(ze()).use(Ye).mount("#app");export{es as C,S as _,Ot as a,j as u};
