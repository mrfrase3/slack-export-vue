var we=Object.defineProperty,ke=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var de=(e,t,s)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,A=(e,t)=>{for(var s in t||(t={}))Ie.call(t,s)&&de(e,s,t[s]);if(ue)for(var s of ue(t))Me.call(t,s)&&de(e,s,t[s]);return e},oe=(e,t)=>ke(e,Ce(t));import{c as De,a as Be,T as Le,A as te,d as Se,s as Te,b as G,e as Re,R as je,f as C,o as d,g as D,m as pe,u as a,I as Ee,h as se,i as g,r as J,w as B,j as l,k as _,l as K,F,t as $,n as h,p as W,q,E as Ue,v as H,x as Z,y as _e,z as j,B as E,C as U,D as k,G as V,H as me,J as Ne,K as he,L as Ve,M as fe,N as ve,O as ge,P as Pe,Q as Ae,S as Fe,U as We,V as qe,W as ae,X as ze}from"./vendor.a792f018.js";const He=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};He();const Oe="modulepreload",ye={},Ye="/",re=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${Ye}${o}`,o in ye)return;ye[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":Oe,n||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),n)return new Promise((u,i)=>{c.addEventListener("load",u),c.addEventListener("error",i)})})).then(()=>t())};var Ge=De({history:Be(),routes:[{path:"/",name:"home",component:()=>re(()=>import("./Home.37027f30.js"),[])},{path:"/channel/:channelId",name:"channel",component:()=>re(()=>import("./Channel.593109ea.js"),["assets/Channel.593109ea.js","assets/Channel.85be5dda.css","assets/vendor.a792f018.js"])}]}),be=new Le({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",text:"string",ts:"uint",isEdited:"boolean","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","imageUrl?":"string","quoteId?":"uint","channelId?":"string"}]}]}]});te.init({workerUrl:"/libarchive.js/worker-bundle.js"});const ie=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},O=e=>Math.floor(Number(e)*1e3),$e=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",N=Se("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:$e(window.innerWidth)}),actions:{async loadBinary(){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const o=await fetch("/export.bin.zip");if(!o.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const c=(await(await te.open(new File([await o.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await c.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:e,users:t}=await be.decode(this.binaryData);this.channels=e.map(o=>{var n;return oe(A({},o),{rootMessages:(n=o.messages)==null?void 0:n.filter(r=>!r.threadId)})});const s={};t.forEach(o=>{s[o.id]=o}),this.users=s,this.status="Done",this.dataLoaded=!0}catch(e){this.status=`Error: ${e.message}`,console.error(e)}},processUser(e){var t,s,o,n,r,c,u,i;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((o=e.profile)==null?void 0:o.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((r=e.profile)==null?void 0:r.image_512)||((c=e.profile)==null?void 0:c.image_192),image24:(u=e.profile)==null?void 0:u.image_24,image72:(i=e.profile)==null?void 0:i.image_72}},processMessage(e){var t,s,o,n,r,c,u;return{id:O(e.ts),type:e.subtype||e.type||"message",text:((t=e.text)==null?void 0:t.trim())||"",userId:e.user,ts:O(e.ts),isEdited:!!e.edited,threadId:e.parent_user_id?O(e.thread_ts):void 0,replyCount:e.reply_count||((s=e.replies)==null?void 0:s.length),replyUsersCount:e.reply_users_count||((o=e.replies_users)==null?void 0:o.length),latestReply:e.latest_reply?O(e.latest_reply):void 0,replyMessageIds:(n=e.replies)==null?void 0:n.map(i=>O(i.ts)),replyUserIds:e.reply_users,reactions:(r=e.reactions)==null?void 0:r.map(i=>({name:i.name,count:i.count,userIds:i.users})),files:(c=e.files)==null?void 0:c.map(i=>({id:i.id,name:i.name||i.filetype?`${i.id}.${i.filetype}`:"Untitled",mimeType:i.mimetype,src:i.url_private,width:i.original_w,height:i.original_h})).filter(i=>i.src&&i.mimeType&&i.id),attachments:(u=e.attachments)==null?void 0:u.map(i=>({serviceName:i.service_name,serviceIcon:i.service_icon,title:i.title,titleUrl:i.title_link,text:i.text,thumbUrl:i.thumb_url,imageUrl:i.image_url,quoteId:i.ts?O(i.ts):void 0,channelId:i.channel_id})).filter(i=>!!i.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,o;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((o=e.messages)==null?void 0:o.map(n=>this.processMessage(n)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await te.open(e)).extractFiles();this.status="Processing Channels...";const o=await ie(s,"channels.json"),r=(await ie(s,"users.json")).map(u=>this.processUser(u)),c=o.filter(u=>!u.is_archived||!this.exportConfig.skipArchivedChannels).map(u=>this.processChannel(u));await c.reduce(async(u,i,p)=>{await u,this.status=`Processing Messages for #${i.name} (${p+1}/${c.length})`;const m=[];await Promise.all(Object.keys(s[i.name]).map(async x=>{const v=await ie(s[i.name],x);m.push(...v.filter(b=>{var w;return!((w=b.subtype)==null?void 0:w.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(b=>this.processMessage(b)))})),i.messages=Te(m,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await be.encode({channels:c,users:r})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const o=await(await te.open(e)).getFilesObject();if(!o["export.bin"])return!1;const n=await((t=o["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await n.arrayBuffer()),this.exportNeeded=!1,this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await re(()=>import("./jszip.min.d40cebec.js").then(function(c){return c.j}),["assets/jszip.min.d40cebec.js","assets/vendor.a792f018.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const o=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download="export.bin.zip",r.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=$e(this.deviceWidth)}}});G.extend(Re);G.extend(je);const P=C({setup(e){return(t,s)=>(d(),D(a(Ee),pe(t.$attrs,{class:"icon"}),null,16))}});var S=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s};const Je=e=>(W("data-v-72abe67b"),e=e(),q(),e),Ke={class:"user-avatars"},Ze={class:"replies-count"},Qe={class:"replies-count-text"},Xe={class:"replies-info"},et={class:"last-reply"},tt=Je(()=>l("span",{class:"cta"}," View thread ",-1)),st={class:"chevron"},nt=C({props:{message:null},setup(e){const t=e,s=N(),o=se(),n=g(()=>{var i;let u=5;return s.deviceType==="sm"&&(u=3),s.deviceType==="xs"&&(u=1),((i=t.message.replyUserIds)==null?void 0:i.map(p=>{const m=s.users[p];return{src:m.image24||m.image72,alt:m.name}}).splice(0,u))||[]}),r=g(()=>G(t.message.latestReply)),c=g(()=>`${o.params.channelId}-${t.message.id}`);return(u,i)=>{const p=P,m=J("router-link");return d(),D(m,{to:{query:{threadRef:a(c)}},class:"replies-btn"},{default:B(()=>[l("div",Ke,[(d(!0),_(F,null,K(a(n),(x,v)=>(d(),_("img",pe({key:v},x),null,16))),128))]),l("div",Ze,[l("span",Qe,$(e.message.replyCount)+" replies ",1)]),l("div",Xe,[l("span",et," Last reply "+$(a(r).fromNow()),1),tt]),l("div",st,[h(p,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var ot=S(nt,[["__scopeId","data-v-72abe67b"]]);const Q=new Ue,z="google";Q.img_set=z;Q.img_sets[z].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${z}@7.0.2/img/${z}/64/`;Q.img_sets[z].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${z}@7.0.2/img/${z}/sheets/64.png`;const at=e=>(W("data-v-73aab79a"),e=e(),q(),e),rt={class:"react-chip"},it=["innerHTML"],lt={class:"react-count"},ct={class:"react-popper-content"},ut=["src","alt"],dt=at(()=>l("br",null,null,-1)),pt={class:"names"},_t=Z(" reacted with "),mt=C({props:{react:null},setup(e){const t=e,s=N(),o=g(()=>`:${t.react.name}:`),n=g(()=>Q.replace_colons(o.value)),r=g(()=>{var u;return(u=n.value.match(/https?:\/\/[^)]+/))==null?void 0:u[0]}),c=g(()=>{let u=t.react.userIds.map((i,p)=>{const m=s.users[i];let x="";return p!==0&&p===t.react.userIds.length-1&&(x="and "),`${x}${m==null?void 0:m.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(u+=` +${t.react.userIds.length-10} more`),u});return(u,i)=>(d(),D(a(H),{placement:"top",hover:"",arrow:""},{content:B(()=>[l("div",ct,[l("img",{src:a(r),alt:e.react.name},null,8,ut),dt,l("strong",pt,$(a(c)),1),_t,l("strong",null,$(a(o)),1)])]),default:B(()=>[l("div",rt,[l("span",{innerHTML:a(n)},null,8,it),l("span",lt,$(e.react.count),1)])]),_:1}))}});var ht=S(mt,[["__scopeId","data-v-73aab79a"]]);const ft={class:"file-preview"},vt=["src"],gt=["href"],yt=["src","alt"],bt={key:1,class:"unknown-preview"},$t={class:"file-name"},xt=C({props:{file:null,maxWidth:null},setup(e){const t=e,s=g(()=>t.file.mimeType.split("/")[0]),o=g(()=>t.file.src),n=g(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const r=t.maxWidth,c=360,u=t.file.width,i=t.file.height,p=u/i;return{height:`${Math.min(p>1?r/p:c,i)}px`}});return(r,c)=>{const u=P;return d(),_("div",ft,[a(s)==="video"?(d(),_("video",{key:0,src:a(o),controls:"",style:_e(a(n))},null,12,vt)):(d(),_("a",{key:1,href:a(o),target:"_blank"},[a(s)==="image"?(d(),_("img",{key:0,src:a(o),alt:t.file.name,style:_e(a(n))},null,12,yt)):(d(),_("div",bt,[h(u,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),l("div",$t,$(t.file.name),1)]))],8,gt))])}}});var wt=S(xt,[["__scopeId","data-v-fc0cdeb8"]]);const kt={class:"file-list-header"},Ct={class:"file-list-header-title"},It={class:"file-list-header-actions"},Mt=C({props:{files:null},setup(e){const t=e,s=j(!1),o=j(null),n=g(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(r,c)=>{const u=P,i=wt;return d(),_("div",{ref_key:"wrapper",ref:o,class:"file-list"},[l("div",kt,[l("span",Ct,$(a(n)),1),l("span",It,[h(u,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:c[0]||(c[0]=p=>s.value=!s.value)},null,8,["icon"])])]),(d(!0),_(F,null,K(o.value?e.files:[],p=>{var m;return E((d(),D(i,{key:p.id,file:p,"max-width":(m=o.value)==null?void 0:m.offsetWidth},null,8,["file","max-width"])),[[U,!s.value]])}),128))],512)}}});var Dt=S(Mt,[["__scopeId","data-v-32e3d2e3"]]);const X=(e,t)=>e.split(t)[0].length,ne={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},ee=e=>Object.keys(ne).reduce((t,s)=>t.replaceAll(s,ne[s]),e),Bt=e=>Object.keys(ne).reduce((t,s)=>t.replaceAll(ne[s],s),e),Y=/(-|\* |•|◦|▪︎)/,Lt=(e,t,s)=>Bt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,o=>{const n=o.split(`
`).filter(Boolean);return n.map((r,c)=>{let u="";const i=n[c-1],p=c===0,m=c===n.length-1;return i&&X(i,Y)!==X(r,Y)&&(u+="</ul>"),(p||X(i,Y)!==X(r,Y))&&(u+=`<ul class="formatter-ul" data-indent="${Math.round(X(r,Y)/4)}">`),u+=`<li>${r.split(Y)[2].trim()}</li>`,m&&(u+="</ul>"),u}).join("")}).replace(/<@(U[\w]+)>/g,(o,n)=>{var u,i;const r=t[n],c=((u=r.profile)==null?void 0:u.display_name)||((i=r.profile)==null?void 0:i.real_name)||r.name;return ee(r?`<span class="formatter-mention">@${c}</span>`:o)}).replace(/<!([\w\^]+)>/g,(o,n)=>ee(`<span class="formatter-mention">@${n}</span>`)).replace(/<#(C[\w\^\|]+)>/g,(o,n)=>{const r=s.find(c=>n.startsWith(c.id));return ee(r?`<a class="formatter-mention" href="#${r.name}">#${r.name}</a>`:o)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(o,n,r,c)=>ee(`<a class="formatter-link" href="${n}" target="_blank">${c||n}</a>`)).replace(/(:[^: ]+:)/gm,o=>{const n=Q.replace_colons(o);return n.includes("<span")?ee(n):n}).replace(/\*([^\*]+)\*/gm,(o,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(o,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(o,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var le=(e,t,s)=>e.split("```").map((o,n)=>n%2==0?e.split("`").map((r,c)=>c%2==0?Lt(r,t,s):`<code class="formatter-code inline">${r}</code>`).join(""):`<pre class="formatter-code block"><code>${o}</code></pre>`).join("");const St=e=>(W("data-v-197a4589"),e=e(),q(),e),Tt=["id"],Rt={key:0,class:"message-list-date-wrap"},jt=St(()=>l("hr",null,null,-1)),Et={class:"message-list-date"},Ut={class:"message-left"},Nt={key:0,class:"message-avatar"},Vt=["src"],Pt={key:1},At={class:"message-main"},Ft={key:0,class:"message-header"},Wt={class:"message-author"},qt={class:"message-timestamp"},zt=["innerHTML"],Ht={key:3,class:"message-reactions"},Ot=C({props:{message:null,aboveMessage:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean}},setup(e){const t=e;j([]);const s=N(),o=g(()=>{var p;return G((p=t.message)==null?void 0:p.ts)}),n=g(()=>{var x;const p=o.value.format("YYYY-MM-DD"),m=G((x=t.aboveMessage)==null?void 0:x.ts).format("YYYY-MM-DD");return!t.aboveMessage||p!==m}),r=g(()=>{var p;return!n.value&&t.message.userId===((p=t.aboveMessage)==null?void 0:p.userId)}),c=g(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),u=g(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),i=g(()=>{var p,m;return t.hideDateRule&&n.value?(p=o.value)==null?void 0:p.format("Do MMM, YYYY [at] h:mm a"):(m=o.value)==null?void 0:m.format("h:mm a").toUpperCase()});return(p,m)=>{var w,y,f,L,M;const x=Dt,v=ht,b=ot;return((w=e.message)==null?void 0:w.id)?(d(),_("div",{key:0,id:`message-${e.message.id}`},[a(n)&&!e.hideDateRule?(d(),_("div",Rt,[jt,l("div",Et,$(a(o).format("MMMM Do, YYYY")),1)])):k("",!0),e.message?(d(),_("div",{key:1,class:V({message:!0,continued:a(r)})},[l("div",Ut,[a(r)?(d(),_("span",Pt,$(a(o).format("h:mm")),1)):(d(),_("div",Nt,[l("img",{src:(y=a(c))==null?void 0:y.image72,alt:""},null,8,Vt)]))]),l("div",At,[a(r)?k("",!0):(d(),_("div",Ft,[l("span",Wt,$((f=a(c))==null?void 0:f.name),1),l("span",qt,$(a(i)),1)])),e.message.text?(d(),_("div",{key:1,class:V({"message-content":!0,"just-emoji":a(u),"non-message":e.message.type!=="message"}),innerHTML:a(le)(e.message.text,a(s).users,a(s).channels)},null,10,zt)):k("",!0),((L=e.message.files)==null?void 0:L.length)?(d(),D(x,{key:2,files:e.message.files},null,8,["files"])):k("",!0),((M=e.message.reactions)==null?void 0:M.length)?(d(),_("div",Ht,[(d(!0),_(F,null,K(e.message.reactions,T=>(d(),D(v,{key:T.name,react:T},null,8,["react"]))),128))])):k("",!0),e.message.replyCount&&!t.hideReplies?(d(),D(b,{key:4,message:e.message},null,8,["message"])):k("",!0)])],2)):k("",!0)],8,Tt)):k("",!0)}}});var Yt=S(Ot,[["__scopeId","data-v-197a4589"]]);const Gt={class:"chat-header"},Jt={key:0,class:"chat-header-actions"},Kt={class:"chat-header-title spacer"},Zt=["innerHTML"],Qt=["innerHTML"],Xt={key:1,class:"chat-header-actions"},es=C({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,o=N();return(n,r)=>{const c=P,u=J("router-link");return d(),_("div",Gt,[s.showMenuButton?(d(),_("div",Jt,[l("button",{class:"btn btn-icon menu-button",onClick:r[0]||(r[0]=i=>a(o).toggleSidebar())},[h(c,{icon:"mdi:menu-open"})])])):k("",!0),l("div",Kt,[l("strong",null,$(s.title),1),s.subtitle&&!s.subtitleTo?(d(),D(a(H),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:B(()=>[l("div",{class:"subtitle-popout",innerHTML:a(le)(s.subtitle,a(o).users,a(o).channels)},null,8,Qt)]),default:B(()=>[l("span",{innerHTML:a(le)(s.subtitle,a(o).users,a(o).channels)},null,8,Zt)]),_:1})):k("",!0),s.subtitle&&s.subtitleTo?(d(),D(u,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:$(s.subtitle)},null,8,["to","textContent"])):k("",!0)]),s.showCloseButton?(d(),_("div",Xt,[l("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=i=>t("close"))},[h(c,{icon:"mdi:close"})])])):k("",!0)])}}});var ts=S(es,[["__scopeId","data-v-13add010"]]);const ss=e=>(W("data-v-5bea8671"),e=e(),q(),e),ns={class:"thread-list"},os=ss(()=>l("hr",null,null,-1)),as={class:"replies-count"},rs=C({setup(e){var x;const t=se(),s=me(),o=N(),n=j(`${(x=t.query.threadRef)!=null?x:""}`),r=g(()=>{var v;return`${(v=t.query.threadRef)!=null?v:""}`}),c=g(()=>{var b;const v=n.value.split("-")[0];return(b=o.channels)==null?void 0:b.find(w=>w.id===v)}),u=g(()=>{var b,w;const v=Number(n.value.split("-")[1]);return(w=(b=c.value)==null?void 0:b.rootMessages)==null?void 0:w.find(y=>y.id===v)}),i=g(()=>{var b,w;const v=Number(n.value.split("-")[1]);return((w=(b=c.value)==null?void 0:b.messages)==null?void 0:w.filter(y=>{var f;return y.threadId===v||((f=u.value)==null?void 0:f.replyMessageIds.indexOf(y.id))!==-1}))||[]}),p=()=>{s.push({query:he(t.query,"threadRef")})},m=v=>v>0?i.value[v-1]:oe(A({},u.value),{userId:""});return Ne(r,()=>{var v;n.value=`${(v=t.query.threadRef)!=null?v:""}`}),(v,b)=>{var f,L;const w=ts,y=Yt;return d(),_(F,null,[((f=a(c))==null?void 0:f.id)?(d(),D(w,{key:0,title:"Thread",subtitle:`#${(L=a(c))==null?void 0:L.name}`,"subtitle-to":{params:{channelId:a(c).id},query:A({},a(t).query),name:"channel"},"show-close-button":"",onClose:p},null,8,["subtitle","subtitle-to"])):k("",!0),l("div",ns,[h(y,{message:a(u),"above-message":null,style:{margin:"16px 0"},"hide-date-rule":"","hide-replies":""},null,8,["message"]),os,l("div",as,[l("small",null,$(a(i).length)+" Repl"+$(a(i).length===1?"y":"ies"),1)]),(d(!0),_(F,null,K(a(i),(M,T)=>(d(),D(y,{key:M.id,message:M,"above-message":m(T),class:V({last:T===a(i).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","class"]))),128))])],64)}}});var is=S(rs,[["__scopeId","data-v-5bea8671"]]);const ls={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},cs=["src"],us=C({setup(e){const t=N(),s=j(!1),o="mrfrase3",n="Support me on Buy me a coffee!",r=g(()=>`https://www.buymeacoffee.com/widget/page/${o}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return Ve(()=>{!t.coffeeMenu||(s.value=!0)}),(c,u)=>{const i=P;return d(),D(a(H),{placement:"top",class:"coffee-pop",show:a(t).coffeeMenu},{content:B(()=>[s.value||a(t).coffeeMenu?(d(),_("iframe",{key:0,src:a(r),title:"Buy me a coffee",class:"bmc-iframe"},null,8,cs)):k("",!0)]),default:B(()=>[l("div",{class:"coffee-btn",onClick:u[0]||(u[0]=p=>a(t).coffeeMenu=!a(t).coffeeMenu)},[E(h(i,{icon:"mdi:close"},null,512),[[U,a(t).coffeeMenu]]),E(l("img",ls,null,512),[[U,!a(t).coffeeMenu]])])]),_:1},8,["show"])}}});var ds=S(us,[["__scopeId","data-v-5dfad6fe"]]);const ps=e=>(W("data-v-6cf7f162"),e=e(),q(),e),_s={class:"sidebar-footer"},ms=ps(()=>l("div",{class:"spacer"},null,-1)),hs={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},fs=C({setup(e){const t=N(),s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(o,n)=>{const r=P,c=ds;return d(),_("div",_s,[(a(t).binarySource,d(),D(a(H),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:B(()=>[h(r,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=u=>a(t).downloadBinary())})]),_:1})),h(a(H),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:B(()=>[h(r,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),ms,h(a(H),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:B(()=>[l("a",hs,[h(r,{class:"action-icon",icon:"mdi:github"})])]),_:1}),h(c)])}}});var vs=S(fs,[["__scopeId","data-v-6cf7f162"]]);const xe=e=>(W("data-v-39bb419c"),e=e(),q(),e),gs={class:"channel-list"},ys=xe(()=>l("div",{class:"title"}," Channels ",-1)),bs=xe(()=>l("span",{style:{"padding-right":"8px"}},"#",-1)),$s=C({setup(e){const t=N(),s=se(),o=n=>s.params.channelId===n.id;return(n,r)=>{const c=J("router-link");return d(),_("div",gs,[ys,l("ul",null,[(d(!0),_(F,null,K(a(t).channels,u=>(d(),_("li",{key:u.id},[h(c,{to:{params:{channelId:u.id},query:A({},a(s).query),name:"channel"},class:V({link:!0,active:o(u)})},{default:B(()=>[bs,Z(" "+$(u.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var xs=S($s,[["__scopeId","data-v-39bb419c"]]);const ws={class:"checkbox-text"},ks={class:"checkbox-label"},Cs={class:"checkbox-hint"},Is=C({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=()=>{t("update:modelValue",!s.modelValue)};return(n,r)=>{const c=P;return d(),_("div",{class:"checkbox-wrap",onClick:o},[h(c,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),l("div",ws,[l("div",ks,[fe(n.$slots,"label",{},()=>[Z($(s.label),1)],!0)]),l("div",Cs,[fe(n.$slots,"hint",{},()=>[Z($(s.hint),1)],!0)])])])}}});var Ms=S(Is,[["__scopeId","data-v-d80c7f36"]]),Ds="/assets/loading.7cbe3464.svg";const I=e=>(W("data-v-57a58c7c"),e=e(),q(),e),Bs={class:"loading-splash moving-gradient"},Ls=I(()=>l("img",{alt:"Loading",src:Ds},null,-1)),Ss=I(()=>l("br",null,null,-1)),Ts=I(()=>l("br",null,null,-1)),Rs=I(()=>l("br",null,null,-1)),js=["onDrop","onDragover"],Es={key:0},Us=I(()=>l("strong",null,"Drop .zip file here",-1)),Ns=I(()=>l("br",null,null,-1)),Vs=I(()=>l("small",null,"or click to select",-1)),Ps=[Us,Ns,Vs],As={key:1},Fs=I(()=>l("strong",null,"Kobe!",-1)),Ws=[Fs],qs={key:2},zs=I(()=>l("strong",null,"File must be a .zip",-1)),Hs=I(()=>l("br",null,null,-1)),Os=I(()=>l("small",null,"Please try again",-1)),Ys=[zs,Hs,Os],Gs={class:"config"},Js=I(()=>l("h2",null,"Export Preferences",-1)),Ks={class:"actions"},Zs=I(()=>l("div",{class:"spacer"},null,-1)),Qs=I(()=>l("span",null,"Process",-1)),Xs=C({setup(e){const t=N(),s=j(null),o=j(!1),n=j(!1),r=j(!1),c=j(!1),u=g(()=>r.value?"mdi:alert-outline":o.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),i=g(()=>r.value?!0:!(!o.value||n.value)),p=g(()=>i.value?"error":o.value?"success":""),m=y=>y?Array.from(y):[],x=y=>{var f;r.value=!1,o.value=!0,n.value=!!((f=y.dataTransfer)==null?void 0:f.types.includes("Files"))},v=()=>{r.value=!1,o.value=!1,n.value=!1},b=async y=>{var L,M;y.preventDefault();const f=(L=y.dataTransfer)!=null?L:y.target;s.value=(M=m(f.files).find(T=>T.type==="application/zip"))!=null?M:null,v(),r.value=!s.value,s.value&&(c.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),c.value=!1)},w=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)};return ve(()=>{t.loadBinary()}),(y,f)=>{var T,ce;const L=P,M=Ms;return E((d(),_("div",Bs,[E(l("div",null,[Ls,Ss,Ts,l("strong",null,$(a(t).status),1),Rs,a(t).status.startsWith("Error:")?(d(),_("button",{key:0,onClick:f[0]||(f[0]=R=>a(t).exportNeeded=!0)}," Back ")):k("",!0)],512),[[U,!a(t).exportNeeded||c.value]]),E(l("div",null,[E((d(),_("input",{key:(T=s.value)==null?void 0:T.name,ref:"fileInput",type:"file",accept:".zip",onChange:b},null,32)),[[U,!1]]),E(l("div",{class:V(`drop-area ${a(p)}`),onDrop:ge(b,["prevent"]),onDragenter:x,onDragover:ge(x,["prevent"]),onDragleave:v,onClick:f[1]||(f[1]=R=>y.$refs.fileInput.click())},[h(L,{class:"zip-icon",icon:a(u)},null,8,["icon"]),!a(i)&&!o.value?(d(),_("div",Es,Ps)):a(i)?(d(),_("div",qs,Ys)):(d(),_("div",As,Ws))],42,js),[[U,!s.value]]),E(l("div",Gs,[Js,l("span",null,[h(L,{icon:"mdi:folder-zip-outline"}),l("strong",null,$((ce=s.value)==null?void 0:ce.name),1)]),h(M,{modelValue:a(t).exportConfig.preferDisplayName,"onUpdate:modelValue":f[2]||(f[2]=R=>a(t).exportConfig.preferDisplayName=R),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),h(M,{modelValue:a(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":f[3]||(f[3]=R=>a(t).exportConfig.hideChannelMessages=R),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),h(M,{modelValue:a(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":f[4]||(f[4]=R=>a(t).exportConfig.skipArchivedChannels=R),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),h(M,{modelValue:a(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":f[5]||(f[5]=R=>a(t).exportConfig.removeLinkPreviews=R),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),l("div",Ks,[l("button",{class:"btn btn-text",onClick:f[6]||(f[6]=R=>s.value=null)}," Back "),Zs,l("button",{class:"btn",onClick:w},[h(L,{icon:"mdi:cog"}),Qs])])],512),[[U,s.value]])],512),[[U,a(t).exportNeeded&&!c.value]])],512)),[[U,!a(t).dataLoaded]])}}});var en=S(Xs,[["__scopeId","data-v-57a58c7c"]]),tn="/slax.svg";const sn=l("h1",null,[l("img",{src:tn,alt:"",style:{height:"1em","margin-right":"8px"}}),Z(" Slax Pro ")],-1),nn=C({setup(e){const t=N(),s=se(),o=me(),n=g(()=>{var u;return(u=s.query)==null?void 0:u.threadRef}),r=()=>{t.leftSidebar=!1,o.push({query:A({},he(s.query,["threadRef"]))})},c=Pe(()=>t.onWidthChange(),100);return ve(()=>window.addEventListener("resize",c)),Ae(()=>window.removeEventListener("resize",c)),(u,i)=>{const p=en,m=J("router-link"),x=xs,v=vs,b=is,w=J("router-view");return d(),_(F,null,[h(p),l("div",{class:V({sidebar:!0,closed:!a(t).leftSidebar})},[h(m,{class:"no-link",to:{name:"home",params:{},query:A({},a(s).query)}},{default:B(()=>[sn]),_:1},8,["to"]),h(x),h(v)],2),l("div",{class:V({"thread-sidebar":!0,closed:!a(n)})},[h(b)],2),h(Fe,{name:"fade"},{default:B(()=>[E(l("div",{class:"sidebar-overlay",onClick:i[0]||(i[0]=y=>r())},null,512),[[U,a(t).leftSidebar||a(n)]])]),_:1}),l("div",{class:V({main:!0,"offset-right":!!a(n)})},[h(w)],2)],64)}}});window.Buffer=We.Buffer;qe(nn).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,ae.bind(e,t,s)},updated:ae.update,unmounted:ae.unbind}).use(ze()).use(Ge).mount("#app");export{ts as C,S as _,Yt as a,N as u};
