var Le=Object.defineProperty,Be=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var fe=(e,t,s)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,W=(e,t)=>{for(var s in t||(t={}))Se.call(t,s)&&fe(e,s,t[s]);if(me)for(var s of me(t))Te.call(t,s)&&fe(e,s,t[s]);return e},ae=(e,t)=>Be(e,Re(t));import{c as je,a as Ee,T as Ue,A as ne,d as Ne,s as Ve,b as K,e as Pe,R as Ae,f as B,o as d,g as R,m as ve,u as o,I as Fe,h as Z,i as f,r as Q,w as D,j as r,k as p,l as X,F as q,t as b,n as m,p as z,q as H,E as We,v as O,x as A,y as ge,z as j,B as E,C as U,D as I,G as V,H as ye,J as qe,K as be,L as ze,M as $e,N as xe,O as we,P as He,Q as Oe,S as Ye,U as Ge,V as Je,W as re,X as Ke}from"./vendor.7d2fdebc.js";const Ze=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}};Ze();const Qe="modulepreload",ke={},Xe="/",ie=function(t,s){return!s||s.length===0?t():Promise.all(s.map(a=>{if(a=`${Xe}${a}`,a in ke)return;ke[a]=!0;const n=a.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${i}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":Qe,n||(c.as="script",c.crossOrigin=""),c.href=a,document.head.appendChild(c),n)return new Promise((u,l)=>{c.addEventListener("load",u),c.addEventListener("error",l)})})).then(()=>t())};var et=je({history:Ee(),routes:[{path:"/",name:"home",component:()=>ie(()=>import("./Home.37027f30.js"),[])},{path:"/channel/:channelId",name:"channel",component:()=>ie(()=>import("./Channel.d5bed247.js"),["assets/Channel.d5bed247.js","assets/Channel.d9a8f13c.css","assets/vendor.7d2fdebc.js"])}]}),Ce=new Ue({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",text:"string",ts:"uint",isEdited:"boolean","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","imageUrl?":"string","quoteId?":"uint","channelId?":"string"}]}]}]});ne.init({workerUrl:"/libarchive.js/worker-bundle.js"});const le=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},G=e=>Math.floor(Number(e)*1e3),Ie=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",N=Ne("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:Ie(window.innerWidth)}),actions:{async loadBinary(){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const a=await fetch("/export.bin.zip");if(!a.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const c=(await(await ne.open(new File([await a.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await c.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:e,users:t}=await Ce.decode(this.binaryData);this.channels=e.map(a=>{var n;return ae(W({},a),{rootMessages:(n=a.messages)==null?void 0:n.filter(i=>!i.threadId)})});const s={};t.forEach(a=>{s[a.id]=a}),this.users=s,this.status="Done",this.dataLoaded=!0}catch(e){this.status=`Error: ${e.message}`,console.error(e)}},processUser(e){var t,s,a,n,i,c,u,l;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((a=e.profile)==null?void 0:a.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((i=e.profile)==null?void 0:i.image_512)||((c=e.profile)==null?void 0:c.image_192),image24:(u=e.profile)==null?void 0:u.image_24,image72:(l=e.profile)==null?void 0:l.image_72}},processMessage(e){var t,s,a,n,i,c,u;return{id:G(e.ts),type:e.subtype||e.type||"message",text:((t=e.text)==null?void 0:t.trim())||"",userId:e.user,ts:G(e.ts),isEdited:!!e.edited,threadId:e.parent_user_id?G(e.thread_ts):void 0,replyCount:e.reply_count||((s=e.replies)==null?void 0:s.length),replyUsersCount:e.reply_users_count||((a=e.replies_users)==null?void 0:a.length),latestReply:e.latest_reply?G(e.latest_reply):void 0,replyMessageIds:(n=e.replies)==null?void 0:n.map(l=>G(l.ts)),replyUserIds:e.reply_users,reactions:(i=e.reactions)==null?void 0:i.map(l=>({name:l.name,count:l.count,userIds:l.users})),files:(c=e.files)==null?void 0:c.map(l=>({id:l.id,name:l.name||l.filetype?`${l.id}.${l.filetype}`:"Untitled",mimeType:l.mimetype,src:l.url_private,width:l.original_w,height:l.original_h})).filter(l=>l.src&&l.mimeType&&l.id),attachments:(u=e.attachments)==null?void 0:u.map(l=>({serviceName:l.service_name,serviceIcon:l.service_icon,title:l.title,titleUrl:l.title_link,text:l.text,thumbUrl:l.thumb_url,imageUrl:l.image_url,quoteId:l.ts?G(l.ts):void 0,channelId:l.channel_id})).filter(l=>!!l.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,a;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((a=e.messages)==null?void 0:a.map(n=>this.processMessage(n)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await ne.open(e)).extractFiles();this.status="Processing Channels...";const a=await le(s,"channels.json"),i=(await le(s,"users.json")).map(u=>this.processUser(u)),c=a.filter(u=>!u.is_archived||!this.exportConfig.skipArchivedChannels).map(u=>this.processChannel(u));await c.reduce(async(u,l,v)=>{await u,this.status=`Processing Messages for #${l.name} (${v+1}/${c.length})`;const g=[];await Promise.all(Object.keys(s[l.name]).map(async w=>{const y=await le(s[l.name],w);g.push(...y.filter($=>{var x;return!((x=$.subtype)==null?void 0:x.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map($=>this.processMessage($)))})),l.messages=Ve(g,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await Ce.encode({channels:c,users:i})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const a=await(await ne.open(e)).getFilesObject();if(!a["export.bin"])return!1;const n=await((t=a["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await n.arrayBuffer()),this.exportNeeded=!1,this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await ie(()=>import("./jszip.min.a5510802.js").then(function(c){return c.j}),["assets/jszip.min.a5510802.js","assets/vendor.7d2fdebc.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const a=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download="export.bin.zip",i.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=Ie(this.deviceWidth)}}});K.extend(Pe);K.extend(Ae);const P=B({setup(e){return(t,s)=>(d(),R(o(Fe),ve(t.$attrs,{class:"icon"}),null,16))}});var T=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s};const tt=e=>(z("data-v-72abe67b"),e=e(),H(),e),st={class:"user-avatars"},nt={class:"replies-count"},ot={class:"replies-count-text"},at={class:"replies-info"},rt={class:"last-reply"},it=tt(()=>r("span",{class:"cta"}," View thread ",-1)),lt={class:"chevron"},ct=B({props:{message:null},setup(e){const t=e,s=N(),a=Z(),n=f(()=>{var l;let u=5;return s.deviceType==="sm"&&(u=3),s.deviceType==="xs"&&(u=1),((l=t.message.replyUserIds)==null?void 0:l.map(v=>{const g=s.users[v];return{src:g.image24||g.image72,alt:g.name}}).splice(0,u))||[]}),i=f(()=>K(t.message.latestReply)),c=f(()=>`${a.params.channelId}-${t.message.id}`);return(u,l)=>{const v=P,g=Q("router-link");return d(),R(g,{to:{query:{threadRef:o(c)}},class:"replies-btn"},{default:D(()=>[r("div",st,[(d(!0),p(q,null,X(o(n),(w,y)=>(d(),p("img",ve({key:y},w),null,16))),128))]),r("div",nt,[r("span",ot,b(e.message.replyCount)+" replies ",1)]),r("div",at,[r("span",rt," Last reply "+b(o(i).fromNow()),1),it]),r("div",lt,[m(v,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var ut=T(ct,[["__scopeId","data-v-72abe67b"]]);const ee=new We,Y="google";ee.img_set=Y;ee.img_sets[Y].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${Y}@7.0.2/img/${Y}/64/`;ee.img_sets[Y].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${Y}@7.0.2/img/${Y}/sheets/64.png`;const dt=e=>(z("data-v-73aab79a"),e=e(),H(),e),pt={class:"react-chip"},_t=["innerHTML"],ht={class:"react-count"},mt={class:"react-popper-content"},ft=["src","alt"],vt=dt(()=>r("br",null,null,-1)),gt={class:"names"},yt=A(" reacted with "),bt=B({props:{react:null},setup(e){const t=e,s=N(),a=f(()=>`:${t.react.name}:`),n=f(()=>ee.replace_colons(a.value)),i=f(()=>{var u;return(u=n.value.match(/https?:\/\/[^)]+/))==null?void 0:u[0]}),c=f(()=>{let u=t.react.userIds.map((l,v)=>{const g=s.users[l];let w="";return v!==0&&v===t.react.userIds.length-1&&(w="and "),`${w}${g==null?void 0:g.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(u+=` +${t.react.userIds.length-10} more`),u});return(u,l)=>(d(),R(o(O),{placement:"top",hover:"",arrow:""},{content:D(()=>[r("div",mt,[r("img",{src:o(i),alt:e.react.name},null,8,ft),vt,r("strong",gt,b(o(c)),1),yt,r("strong",null,b(o(a)),1)])]),default:D(()=>[r("div",pt,[r("span",{innerHTML:o(n)},null,8,_t),r("span",ht,b(e.react.count),1)])]),_:1}))}});var $t=T(bt,[["__scopeId","data-v-73aab79a"]]);const xt={class:"file-preview"},wt=["src"],kt=["href"],Ct=["src","alt"],It={key:1,class:"unknown-preview"},Mt={class:"file-name"},Dt=B({props:{file:null,maxWidth:null},setup(e){const t=e,s=f(()=>t.file.mimeType.split("/")[0]),a=f(()=>t.file.src),n=f(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const i=t.maxWidth,c=360,u=t.file.width,l=t.file.height,v=u/l;return{height:`${Math.min(v>1?i/v:c,l)}px`}});return(i,c)=>{const u=P;return d(),p("div",xt,[o(s)==="video"?(d(),p("video",{key:0,src:o(a),controls:"",style:ge(o(n))},null,12,wt)):(d(),p("a",{key:1,href:o(a),target:"_blank"},[o(s)==="image"?(d(),p("img",{key:0,src:o(a),alt:t.file.name,style:ge(o(n))},null,12,Ct)):(d(),p("div",It,[m(u,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),r("div",Mt,b(t.file.name),1)]))],8,kt))])}}});var Lt=T(Dt,[["__scopeId","data-v-fc0cdeb8"]]);const Bt={class:"file-list-header"},Rt={class:"file-list-header-title"},St={class:"file-list-header-actions"},Tt=B({props:{files:null},setup(e){const t=e,s=j(!1),a=j(null),n=f(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(i,c)=>{const u=P,l=Lt;return d(),p("div",{ref_key:"wrapper",ref:a,class:"file-list"},[r("div",Bt,[r("span",Rt,b(o(n)),1),r("span",St,[m(u,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:c[0]||(c[0]=v=>s.value=!s.value)},null,8,["icon"])])]),(d(!0),p(q,null,X(a.value?e.files:[],v=>{var g;return E((d(),R(l,{key:v.id,file:v,"max-width":(g=a.value)==null?void 0:g.offsetWidth},null,8,["file","max-width"])),[[U,!s.value]])}),128))],512)}}});var jt=T(Tt,[["__scopeId","data-v-32e3d2e3"]]);const te=(e,t)=>e.split(t)[0].length,oe={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},se=e=>Object.keys(oe).reduce((t,s)=>t.replaceAll(s,oe[s]),e),Et=e=>Object.keys(oe).reduce((t,s)=>t.replaceAll(oe[s],s),e),J=/(-|\* |•|◦|▪︎)/,Ut=(e,t,s)=>Et(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,a=>{const n=a.split(`
`).filter(Boolean);return n.map((i,c)=>{let u="";const l=n[c-1],v=c===0,g=c===n.length-1;return l&&te(l,J)!==te(i,J)&&(u+="</ul>"),(v||te(l,J)!==te(i,J))&&(u+=`<ul class="formatter-ul" data-indent="${Math.round(te(i,J)/4)}">`),u+=`<li>${i.split(J)[2].trim()}</li>`,g&&(u+="</ul>"),u}).join("")}).replace(/<@(U[\w]+)>/g,(a,n)=>{var u,l;const i=t[n],c=((u=i.profile)==null?void 0:u.display_name)||((l=i.profile)==null?void 0:l.real_name)||i.name;return se(i?`<span class="formatter-mention">@${c}</span>`:a)}).replace(/<!([\w\^]+)>/g,(a,n)=>se(`<span class="formatter-mention">@${n}</span>`)).replace(/<#(C[\w\^\|]+)>/g,(a,n)=>{const i=s.find(c=>n.startsWith(c.id));return se(i?`<a class="formatter-mention" href="#${i.name}">#${i.name}</a>`:a)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(a,n,i,c)=>se(`<a class="formatter-link" href="${n}" target="_blank">${c||n}</a>`)).replace(/(:[^: ]+:)/gm,a=>{const n=ee.replace_colons(a);return n.includes("<span")?se(n):n}).replace(/\*([^\*]+)\*/gm,(a,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(a,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(a,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var ce=(e,t,s)=>e.split("```").map((a,n)=>n%2==0?e.split("`").map((i,c)=>c%2==0?Ut(i,t,s):`<code class="formatter-code inline">${i}</code>`).join(""):`<pre class="formatter-code block"><code>${a}</code></pre>`).join("");const Nt=e=>(z("data-v-a38b263a"),e=e(),H(),e),Vt=["id"],Pt={key:0,class:"message-list-date-wrap"},At=Nt(()=>r("hr",null,null,-1)),Ft={class:"message-list-date"},Wt={class:"message-actions"},qt={class:"message-left"},zt={key:0,class:"message-avatar"},Ht=["src"],Ot={key:1},Yt={class:"message-main"},Gt={key:0,class:"message-header"},Jt={class:"message-author"},Kt={class:"message-timestamp"},Zt=["innerHTML"],Qt={key:3,class:"message-reactions"},Xt=B({props:{message:null,aboveMessage:null,channelId:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean},idRef:null},setup(e){const t=e,s=N(),a=Z();j([]);const n=j("Copy Link"),i=f(()=>{var _;return K((_=t.message)==null?void 0:_.ts)}),c=f(()=>{var k;const _=i.value.format("YYYY-MM-DD"),h=K((k=t.aboveMessage)==null?void 0:k.ts).format("YYYY-MM-DD");return!t.aboveMessage||_!==h}),u=f(()=>{var _;return!c.value&&t.message.userId===((_=t.aboveMessage)==null?void 0:_.userId)}),l=f(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),v=f(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),g=f(()=>{var _,h;return t.hideDateRule&&c.value?(_=i.value)==null?void 0:_.format("Do MMM, YYYY [at] h:mm a"):(h=i.value)==null?void 0:h.format("h:mm a").toUpperCase()}),w=f(()=>`${t.idRef||"message"}-${t.message.id}`),y=f(()=>{const _=`${a.query.threadRef||""}`.split("-")[1];return w.value===`message-${_}`}),$=f(()=>!t.message.threadId),x=()=>{const _=`${window.location.origin}/channel/${t.channelId}?threadRef=${t.channelId}-${t.message.id}`;navigator.clipboard.writeText(_),n.value="Copied!",setTimeout(()=>{n.value="Copy Link"},2e3)};return(_,h)=>{var C,ue,de,pe,_e;const k=P,M=jt,S=$t,F=ut;return((C=e.message)==null?void 0:C.id)?(d(),p("div",{key:0,id:o(w)},[o(c)&&!e.hideDateRule?(d(),p("div",Pt,[At,r("div",Ft,b(o(i).format("MMMM Do, YYYY")),1)])):I("",!0),e.message?(d(),p("div",{key:1,class:V({message:!0,continued:o(u),active:o(y)})},[E(r("div",Wt,[e.message.threadId?I("",!0):(d(),R(o(O),{key:0,show:n.value==="Copied!"||null,placement:"top",hover:"",arrow:""},{content:D(()=>[r("div",{class:V({"copy-link-pop-text":!0,success:n.value==="Copied!"})},b(n.value),3)]),default:D(()=>[r("button",{class:"copy-link-btn",onClick:x},[m(k,{icon:"mdi:link-variant"})])]),_:1},8,["show"]))],512),[[U,o($)]]),r("div",qt,[o(u)?(d(),p("span",Ot,b(o(i).format("h:mm")),1)):(d(),p("div",zt,[r("img",{src:(ue=o(l))==null?void 0:ue.image72,alt:""},null,8,Ht)]))]),r("div",Yt,[o(u)?I("",!0):(d(),p("div",Gt,[r("span",Jt,b((de=o(l))==null?void 0:de.name),1),r("span",Kt,b(o(g)),1)])),e.message.text?(d(),p("div",{key:1,class:V({"message-content":!0,"just-emoji":o(v),"non-message":e.message.type!=="message"}),innerHTML:o(ce)(e.message.text,o(s).users,o(s).channels)},null,10,Zt)):I("",!0),((pe=e.message.files)==null?void 0:pe.length)?(d(),R(M,{key:2,files:e.message.files},null,8,["files"])):I("",!0),((_e=e.message.reactions)==null?void 0:_e.length)?(d(),p("div",Qt,[(d(!0),p(q,null,X(e.message.reactions,he=>(d(),R(S,{key:he.name,react:he},null,8,["react"]))),128))])):I("",!0),e.message.replyCount&&!t.hideReplies?(d(),R(F,{key:4,message:e.message},null,8,["message"])):I("",!0)])],2)):I("",!0)],8,Vt)):I("",!0)}}});var es=T(Xt,[["__scopeId","data-v-a38b263a"]]);const ts={class:"chat-header"},ss={key:0,class:"chat-header-actions"},ns={class:"chat-header-title spacer"},os=["innerHTML"],as=["innerHTML"],rs={key:1,class:"chat-header-actions"},is=B({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,a=N();return(n,i)=>{const c=P,u=Q("router-link");return d(),p("div",ts,[s.showMenuButton?(d(),p("div",ss,[r("button",{class:"btn btn-icon menu-button",onClick:i[0]||(i[0]=l=>o(a).toggleSidebar())},[m(c,{icon:"mdi:menu-open"})])])):I("",!0),r("div",ns,[r("strong",null,b(s.title),1),s.subtitle&&!s.subtitleTo?(d(),R(o(O),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:D(()=>[r("div",{class:"subtitle-popout",innerHTML:o(ce)(s.subtitle,o(a).users,o(a).channels)},null,8,as)]),default:D(()=>[r("span",{innerHTML:o(ce)(s.subtitle,o(a).users,o(a).channels)},null,8,os)]),_:1})):I("",!0),s.subtitle&&s.subtitleTo?(d(),R(u,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:b(s.subtitle)},null,8,["to","textContent"])):I("",!0)]),s.showCloseButton?(d(),p("div",rs,[r("button",{class:"btn btn-icon",onClick:i[1]||(i[1]=l=>t("close"))},[m(c,{icon:"mdi:close"})])])):I("",!0)])}}});var ls=T(is,[["__scopeId","data-v-13add010"]]);const cs=e=>(z("data-v-5b95b998"),e=e(),H(),e),us={class:"thread-list"},ds=cs(()=>r("hr",null,null,-1)),ps={class:"replies-count"},_s=B({setup(e){var w;const t=Z(),s=ye(),a=N(),n=j(`${(w=t.query.threadRef)!=null?w:""}`),i=f(()=>{var y;return`${(y=t.query.threadRef)!=null?y:""}`}),c=f(()=>{var $;const y=n.value.split("-")[0];return($=a.channels)==null?void 0:$.find(x=>x.id===y)}),u=f(()=>{var $,x;const y=Number(n.value.split("-")[1]);return(x=($=c.value)==null?void 0:$.rootMessages)==null?void 0:x.find(_=>_.id===y)}),l=f(()=>{var $,x,_,h;const y=Number(n.value.split("-")[1]);return((x=($=u.value)==null?void 0:$.replyMessageIds)==null?void 0:x.length)?((h=(_=c.value)==null?void 0:_.messages)==null?void 0:h.filter(k=>{var M,S;return k.threadId===y||((S=(M=u.value)==null?void 0:M.replyMessageIds)==null?void 0:S.indexOf(k.id))!==-1}))||[]:[]}),v=()=>{s.push({query:be(t.query,"threadRef")})},g=y=>y>0?l.value[y-1]:ae(W({},u.value),{userId:""});return qe(i,()=>{var y;n.value=`${(y=t.query.threadRef)!=null?y:""}`}),(y,$)=>{var h,k,M;const x=ls,_=es;return d(),p(q,null,[((h=o(c))==null?void 0:h.id)?(d(),R(x,{key:0,title:"Thread",subtitle:`#${(k=o(c))==null?void 0:k.name}`,"subtitle-to":{params:{channelId:o(c).id},query:W({},o(t).query),name:"channel"},"show-close-button":"",onClose:v},null,8,["subtitle","subtitle-to"])):I("",!0),r("div",us,[m(_,{message:o(u),"above-message":null,"channel-id":((M=o(c))==null?void 0:M.id)||"",style:{margin:"16px 0"},"id-ref":"thread","hide-date-rule":"","hide-replies":""},null,8,["message","channel-id"]),ds,r("div",ps,[r("small",null,b(o(l).length)+" Repl"+b(o(l).length===1?"y":"ies"),1)]),(d(!0),p(q,null,X(o(l),(S,F)=>{var C;return d(),R(_,{key:S.id,message:S,"above-message":g(F),"channel-id":(C=o(c))==null?void 0:C.id,class:V({last:F===o(l).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","channel-id","class"])}),128))])],64)}}});var hs=T(_s,[["__scopeId","data-v-5b95b998"]]);const ms={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},fs=["src"],vs=B({setup(e){const t=N(),s=j(!1),a="mrfrase3",n="Support me on Buy me a coffee!",i=f(()=>`https://www.buymeacoffee.com/widget/page/${a}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return ze(()=>{!t.coffeeMenu||(s.value=!0)}),(c,u)=>{const l=P;return d(),R(o(O),{placement:"top",class:"coffee-pop",show:o(t).coffeeMenu},{content:D(()=>[s.value||o(t).coffeeMenu?(d(),p("iframe",{key:0,src:o(i),title:"Buy me a coffee",class:"bmc-iframe"},null,8,fs)):I("",!0)]),default:D(()=>[r("div",{class:"coffee-btn",onClick:u[0]||(u[0]=v=>o(t).coffeeMenu=!o(t).coffeeMenu)},[E(m(l,{icon:"mdi:close"},null,512),[[U,o(t).coffeeMenu]]),E(r("img",ms,null,512),[[U,!o(t).coffeeMenu]])])]),_:1},8,["show"])}}});var gs=T(vs,[["__scopeId","data-v-5dfad6fe"]]);const ys=e=>(z("data-v-6cf7f162"),e=e(),H(),e),bs={class:"sidebar-footer"},$s=ys(()=>r("div",{class:"spacer"},null,-1)),xs={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},ws=B({setup(e){const t=N(),s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(a,n)=>{const i=P,c=gs;return d(),p("div",bs,[(o(t).binarySource,d(),R(o(O),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:D(()=>[m(i,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=u=>o(t).downloadBinary())})]),_:1})),m(o(O),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:D(()=>[m(i,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),$s,m(o(O),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:D(()=>[r("a",xs,[m(i,{class:"action-icon",icon:"mdi:github"})])]),_:1}),m(c)])}}});var ks=T(ws,[["__scopeId","data-v-6cf7f162"]]);const Me=e=>(z("data-v-288df464"),e=e(),H(),e),Cs={class:"channel-list"},Is=Me(()=>r("div",{class:"title"}," Channels ",-1)),Ms=Me(()=>r("span",{style:{"padding-right":"8px"}},"#",-1)),Ds=B({setup(e){const t=N(),s=Z(),a=n=>s.params.channelId===n.id;return(n,i)=>{const c=Q("router-link");return d(),p("div",Cs,[Is,r("ul",null,[(d(!0),p(q,null,X(o(t).channels,u=>(d(),p("li",{key:u.id},[m(c,{to:{params:{channelId:u.id},query:W({},o(s).query),name:"channel"},class:V({link:!0,active:a(u)})},{default:D(()=>[Ms,A(" "+b(u.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var Ls=T(Ds,[["__scopeId","data-v-288df464"]]);const Bs={class:"checkbox-text"},Rs={class:"checkbox-label"},Ss={class:"checkbox-hint"},Ts=B({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=()=>{t("update:modelValue",!s.modelValue)};return(n,i)=>{const c=P;return d(),p("div",{class:"checkbox-wrap",onClick:a},[m(c,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),r("div",Bs,[r("div",Rs,[$e(n.$slots,"label",{},()=>[A(b(s.label),1)],!0)]),r("div",Ss,[$e(n.$slots,"hint",{},()=>[A(b(s.hint),1)],!0)])])])}}});var js=T(Ts,[["__scopeId","data-v-690ba907"]]),Es="/assets/loading.7cbe3464.svg",De="/slax.svg";const L=e=>(z("data-v-f73075ca"),e=e(),H(),e),Us={class:"loading-splash moving-gradient"},Ns=L(()=>r("img",{alt:"Loading",src:Es},null,-1)),Vs=L(()=>r("br",null,null,-1)),Ps=L(()=>r("br",null,null,-1)),As=L(()=>r("br",null,null,-1)),Fs=L(()=>r("div",{class:"header"},[r("h1",null,[r("img",{src:De,alt:"",style:{height:"1em","margin-right":"8px"}}),A(" Slax Pro ")]),r("p",null,[A("A "),r("i",null,"Free & Professional"),A(" viewer for slack-like export content.")])],-1)),Ws=["onDrop","onDragover"],qs={key:0},zs=L(()=>r("strong",null,"Drop .zip file here",-1)),Hs=L(()=>r("br",null,null,-1)),Os=L(()=>r("small",null,"or click to select",-1)),Ys=[zs,Hs,Os],Gs={key:1},Js=L(()=>r("strong",null,"Kobe!",-1)),Ks=[Js],Zs={key:2},Qs=L(()=>r("strong",null,"File must be a .zip",-1)),Xs=L(()=>r("br",null,null,-1)),en=L(()=>r("small",null,"Please try again",-1)),tn=[Qs,Xs,en],sn={class:"config"},nn=L(()=>r("h2",null,"Export Preferences",-1)),on={class:"actions"},an=L(()=>r("div",{class:"spacer"},null,-1)),rn=L(()=>r("span",null,"Process",-1)),ln=B({setup(e){const t=N(),s=j(null),a=j(!1),n=j(!1),i=j(!1),c=j(!1),u=f(()=>i.value?"mdi:alert-outline":a.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),l=f(()=>i.value?!0:!(!a.value||n.value)),v=f(()=>l.value?"error":a.value?"success":""),g=_=>_?Array.from(_):[],w=_=>{var h;i.value=!1,a.value=!0,n.value=!!((h=_.dataTransfer)==null?void 0:h.types.includes("Files"))},y=()=>{i.value=!1,a.value=!1,n.value=!1},$=async _=>{var k,M;_.preventDefault();const h=(k=_.dataTransfer)!=null?k:_.target;s.value=(M=g(h.files).find(S=>S.type==="application/zip"))!=null?M:null,y(),i.value=!s.value,s.value&&(c.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),c.value=!1)},x=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)};return xe(()=>{t.loadBinary()}),(_,h)=>{var S,F;const k=P,M=js;return E((d(),p("div",Us,[E(r("div",null,[Ns,Vs,Ps,r("strong",null,b(o(t).status),1),As,o(t).status.startsWith("Error:")?(d(),p("button",{key:0,onClick:h[0]||(h[0]=C=>o(t).exportNeeded=!0)}," Back ")):I("",!0)],512),[[U,!o(t).exportNeeded||c.value]]),E(r("div",null,[E((d(),p("input",{key:(S=s.value)==null?void 0:S.name,ref:"fileInput",type:"file",accept:".zip",onChange:$},null,32)),[[U,!1]]),Fs,E(r("div",{class:V(`drop-area ${o(v)}`),onDrop:we($,["prevent"]),onDragenter:w,onDragover:we(w,["prevent"]),onDragleave:y,onClick:h[1]||(h[1]=C=>_.$refs.fileInput.click())},[m(k,{class:"zip-icon",icon:o(u)},null,8,["icon"]),!o(l)&&!a.value?(d(),p("div",qs,Ys)):o(l)?(d(),p("div",Zs,tn)):(d(),p("div",Gs,Ks))],42,Ws),[[U,!s.value]]),E(r("div",sn,[nn,r("span",null,[m(k,{icon:"mdi:folder-zip-outline"}),r("strong",null,b((F=s.value)==null?void 0:F.name),1)]),m(M,{modelValue:o(t).exportConfig.preferDisplayName,"onUpdate:modelValue":h[2]||(h[2]=C=>o(t).exportConfig.preferDisplayName=C),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),m(M,{modelValue:o(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":h[3]||(h[3]=C=>o(t).exportConfig.hideChannelMessages=C),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),m(M,{modelValue:o(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":h[4]||(h[4]=C=>o(t).exportConfig.skipArchivedChannels=C),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),m(M,{modelValue:o(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":h[5]||(h[5]=C=>o(t).exportConfig.removeLinkPreviews=C),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),r("div",on,[r("button",{class:"btn btn-text",onClick:h[6]||(h[6]=C=>s.value=null)}," Back "),an,r("button",{class:"btn",onClick:x},[m(k,{icon:"mdi:cog"}),rn])])],512),[[U,s.value]])],512),[[U,o(t).exportNeeded&&!c.value]])],512)),[[U,!o(t).dataLoaded]])}}});var cn=T(ln,[["__scopeId","data-v-f73075ca"]]);const un=r("h1",null,[r("img",{src:De,alt:"",style:{height:"1em","margin-right":"8px"}}),A(" Slax Pro ")],-1),dn=B({setup(e){const t=N(),s=Z(),a=ye(),n=f(()=>{var u;return(u=s.query)==null?void 0:u.threadRef}),i=()=>{t.leftSidebar=!1,a.push({query:W({},be(s.query,["threadRef"]))})},c=He(()=>t.onWidthChange(),100);return xe(()=>window.addEventListener("resize",c)),Oe(()=>window.removeEventListener("resize",c)),(u,l)=>{const v=cn,g=Q("router-link"),w=Ls,y=ks,$=hs,x=Q("router-view");return d(),p(q,null,[m(v),r("div",{class:V({sidebar:!0,closed:!o(t).leftSidebar})},[m(g,{class:"no-link",to:{name:"home",params:{},query:W({},o(s).query)}},{default:D(()=>[un]),_:1},8,["to"]),m(w),m(y)],2),r("div",{class:V({"thread-sidebar":!0,closed:!o(n)})},[m($)],2),m(Ye,{name:"fade"},{default:D(()=>[E(r("div",{class:"sidebar-overlay",onClick:l[0]||(l[0]=_=>i())},null,512),[[U,o(t).leftSidebar||o(n)]])]),_:1}),r("div",{class:V({main:!0,"offset-right":!!o(n)})},[m(x)],2)],64)}}});window.Buffer=Ge.Buffer;Je(dn).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,re.bind(e,t,s)},updated:re.update,unmounted:re.unbind}).use(Ke()).use(et).mount("#app");export{ls as C,T as _,P as a,es as b,N as u};
