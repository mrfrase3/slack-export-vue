var je=Object.defineProperty,Ae=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var ke=(e,t,s)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,O=(e,t)=>{for(var s in t||(t={}))Pe.call(t,s)&&ke(e,s,t[s]);if(we)for(var s of we(t))Ve.call(t,s)&&ke(e,s,t[s]);return e},ee=(e,t)=>Ae(e,Oe(t));import{c as Fe,a as We,T as ze,A as ie,d as qe,f as Ye,s as te,b as Q,e as Je,R as Ke,g as L,o as p,h as S,m as Ie,u as l,I as Ge,i as se,j as x,r as ne,w as E,k as c,l as m,n as J,F as P,t as C,p as v,q as z,v as q,E as Qe,x as Y,y as W,z as ae,B as le,C as I,D as H,G as N,H as U,J as j,K as pe,L as ce,M as Ce,N as Ze,O as Xe,P as et,Q as tt,V as st,S as nt,U as at,W as ot,X as rt,Y as it,Z as lt,_ as Me,$ as ct,a0 as ut,a1 as Le,a2 as Se,a3 as dt,a4 as pt,a5 as ht,a6 as _t,a7 as mt,a8 as he,a9 as ft}from"./vendor.ce23a725.js";const gt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};gt();const vt="modulepreload",Be={},yt="/",ue=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${yt}${r}`,r in Be)return;Be[r]=!0;const n=r.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":vt,n||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),n)return new Promise((i,u)=>{a.addEventListener("load",i),a.addEventListener("error",u)})})).then(()=>t())};var $t=Fe({history:We(),routes:[{path:"/",name:"home",component:()=>ue(()=>import("./Home.37027f30.js"),[])},{path:"/search",name:"search",component:()=>ue(()=>import("./Search.3faa0a35.js"),["assets/Search.3faa0a35.js","assets/Search.2f23ca79.css","assets/vendor.ce23a725.js"])},{path:"/channel/:channelId",name:"channel",component:()=>ue(()=>import("./Channel.277b9ea1.js"),["assets/Channel.277b9ea1.js","assets/Channel.ff76015b.css","assets/vendor.ce23a725.js"])}]}),Ee=new ze({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",channelId:"string",text:"string",ts:"uint",tags:["string"],isEdited:"boolean","editedAt?":"uint","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","imageUrl?":"string","quoteId?":"uint","channelId?":"string"}]}]}]});ie.init({workerUrl:"/libarchive.js/worker-bundle.js"});const _e=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},K=e=>Math.floor(Number(e)*1e3),Re=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",R=qe("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],messagesById:{},exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:Re(window.innerWidth),activeSearch:{type:"oneLine",content:[{type:"paragraph"}]},lastMentionQuery:"",messageIndex:new Ye.exports.Document({document:{id:"id",tag:"tag",index:"content"},worker:!0,charset:"latin:advanced"})}),actions:{async loadBinary(){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const o=await fetch("/export.bin.zip");if(!o.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const u=(await(await ie.open(new File([await o.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await u.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:e,users:t}=await Ee.decode(this.binaryData);this.channels=e.map(o=>{var a;return ee(O({},o),{rootMessages:(a=o.messages)==null?void 0:a.filter(i=>!i.threadId)})});const s={};t.forEach(o=>{s[o.id]=o}),this.users=s,this.status="Indexing...";const r=[],n={};e.forEach(o=>{o.messages.forEach(a=>{a.type.startsWith("bot")||!a.userId||(r.push({id:`${a.channelId}-${a.id}`,tag:a.tags,content:a.text.replace(/(<[^>]+>)|\*|_|•|◦|▪︎/g,"")}),n[`${a.channelId}-${a.id}`]=a)})}),te(r,o=>Number(o.id.split("-")[1])*-1).forEach(o=>this.messageIndex.add(o)),this.messagesById=n,this.status="Done",this.dataLoaded=!0}catch(e){this.status=`Error: ${e.message}`,console.error(e)}},processUser(e){var t,s,r,n,o,a,i,u;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((r=e.profile)==null?void 0:r.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((o=e.profile)==null?void 0:o.image_512)||((a=e.profile)==null?void 0:a.image_192),image24:(i=e.profile)==null?void 0:i.image_24,image72:(u=e.profile)==null?void 0:u.image_72}},processMessage(e,t){var n,o,a,i,u,_,h,g,f;const s=[],r=e.subtype||e.type||"message";return!(r==null?void 0:r.startsWith("bot"))&&e.user&&(s.push(`in:${t.id}`),e.user&&s.push(`from:${e.user}`),(n=e.text.match(/<@(U[\w]+)>/g))==null||n.forEach(d=>{const y=d.replace(/<@(U[\w]+)>/,"$1");s.push(`mentions:${y}`)})),{id:K(e.ts),type:r,text:((o=e.text)==null?void 0:o.trim())||"",userId:e.user,channelId:t.id,ts:K(e.ts),tags:s,isEdited:!!e.edited,editedAt:((a=e.edited)==null?void 0:a.ts)?K(e.edited.ts):void 0,threadId:e.parent_user_id?K(e.thread_ts):void 0,replyCount:e.reply_count||((i=e.replies)==null?void 0:i.length),replyUsersCount:e.reply_users_count||((u=e.replies_users)==null?void 0:u.length),latestReply:e.latest_reply?K(e.latest_reply):void 0,replyMessageIds:(_=e.replies)==null?void 0:_.map(d=>K(d.ts)),replyUserIds:e.reply_users,reactions:(h=e.reactions)==null?void 0:h.map(d=>({name:d.name,count:d.count,userIds:d.users})),files:(g=e.files)==null?void 0:g.map(d=>({id:d.id,name:d.name||d.filetype?`${d.id}.${d.filetype}`:"Untitled",mimeType:d.mimetype,src:d.url_private,width:d.original_w,height:d.original_h})).filter(d=>d.src&&d.mimeType&&d.id),attachments:(f=e.attachments)==null?void 0:f.map(d=>({serviceName:d.service_name,serviceIcon:d.service_icon,title:d.title,titleUrl:d.title_link,text:d.text,thumbUrl:d.thumb_url,imageUrl:d.image_url,quoteId:d.ts?K(d.ts):void 0,channelId:d.channel_id})).filter(d=>!!d.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,r;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((r=e.messages)==null?void 0:r.map(n=>this.processMessage(n,e)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await ie.open(e)).extractFiles();this.status="Processing Channels...";const r=await _e(s,"channels.json"),o=(await _e(s,"users.json")).map(i=>this.processUser(i)),a=r.filter(i=>!i.is_archived||!this.exportConfig.skipArchivedChannels).map(i=>this.processChannel(i));await a.reduce(async(i,u,_)=>{await i,this.status=`Processing Messages for #${u.name} (${_+1}/${a.length})`;const h=[];await Promise.all(Object.keys(s[u.name]).map(async g=>{const f=await _e(s[u.name],g);h.push(...f.filter(d=>{var y;return!((y=d.subtype)==null?void 0:y.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(d=>this.processMessage(d,u)))})),u.messages=te(h,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await Ee.encode({channels:a,users:o})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const r=await(await ie.open(e)).getFilesObject();if(!r["export.bin"])return!1;const n=await((t=r["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await n.arrayBuffer()),this.exportNeeded=!1,this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await ue(()=>import("./jszip.min.e8c3367b.js").then(function(a){return a.j}),["assets/jszip.min.e8c3367b.js","assets/vendor.ce23a725.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const r=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download="export.bin.zip",o.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=Re(this.deviceWidth)},searchUsers(e){return this.lastMentionQuery=e,te(Object.values(this.users).filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},searchChannels(e){return this.lastMentionQuery=e,te(this.channels.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},async searchMessages(e,t=50,s=0){var u,_;let r="";const n=[];typeof e=="string"?((u=e.match(/((mentions)|(from)|(in)):\w+/g))==null||u.forEach(h=>{n.push(h)}),r=e.replace(/((mentions)|(from)|(in)):\w+/g,"")):e.forEach(h=>{var g,f;h.type==="text"?r+=h.text:h.type==="mention"&&((g=h.attrs)==null?void 0:g.id)&&n.push((f=h.attrs)==null?void 0:f.id)}),r=r.replace(/(\s{2,})|\+/g," ").trim()||"";let o="and";if(n.filter(h=>h.startsWith("from:")).length>1&&(o="or"),n.filter(h=>h.startsWith("in:")).length>1&&(o="or"),!r&&!n.length)return[];if(!r){const h=[];return Object.values(this.messagesById).forEach(g=>{n[o==="and"?"every":"some"](f=>g.tags.includes(f))&&h.push(g)}),te(h,g=>g.ts*-1).slice(s,s+t)}return(((_=(await this.messageIndex.searchAsync(O({query:r,limit:t,offset:s},n.length?{index:"content",tag:n,bool:o}:{})))[0])==null?void 0:_.result)||[]).map(h=>this.messagesById[h])}}});Q.extend(Je);Q.extend(Ke);const A=L({setup(e){return(t,s)=>(p(),S(l(Ge),Ie(t.$attrs,{class:"icon"}),null,16))}});var B=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s};const bt=e=>(z("data-v-72abe67b"),e=e(),q(),e),xt={class:"user-avatars"},wt={class:"replies-count"},kt={class:"replies-count-text"},It={class:"replies-info"},Ct={class:"last-reply"},Mt=bt(()=>c("span",{class:"cta"}," View thread ",-1)),Lt={class:"chevron"},St=L({props:{message:null},setup(e){const t=e,s=R(),r=se(),n=x(()=>{var u;let i=5;return s.deviceType==="sm"&&(i=3),s.deviceType==="xs"&&(i=1),((u=t.message.replyUserIds)==null?void 0:u.map(_=>{const h=s.users[_];return{src:h.image24||h.image72,alt:h.name}}).splice(0,i))||[]}),o=x(()=>Q(t.message.latestReply)),a=x(()=>`${r.params.channelId}-${t.message.id}`);return(i,u)=>{const _=A,h=ne("router-link");return p(),S(h,{to:{query:{threadRef:l(a)}},class:"replies-btn"},{default:E(()=>[c("div",xt,[(p(!0),m(P,null,J(l(n),(g,f)=>(p(),m("img",Ie({key:f},g),null,16))),128))]),c("div",wt,[c("span",kt,C(e.message.replyCount)+" replies ",1)]),c("div",It,[c("span",Ct," Last reply "+C(l(o).fromNow()),1),Mt]),c("div",Lt,[v(_,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var Bt=B(St,[["__scopeId","data-v-72abe67b"]]);const oe=new Qe,G="google";oe.img_set=G;oe.img_sets[G].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${G}@7.0.2/img/${G}/64/`;oe.img_sets[G].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${G}@7.0.2/img/${G}/sheets/64.png`;const Et=e=>(z("data-v-73aab79a"),e=e(),q(),e),Rt={class:"react-chip"},Dt=["innerHTML"],Tt={class:"react-count"},Ht={class:"react-popper-content"},Nt=["src","alt"],Ut=Et(()=>c("br",null,null,-1)),jt={class:"names"},At=W(" reacted with "),Ot=L({props:{react:null},setup(e){const t=e,s=R(),r=x(()=>`:${t.react.name}:`),n=x(()=>oe.replace_colons(r.value)),o=x(()=>{var i;return(i=n.value.match(/https?:\/\/[^)]+/))==null?void 0:i[0]}),a=x(()=>{let i=t.react.userIds.map((u,_)=>{const h=s.users[u];let g="";return _!==0&&_===t.react.userIds.length-1&&(g="and "),`${g}${h==null?void 0:h.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(i+=` +${t.react.userIds.length-10} more`),i});return(i,u)=>(p(),S(l(Y),{placement:"top",hover:"",arrow:""},{content:E(()=>[c("div",Ht,[c("img",{src:l(o),alt:e.react.name},null,8,Nt),Ut,c("strong",jt,C(l(a)),1),At,c("strong",null,C(l(r)),1)])]),default:E(()=>[c("div",Rt,[c("span",{innerHTML:l(n)},null,8,Dt),c("span",Tt,C(e.react.count),1)])]),_:1}))}});var Pt=B(Ot,[["__scopeId","data-v-73aab79a"]]);const Vt=["src"],Ft=["href"],Wt=["src","alt"],zt={key:0,class:"file-name"},qt=L({props:{file:null,maxWidth:null,maxHeight:null},setup(e){const t=e,s=x(()=>t.file.mimeType.split("/")[0]),r=x(()=>t.file.src),n=x(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const o=t.maxWidth,a=t.maxHeight||360,i=t.file.width,u=t.file.height,_=i/u;return{height:`${Math.min(_>1?o/_:a,u)}px`}});return(o,a)=>{const i=A;return p(),m("div",{class:"file-preview",style:ae(e.maxHeight?{maxHeight:`${e.maxHeight}px`}:{})},[l(s)==="video"?(p(),m("video",{key:0,src:l(r),controls:"",style:ae(l(n))},null,12,Vt)):(p(),m("a",{key:1,href:l(r),target:"_blank",onClick:a[0]||(a[0]=le(()=>{},["stop"]))},[l(s)==="image"?(p(),m("img",{key:0,src:l(r),alt:t.file.name,style:ae(l(n))},null,12,Wt)):(p(),m("div",{key:1,style:ae(e.maxHeight?{height:`${e.maxHeight}px`,width:`${e.maxHeight}px`}:{}),class:"unknown-preview"},[v(i,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),!e.maxHeight||e.maxHeight>150?(p(),m("div",zt,C(t.file.name),1)):I("",!0)],4))],8,Ft))],4)}}});var Yt=B(qt,[["__scopeId","data-v-5c3a5f50"]]);const Jt={class:"file-list-header"},Kt={class:"file-list-header-title"},Gt={class:"file-list-header-actions"},Qt=L({props:{files:null,maxHeight:null},setup(e){const t=e,s=H(!1),r=H(null),n=x(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(o,a)=>{const i=A,u=Yt;return p(),m("div",{ref_key:"wrapper",ref:r,class:"file-list"},[c("div",Jt,[c("span",Kt,C(l(n)),1),c("span",Gt,[v(i,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:a[0]||(a[0]=_=>s.value=!s.value)},null,8,["icon"])])]),(p(!0),m(P,null,J(r.value?e.files:[],_=>{var h;return N((p(),S(u,{key:_.id,file:_,"max-width":(h=r.value)==null?void 0:h.offsetWidth,"max-height":e.maxHeight},null,8,["file","max-width","max-height"])),[[U,!s.value]])}),128))],512)}}});var Zt=B(Qt,[["__scopeId","data-v-4d4e549c"]]);const V=(e,t)=>e.split(t)[0].length,de={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},re=e=>Object.keys(de).reduce((t,s)=>t.replaceAll(s,de[s]),e),Xt=e=>Object.keys(de).reduce((t,s)=>t.replaceAll(de[s],s),e),Z=/(-|\* |•|◦|▪︎)/,X=/(\d+\.)/,es=(e,t,s)=>Xt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,r=>{const n=r.split(`
`).filter(Boolean);return n.map((o,a)=>{let i="";const u=n[a-1],_=a===0,h=a===n.length-1;return u&&V(u,Z)!==V(o,Z)&&(i+="</ul>"),(_||V(u,Z)!==V(o,Z))&&(i+=`<ul class="formatter-ul" data-indent="${Math.round(V(o,Z)/4)}">`),i+=`<li>${o.split(Z)[2].trim()}</li>`,h&&(i+="</ul>"),i}).join("")}).replace(/((\n|^)\s*(\d+\.)[^\n]+)+/g,r=>{const n=r.split(`
`).filter(Boolean);return n.map((o,a)=>{var g,f;let i="";const u=n[a-1],_=a===0,h=a===n.length-1;return u&&V(u,X)!==V(o,X)&&(i+="</ul>"),(_||V(u,X)!==V(o,X))&&(i+=`<ul class="formatter-ol" data-indent="${Math.round(V(o,X)/4)}">`),i+=`<li data-num="${(f=(g=`${o}`.match(/(\d+\.)/))==null?void 0:g[0])!=null?f:`${a+1}.`}">${o.split(X)[2].trim()}</li>`,h&&(i+="</ul>"),i}).join("")}).replace(/((\n|^)(>)[^\n]+)+\n?/g,r=>`<blockquote class="formatter-bq">${r.replace(/(\n|^)(>)/g,`
`).trim()}</blockquote>`).replace(/<@(U[\w]+)\|?([^>]+)?>/g,(r,n,o)=>{var u,_;const a=t[n],i=((u=a.profile)==null?void 0:u.display_name)||((_=a.profile)==null?void 0:_.real_name)||a.name;return re(a?`<span class="formatter-mention">@${o||i}</span>`:r)}).replace(/<!([\w\^]+\|?([^>]+)?)>/g,(r,n,o)=>re(`<span class="formatter-mention">@${o||n}</span>`)).replace(/<#(C[\w\^]+)\|?([^>]+)?>/g,(r,n,o)=>{const a=s.find(i=>n.startsWith(i.id));return re(a?`<a class="formatter-mention" href="/channel/${a.id}">#${o||a.name}</a>`:r)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(r,n,o,a)=>re(`<a class="formatter-link" href="${n}" target="_blank">${a||n}</a>`)).replace(/(:[^: ]+:)/gm,r=>{const n=oe.replace_colons(r);return n.includes("<span")?re(n):n}).replace(/\*([^\*]+)\*/gm,(r,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(r,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(r,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var me=(e,t,s)=>e.split("```").map((r,n)=>{if(n%2==0){const o=[],a=r.replace(/(`[^`]+`)/g,u=>(o.push(`<code class="formatter-code inline">${u.replace(/(^`)|(`$)/g,"")}</code>`),`---inline-code-${o.length-1}---`)),i=es(a,t,s);return o.reduce((u,_,h)=>u.replace(`---inline-code-${h}---`,_),i)}return`<pre class="formatter-code block"><code>${r}</code></pre>`}).join("");const De=e=>(z("data-v-32450637"),e=e(),q(),e),ts=["id"],ss={key:0,class:"message-list-date-wrap"},ns=De(()=>c("hr",null,null,-1)),as={class:"message-list-date"},os={class:"message-actions"},rs={class:"message-left"},is={key:0,class:"message-avatar"},ls=["src"],cs={key:1},us={class:"message-main"},ds={key:0,class:"message-header"},ps={class:"message-author"},hs={class:"message-timestamp"},_s=["innerHTML"],ms=De(()=>c("span",{class:"message-edited"},"\xA0(editied)\xA0",-1)),fs={key:3,class:"message-reactions"},gs=L({props:{message:null,aboveMessage:null,channelId:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean},smallReplies:{type:Boolean},nameDateFormat:null,idRef:null,fileMaxHeight:null},setup(e){const t=e,s=R(),r=se();H([]);const n=H("Copy Link"),o=x(()=>{var b;return Q((b=t.message)==null?void 0:b.ts)}),a=x(()=>{var M;const b=o.value.format("YYYY-MM-DD"),k=Q((M=t.aboveMessage)==null?void 0:M.ts).format("YYYY-MM-DD");return!t.aboveMessage||b!==k}),i=x(()=>{var b;return!a.value&&t.message.userId===((b=t.aboveMessage)==null?void 0:b.userId)}),u=x(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),_=x(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),h=x(()=>{var b,k;return t.hideDateRule&&a.value?(b=o.value)==null?void 0:b.format(t.nameDateFormat||"Do MMM, YYYY [at] h:mm a"):(k=o.value)==null?void 0:k.format("h:mm a").toUpperCase()}),g=x(()=>`${t.idRef||"message"}-${t.message.id}`),f=x(()=>{var M;const b=r.query.threadRef||"",k=s.messagesById[b];return(k==null?void 0:k.threadId)?(M=s.messagesById[`${t.channelId}-${k.threadId}`])==null?void 0:M.id:k==null?void 0:k.id}),d=x(()=>{const b=`${r.query.threadRef||""}`.split("-")[1];return g.value===`message-${b}`||g.value===`message-${f.value}`}),y=x(()=>!t.message.threadId),w=x(()=>Q(t.message.editedAt||0).format("MMM Do, YYYY [at] h:mm a")),$=()=>{const b=`${window.location.origin}/channel/${t.channelId}?threadRef=${t.channelId}-${t.message.id}`;navigator.clipboard.writeText(b),n.value="Copied!",setTimeout(()=>{n.value="Copy Link"},2e3)};return(b,k)=>{var fe,ge,ve,ye,$e,be;const M=A,F=Zt,D=Pt,Ue=Bt;return((fe=e.message)==null?void 0:fe.id)?(p(),m("div",{key:0,id:l(g)},[l(a)&&!e.hideDateRule?(p(),m("div",ss,[ns,c("div",as,C(l(o).format("MMMM Do, YYYY")),1)])):I("",!0),e.message?(p(),m("div",{key:1,class:j({message:!0,continued:l(i),active:l(d)})},[N(c("div",os,[e.message.threadId?I("",!0):(p(),S(l(Y),{key:0,show:n.value==="Copied!"||null,placement:"top",hover:"",arrow:""},{content:E(()=>[c("div",{class:j({"copy-link-pop-text":!0,success:n.value==="Copied!"})},C(n.value),3)]),default:E(()=>[c("button",{class:"copy-link-btn",onClick:$},[v(M,{icon:"mdi:link-variant"})])]),_:1},8,["show"])),I("",!0)],512),[[U,l(y)]]),c("div",rs,[l(i)?(p(),m("span",cs,C(l(o).format("h:mm")),1)):(p(),m("div",is,[c("img",{src:(ge=l(u))==null?void 0:ge.image72,alt:""},null,8,ls)]))]),c("div",us,[l(i)?I("",!0):(p(),m("div",ds,[c("span",ps,C((ve=l(u))==null?void 0:ve.name),1),c("span",hs,C(l(h)),1)])),e.message.text?(p(),m("div",{key:1,class:j({"message-content":!0,"just-emoji":l(_),"non-message":e.message.type!=="message"})},[c("div",{style:{display:"inline"},innerHTML:l(me)(e.message.text,l(s).users,l(s).channels)},null,8,_s),e.message.isEdited?(p(),S(l(Y),{key:0,content:l(w),placement:"top",arrow:"",hover:""},{default:E(()=>[ms]),_:1},8,["content"])):I("",!0)],2)):I("",!0),((ye=e.message.files)==null?void 0:ye.length)?(p(),S(F,{key:2,files:e.message.files,"max-height":e.fileMaxHeight},null,8,["files","max-height"])):I("",!0),(($e=e.message.reactions)==null?void 0:$e.length)||e.message.replyCount&&e.smallReplies?(p(),m("div",fs,[(p(!0),m(P,null,J(e.message.reactions,xe=>(p(),S(D,{key:xe.name,react:xe},null,8,["react"]))),128)),e.message.replyCount&&e.smallReplies?(p(),m("div",{key:0,style:ae({marginLeft:((be=e.message.reactions)==null?void 0:be.length)?"16px":"0"}),class:"small-replies"},[v(M,{icon:"mdi:message-reply-text-outline"}),c("span",null,C(e.message.replyCount)+" "+C(e.message.replyCount===1?"reply":"replies"),1)],4)):I("",!0)])):I("",!0),e.message.replyCount&&!t.hideReplies&&!t.smallReplies?(p(),S(Ue,{key:4,message:e.message},null,8,["message"])):I("",!0)])],2)):I("",!0)],8,ts)):I("",!0)}}});var vs=B(gs,[["__scopeId","data-v-32450637"]]);const ys={class:"chat-header"},$s={key:0,class:"chat-header-actions"},bs={class:"chat-header-title spacer"},xs=["innerHTML"],ws=["innerHTML"],ks={key:1,class:"chat-header-actions"},Is=L({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,r=R();return(n,o)=>{const a=A,i=ne("router-link");return p(),m("div",ys,[s.showMenuButton?(p(),m("div",$s,[c("button",{class:"btn btn-icon menu-button",onClick:o[0]||(o[0]=u=>l(r).toggleSidebar())},[v(a,{icon:"mdi:menu-open"})])])):I("",!0),c("div",bs,[c("strong",null,C(s.title),1),s.subtitle&&!s.subtitleTo?(p(),S(l(Y),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:E(()=>[c("div",{class:"subtitle-popout",innerHTML:l(me)(s.subtitle,l(r).users,l(r).channels)},null,8,ws)]),default:E(()=>[c("span",{innerHTML:l(me)(s.subtitle,l(r).users,l(r).channels)},null,8,xs)]),_:1})):I("",!0),s.subtitle&&s.subtitleTo?(p(),S(i,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:C(s.subtitle)},null,8,["to","textContent"])):I("",!0)]),s.showCloseButton?(p(),m("div",ks,[c("button",{class:"btn btn-icon",onClick:o[1]||(o[1]=u=>t("close"))},[v(a,{icon:"mdi:close"})])])):I("",!0)])}}});var Cs=B(Is,[["__scopeId","data-v-13add010"]]);const Ms=e=>(z("data-v-1a67ebd7"),e=e(),q(),e),Ls={class:"thread-list"},Ss=Ms(()=>c("hr",null,null,-1)),Bs={class:"replies-count"},Es=L({setup(e){var g;const t=se(),s=pe(),r=R(),n=H(`${(g=t.query.threadRef)!=null?g:""}`),o=x(()=>{var f;return`${(f=t.query.threadRef)!=null?f:""}`}),a=x(()=>{var d;const f=n.value.split("-")[0];return(d=r.channels)==null?void 0:d.find(y=>y.id===f)}),i=x(()=>{const f=r.messagesById[n.value];return(f==null?void 0:f.threadId)?r.messagesById[`${a.value.id}-${f.threadId}`]:f}),u=x(()=>{var d,y,w,$;const f=Number(n.value.split("-")[1]);return((y=(d=i.value)==null?void 0:d.replyMessageIds)==null?void 0:y.length)?(($=(w=a.value)==null?void 0:w.messages)==null?void 0:$.filter(b=>{var k,M;return b.threadId===f||((M=(k=i.value)==null?void 0:k.replyMessageIds)==null?void 0:M.indexOf(b.id))!==-1}))||[]:[]}),_=()=>{s.push({query:Ce(t.query,"threadRef")})},h=f=>f>0?u.value[f-1]:ee(O({},i.value),{userId:""});return ce(o,()=>{var f;n.value=`${(f=t.query.threadRef)!=null?f:""}`}),(f,d)=>{var $,b,k;const y=Cs,w=vs;return p(),m(P,null,[(($=l(a))==null?void 0:$.id)?(p(),S(y,{key:0,title:"Thread",subtitle:`#${(b=l(a))==null?void 0:b.name}`,"subtitle-to":{params:{channelId:l(a).id},query:O({},l(t).query),name:"channel"},"show-close-button":"",onClose:_},null,8,["subtitle","subtitle-to"])):I("",!0),c("div",Ls,[v(w,{message:l(i),"above-message":null,"channel-id":((k=l(a))==null?void 0:k.id)||"",style:{margin:"16px 0"},"id-ref":"thread","hide-date-rule":"","hide-replies":""},null,8,["message","channel-id"]),Ss,c("div",Bs,[c("small",null,C(l(u).length)+" Repl"+C(l(u).length===1?"y":"ies"),1)]),(p(!0),m(P,null,J(l(u),(M,F)=>{var D;return p(),S(w,{key:M.id,message:M,"above-message":h(F),"channel-id":(D=l(a))==null?void 0:D.id,class:j({last:F===l(u).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","channel-id","class"])}),128))])],64)}}});var Rs=B(Es,[["__scopeId","data-v-1a67ebd7"]]);const Ds={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},Ts=["src"],Hs=L({setup(e){const t=R(),s=H(!1),r="mrfrase3",n="Support me on Buy me a coffee!",o=x(()=>`https://www.buymeacoffee.com/widget/page/${r}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return Ze(()=>{!t.coffeeMenu||(s.value=!0)}),(a,i)=>{const u=A;return p(),S(l(Y),{placement:"top",class:"coffee-pop",show:l(t).coffeeMenu},{content:E(()=>[s.value||l(t).coffeeMenu?(p(),m("iframe",{key:0,src:l(o),title:"Buy me a coffee",class:"bmc-iframe"},null,8,Ts)):I("",!0)]),default:E(()=>[c("div",{class:"coffee-btn",onClick:i[0]||(i[0]=_=>l(t).coffeeMenu=!l(t).coffeeMenu)},[N(v(u,{icon:"mdi:close"},null,512),[[U,l(t).coffeeMenu]]),N(c("img",Ds,null,512),[[U,!l(t).coffeeMenu]])])]),_:1},8,["show"])}}});var Ns=B(Hs,[["__scopeId","data-v-5dfad6fe"]]);const Us=e=>(z("data-v-04a5d832"),e=e(),q(),e),js={class:"sidebar-footer"},As=Us(()=>c("div",{class:"spacer"},null,-1)),Os={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},Ps=L({setup(e){const t=R(),s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(r,n)=>{const o=A,a=Ns;return p(),m("div",js,[(l(t).binarySource,p(),S(l(Y),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:E(()=>[v(o,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=i=>l(t).downloadBinary())})]),_:1})),v(l(Y),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:E(()=>[v(o,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),I("",!0),As,v(l(Y),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:E(()=>[c("a",Os,[v(o,{class:"action-icon",icon:"mdi:github"})])]),_:1}),v(a)])}}});var Vs=B(Ps,[["__scopeId","data-v-04a5d832"]]);const Te=e=>(z("data-v-288df464"),e=e(),q(),e),Fs={class:"channel-list"},Ws=Te(()=>c("div",{class:"title"}," Channels ",-1)),zs=Te(()=>c("span",{style:{"padding-right":"8px"}},"#",-1)),qs=L({setup(e){const t=R(),s=se(),r=n=>s.params.channelId===n.id;return(n,o)=>{const a=ne("router-link");return p(),m("div",Fs,[Ws,c("ul",null,[(p(!0),m(P,null,J(l(t).channels,i=>(p(),m("li",{key:i.id},[v(a,{to:{params:{channelId:i.id},query:O({},l(s).query),name:"channel"},class:j({link:!0,active:r(i)})},{default:E(()=>[zs,W(" "+C(i.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var Ys=B(qs,[["__scopeId","data-v-288df464"]]);const Js={class:"search-text"},Ks={key:0,class:"search-text-prefix"},Gs={key:0,class:"search-text-item-text"},Qs=["src"],Zs=L({props:{content:null,prefix:null,large:{type:Boolean}},setup(e){const t=e,s=R(),r=o=>{var u;const[a,i]=(u=o.attrs)==null?void 0:u.id.split(":");if(a==="from"||a==="mentions")return`${a}:@${s.users[i].name}`;if(a==="in"){const _=s.channels.find(h=>h.id===i);return`${a}:#${_.name}`}return""},n=o=>{var u,_,h;const[a,i]=(u=o.attrs)==null?void 0:u.id.split(":");return a==="from"||a==="mentions"?t.large?(_=s.users[i])==null?void 0:_.image72:(h=s.users[i])==null?void 0:h.image24:""};return(o,a)=>(p(),m("span",Js,[t.prefix?(p(),m("span",Ks,C(t.prefix),1)):I("",!0),(p(!0),m(P,null,J(t.content,(i,u)=>(p(),m("span",{key:u,class:"search-text-item"},[i.type==="text"?(p(),m("span",Gs,C(i.text),1)):i.type==="mention"?(p(),m("span",{key:1,class:j({"search-text-item-mention":!0,"with-img":!!n(i),large:t.large})},[n(i)?(p(),m("img",{key:0,src:n(i),alt:""},null,8,Qs)):I("",!0),W(" "+C(r(i)),1)],2)):I("",!0)]))),128))]))}});var Xs=B(Zs,[["__scopeId","data-v-137baf4c"]]);const en=Xe.create({name:"oneLine",topNode:!0,content:"block",addKeyboardShortcuts(){return{Enter:()=>{var t,s;const e=(s=(t=this.editor.getJSON().content)==null?void 0:t[0])==null?void 0:s.content;return(e==null?void 0:e.length)?(this.options.onEnter(e),!0):!1}}}}),tn=(e="")=>et(e,{allowedTags:[]}),sn=(e="",t="~-~",s="hightlight")=>{const r=tn(e),n=t.replace(/[^\w- ]/g,"").trim();if(!n)return r;const o=new RegExp(n,"gi");return r.replace(o,a=>`<span class="${s}">${a}</span>`)};const nn={class:"mention-items"},an=["id","onClick","onMouseenter"],on={class:"mention-action"},rn=["src"],ln={key:1},cn=["innerHTML"],un={key:1,class:"mention-item"},dn=L({props:{type:null,items:null,command:null},setup(e,{expose:t}){const s=e,r=R(),n=H(0),o=x(()=>{if(s.type!=="users")return s.items.map(y=>({action:"In",id:`in:${y.id}`,channel:y}));const d=[];return s.items.forEach(y=>{d.push({user:y,action:"From",id:`from:${y.id}`}),d.push({user:y,action:"Mentions",id:`mentions:${y.id}`})}),d}),a=x(()=>o.value.length),i=d=>{const y=o.value[d];y&&s.command(y)},u=()=>{n.value=(n.value+a.value-1)%a.value},_=()=>{n.value=(n.value+1)%a.value},h=()=>{i(n.value)},g=({event:d})=>d.key==="ArrowUp"?(u(),!0):d.key==="ArrowDown"?(_(),!0):d.key==="Enter"?(h(),!0):!1,f=d=>{var y,w;return(s.type==="users"?(y=d.user)==null?void 0:y.id:(w=d.channel)==null?void 0:w.id)||d.id};return ce(s.items,()=>{n.value=0}),ce(n,()=>{var y;const d=o.value[n.value];(y=document.getElementById(`mention-item-${d.action}-${f(d)}`))==null||y.scrollIntoView({block:"nearest"})}),t({onKeyDown:g}),(d,y)=>(p(),m("div",nn,[l(a)?(p(!0),m(P,{key:0},J(l(o),(w,$)=>{var b,k,M;return p(),m("button",{id:`mention-item-${w.action}-${f(w)}`,key:$,class:j(["mention-item",{"is-selected":$===n.value,"action-width":s.type==="users"}]),onClick:F=>i($),onMouseenter:F=>n.value=$},[c("span",on,C(w.action)+":",1),((b=w.user)==null?void 0:b.image24)?(p(),m("img",{key:0,src:w.user.image24,alt:"",class:"mention-item-img"},null,8,rn)):I("",!0),s.type==="channels"?(p(),m("span",ln,"#")):I("",!0),c("span",{innerHTML:l(sn)(((k=w.user)==null?void 0:k.name)||((M=w.channel)==null?void 0:M.name),l(r).lastMentionQuery,"mention-hl")},null,8,cn)],42,an)}),128)):(p(),m("button",un," No result "))]))}});var pn=B(dn,[["__scopeId","data-v-89900674"]]),He=(e,t="users")=>{const s=R();return{char:e,items:({query:r})=>t==="users"?s.searchUsers(r).slice(0,30):s.searchChannels(r).slice(0,30),pluginKey:new tt(t),render:()=>{let r,n;return{onStart:o=>{r=new st(pn,{props:ee(O({},o),{type:t}),editor:o.editor}),n=nt("body",{getReferenceClientRect:o.clientRect,appendTo:()=>document.body,content:r.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",sticky:!0,plugins:[at]})},onUpdate(o){r.updateProps(ee(O({},o),{type:t})),n[0].setProps({getReferenceClientRect:o.clientRect})},onKeyDown(o){var a;return o.event.key==="Escape"?(n[0].hide(),!0):(a=r.ref)==null?void 0:a.onKeyDown(o,t)},onExit(){n[0].destroy(),r.destroy()}}}}};const hn={key:0,class:"search-input"},_n=L({emits:["close"],setup(e,{expose:t,emit:s}){const r=R(),n=pe(),o=({node:u})=>{const[_,h]=u.attrs.id.split(":");if(_==="from"||_==="mentions")return`${_}:@${r.users[h].name}`;if(_==="in"){const g=r.channels.find(f=>f.id===h);return`${_}:#${g.name}`}return""},a=new ot({autofocus:!0,extensions:[en.configure({onEnter:u=>{n.push({path:"/search",query:{query:JSON.stringify(u)}}),s("close")}}),rt,it,lt.configure({placeholder:"Type @ or # to search for users or channels"}),Me.configure({HTMLAttributes:{class:"search-mention"},renderLabel:o,suggestion:He("@","users")}),Me.configure({HTMLAttributes:{class:"search-mention"},renderLabel:o,suggestion:He("#","channels")})],content:r.activeSearch,onUpdate(){r.activeSearch=a.getJSON()}}),i=()=>{a.commands.clearContent(),r.activeSearch=a.getJSON()};return ce(r.activeSearch,()=>{JSON.stringify(a.getJSON())!==JSON.stringify(r.activeSearch)&&a.commands.setContent(r.activeSearch,!1)}),ct(()=>{a.destroy()}),t({editor:a,clearContent:i}),(u,_)=>l(a)?(p(),m("div",hn,[v(l(ut),{editor:l(a)},null,8,["editor"])])):I("",!0)}});var mn=B(_n,[["__scopeId","data-v-29a93214"]]);const fn={class:"search-area"},gn={class:"search-box-icon main-icon"},vn=L({emits:["close"],setup(e,{expose:t,emit:s}){const r=R(),n=H(null);return t({searchInput:n}),(o,a)=>{var u,_,h,g;const i=A;return p(),m("div",{class:"search-input-spash",onClick:a[4]||(a[4]=f=>s("close"))},[c("div",{class:"search-input-container",onClick:a[3]||(a[3]=le(()=>{},["stop"]))},[c("div",fn,[c("div",gn,[v(i,{icon:"mdi:search"})]),v(mn,{ref_key:"searchInput",ref:n,onClose:a[0]||(a[0]=f=>s("close"))},null,512),N(c("button",{class:"clear-btn",onClick:a[1]||(a[1]=f=>{var d;return(d=n.value)==null?void 0:d.clearContent()})}," Clear ",512),[[U,(g=(h=(_=(u=l(r).activeSearch)==null?void 0:u.content)==null?void 0:_[0])==null?void 0:h.content)==null?void 0:g.length]]),c("button",{class:"close-icon",onClick:a[2]||(a[2]=f=>s("close"))},[v(i,{icon:"mdi:close"})])])])])}}});var yn=B(vn,[["__scopeId","data-v-a8da35e0"]]);const $n=e=>(z("data-v-08cc159a"),e=e(),q(),e),bn={class:"navbar"},xn={key:1},wn=$n(()=>c("div",{class:"spacer"},null,-1)),kn={class:"search-icon"},In=L({setup(e){const t=R(),s=H(!1);return(r,n)=>{var u,_,h,g;const o=yn,a=Xs,i=A;return p(),m(P,null,[s.value?(p(),S(o,{key:0,onClose:n[0]||(n[0]=f=>s.value=!1)})):I("",!0),c("div",bn,[c("button",{class:"searchbar",onClick:n[1]||(n[1]=f=>s.value=!0)},[((g=(h=(_=(u=l(t).activeSearch)==null?void 0:u.content)==null?void 0:_[0])==null?void 0:h.content)==null?void 0:g.length)?(p(),S(a,{key:0,content:l(t).activeSearch.content[0].content,prefix:"Search: "},null,8,["content"])):(p(),m("span",xn,"Search Export")),wn,c("span",kn,[v(i,{icon:"mdi:search"})])])])],64)}}});var Cn=B(In,[["__scopeId","data-v-08cc159a"]]);const Mn={class:"checkbox-text"},Ln={class:"checkbox-label"},Sn={class:"checkbox-hint"},Bn=L({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=()=>{t("update:modelValue",!s.modelValue)};return(n,o)=>{const a=A;return p(),m("div",{class:"checkbox-wrap",onClick:r},[v(a,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),c("div",Mn,[c("div",Ln,[Le(n.$slots,"label",{},()=>[W(C(s.label),1)],!0)]),c("div",Sn,[Le(n.$slots,"hint",{},()=>[W(C(s.hint),1)],!0)])])])}}});var En=B(Bn,[["__scopeId","data-v-690ba907"]]),Rn="/assets/loading.7cbe3464.svg",Ne="/slax.svg";const T=e=>(z("data-v-f73075ca"),e=e(),q(),e),Dn={class:"loading-splash moving-gradient"},Tn=T(()=>c("img",{alt:"Loading",src:Rn},null,-1)),Hn=T(()=>c("br",null,null,-1)),Nn=T(()=>c("br",null,null,-1)),Un=T(()=>c("br",null,null,-1)),jn=T(()=>c("div",{class:"header"},[c("h1",null,[c("img",{src:Ne,alt:"",style:{height:"1em","margin-right":"8px"}}),W(" Slax Pro ")]),c("p",null,[W("A "),c("i",null,"Free & Professional"),W(" viewer for slack-like export content.")])],-1)),An=["onDrop","onDragover"],On={key:0},Pn=T(()=>c("strong",null,"Drop .zip file here",-1)),Vn=T(()=>c("br",null,null,-1)),Fn=T(()=>c("small",null,"or click to select",-1)),Wn=[Pn,Vn,Fn],zn={key:1},qn=T(()=>c("strong",null,"Kobe!",-1)),Yn=[qn],Jn={key:2},Kn=T(()=>c("strong",null,"File must be a .zip",-1)),Gn=T(()=>c("br",null,null,-1)),Qn=T(()=>c("small",null,"Please try again",-1)),Zn=[Kn,Gn,Qn],Xn={class:"config"},ea=T(()=>c("h2",null,"Export Preferences",-1)),ta={class:"actions"},sa=T(()=>c("div",{class:"spacer"},null,-1)),na=T(()=>c("span",null,"Process",-1)),aa=L({setup(e){const t=R(),s=H(null),r=H(!1),n=H(!1),o=H(!1),a=H(!1),i=x(()=>o.value?"mdi:alert-outline":r.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),u=x(()=>o.value?!0:!(!r.value||n.value)),_=x(()=>u.value?"error":r.value?"success":""),h=w=>w?Array.from(w):[],g=w=>{var $;o.value=!1,r.value=!0,n.value=!!(($=w.dataTransfer)==null?void 0:$.types.includes("Files"))},f=()=>{o.value=!1,r.value=!1,n.value=!1},d=async w=>{var b,k;w.preventDefault();const $=(b=w.dataTransfer)!=null?b:w.target;s.value=(k=h($.files).find(M=>M.type==="application/zip"))!=null?k:null,f(),o.value=!s.value,s.value&&(a.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),a.value=!1)},y=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)};return Se(()=>{t.loadBinary()}),(w,$)=>{var M,F;const b=A,k=En;return N((p(),m("div",Dn,[N(c("div",null,[Tn,Hn,Nn,c("strong",null,C(l(t).status),1),Un,l(t).status.startsWith("Error:")?(p(),m("button",{key:0,onClick:$[0]||($[0]=D=>l(t).exportNeeded=!0)}," Back ")):I("",!0)],512),[[U,!l(t).exportNeeded||a.value]]),N(c("div",null,[N((p(),m("input",{key:(M=s.value)==null?void 0:M.name,ref:"fileInput",type:"file",accept:".zip",onChange:d},null,32)),[[U,!1]]),jn,N(c("div",{class:j(`drop-area ${l(_)}`),onDrop:le(d,["prevent"]),onDragenter:g,onDragover:le(g,["prevent"]),onDragleave:f,onClick:$[1]||($[1]=D=>w.$refs.fileInput.click())},[v(b,{class:"zip-icon",icon:l(i)},null,8,["icon"]),!l(u)&&!r.value?(p(),m("div",On,Wn)):l(u)?(p(),m("div",Jn,Zn)):(p(),m("div",zn,Yn))],42,An),[[U,!s.value]]),N(c("div",Xn,[ea,c("span",null,[v(b,{icon:"mdi:folder-zip-outline"}),c("strong",null,C((F=s.value)==null?void 0:F.name),1)]),v(k,{modelValue:l(t).exportConfig.preferDisplayName,"onUpdate:modelValue":$[2]||($[2]=D=>l(t).exportConfig.preferDisplayName=D),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),v(k,{modelValue:l(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":$[3]||($[3]=D=>l(t).exportConfig.hideChannelMessages=D),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),v(k,{modelValue:l(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":$[4]||($[4]=D=>l(t).exportConfig.skipArchivedChannels=D),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),v(k,{modelValue:l(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":$[5]||($[5]=D=>l(t).exportConfig.removeLinkPreviews=D),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),c("div",ta,[c("button",{class:"btn btn-text",onClick:$[6]||($[6]=D=>s.value=null)}," Back "),sa,c("button",{class:"btn",onClick:y},[v(b,{icon:"mdi:cog"}),na])])],512),[[U,s.value]])],512),[[U,l(t).exportNeeded&&!a.value]])],512)),[[U,!l(t).dataLoaded]])}}});var oa=B(aa,[["__scopeId","data-v-f73075ca"]]);const ra=c("h1",null,[c("img",{src:Ne,alt:"",style:{height:"1em","margin-right":"8px"}}),W(" Slax Pro ")],-1),ia=L({setup(e){const t=R(),s=se(),r=pe(),n=x(()=>{var i;return(i=s.query)==null?void 0:i.threadRef}),o=()=>{t.leftSidebar=!1,r.push({query:O({},Ce(s.query,["threadRef"]))})},a=dt(()=>t.onWidthChange(),100);return Se(()=>window.addEventListener("resize",a)),pt(()=>window.removeEventListener("resize",a)),(i,u)=>{const _=oa,h=Cn,g=ne("router-link"),f=Ys,d=Vs,y=Rs,w=ne("router-view");return p(),m(P,null,[v(_),v(h),c("div",{class:j({sidebar:!0,closed:!l(t).leftSidebar})},[v(g,{class:"no-link",to:{name:"home",params:{},query:O({},l(s).query)}},{default:E(()=>[ra]),_:1},8,["to"]),v(f),v(d)],2),c("div",{class:j({"thread-sidebar":!0,closed:!l(n)})},[v(y)],2),v(ht,{name:"fade"},{default:E(()=>[N(c("div",{class:"sidebar-overlay",onClick:u[0]||(u[0]=$=>o())},null,512),[[U,l(t).leftSidebar||l(n)]])]),_:1}),c("div",{class:j({main:!0,"offset-right":!!l(n)})},[v(w)],2)],64)}}});window.Buffer=_t.Buffer;mt(ia).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,he.bind(e,t,s)},updated:he.update,unmounted:he.unbind}).use(ft()).use($t).mount("#app");export{Cs as C,B as _,vs as a,Xs as b,A as c,R as u};
