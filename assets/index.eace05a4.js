var Oe=Object.defineProperty,Ve=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Me=(e,t,s)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,O=(e,t)=>{for(var s in t||(t={}))qe.call(t,s)&&Me(e,s,t[s]);if(Ce)for(var s of Ce(t))Ye.call(t,s)&&Me(e,s,t[s]);return e},ne=(e,t)=>Ve(e,Fe(t));import{c as ze,a as Je,T as Ke,A as ce,d as Ge,f as Qe,s as ae,b as G,e as Ze,R as Xe,g as L,o as h,h as S,m as Le,u as i,I as et,i as oe,j as y,r as Q,w as D,k as c,l as _,n as z,F as W,t as k,p as b,q,v as Y,E as tt,x as J,y as V,z as ee,B as ue,C as x,D as H,G as T,H as U,J as P,K as pe,L as de,M as Se,N as st,O as nt,P as at,Q as ot,V as rt,S as it,U as lt,W as ct,X as ut,Y as dt,Z as ht,_ as Be,$ as mt,a0 as _t,a1 as De,a2 as He,a3 as pt,a4 as gt,a5 as vt,a6 as ft,a7 as yt,a8 as ge,a9 as $t}from"./vendor.ce23a725.js";const bt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};bt();const xt="modulepreload",Re={},kt="/",he=function(t,s){return!s||s.length===0?t():Promise.all(s.map(o=>{if(o=`${kt}${o}`,o in Re)return;Re[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":xt,n||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),n)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",u)})})).then(()=>t())};var wt=ze({history:Je(),routes:[{path:"/",name:"home",component:()=>he(()=>import("./Home.4531513a.js"),["assets/Home.4531513a.js","assets/Home.bb55dcd4.css","assets/vendor.ce23a725.js"])},{path:"/search",name:"search",component:()=>he(()=>import("./Search.75bec237.js"),["assets/Search.75bec237.js","assets/Search.2f23ca79.css","assets/vendor.ce23a725.js"])},{path:"/channel/:channelId",name:"channel",component:()=>he(()=>import("./Channel.6f3845dd.js"),["assets/Channel.6f3845dd.js","assets/Channel.ff76015b.css","assets/vendor.ce23a725.js"])}]}),ve=new Ke({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",channelId:"string",text:"string",ts:"uint",tags:["string"],isEdited:"boolean","editedAt?":"uint","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","thumbWidth?":"uint","thumbHeight?":"uint","imageUrl?":"string","imageWidth?":"uint","imageHeight?":"uint","authorName?":"string","authorUrl?":"string","videoHtml?":"string","videoWidth?":"uint","videoHeight?":"uint","quoteId?":"uint","channelId?":"string"}]}]}]});ce.init({workerUrl:"/libarchive.js/worker-bundle.js"});const fe=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},Z=e=>Math.floor(Number(e)*1e3),Ee=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",R=Ge("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],messagesById:{},exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:Ee(window.innerWidth),activeSearch:{type:"oneLine",content:[{type:"paragraph"}]},lastMentionQuery:"",messageIndex:new Qe.exports.Document({document:{id:"id",tag:"tag",index:"content"},worker:!0,charset:"latin:advanced"})}),actions:{async loadBinary(e){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const a=await fetch(e||"/export.bin.zip");if(!a.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const p=(await(await ce.open(new File([await a.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await p.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:t,users:s}=await ve.decode(this.binaryData);this.channels=t.map(a=>{var l;return ne(O({},a),{rootMessages:(l=a.messages)==null?void 0:l.filter(u=>!u.threadId)})});const o={};s.forEach(a=>{o[a.id]=a}),this.users=o,this.status="Indexing...";const n=[],r={};t.forEach(a=>{a.messages.forEach(l=>{l.type.startsWith("bot")||!l.userId||(n.push({id:`${l.channelId}-${l.id}`,tag:l.tags,content:l.text.replace(/(<[^>]+>)|\*|_|•|◦|▪︎/g,"")}),r[`${l.channelId}-${l.id}`]=l)})}),ae(n,a=>Number(a.id.split("-")[1])*-1).forEach(a=>this.messageIndex.add(a)),this.messagesById=r,this.status="Done",this.dataLoaded=!0}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},processUser(e){var t,s,o,n,r,a,l,u;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((o=e.profile)==null?void 0:o.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((r=e.profile)==null?void 0:r.image_512)||((a=e.profile)==null?void 0:a.image_192),image24:(l=e.profile)==null?void 0:l.image_24,image72:(u=e.profile)==null?void 0:u.image_72}},processMessage(e,t){var n,r,a,l,u,p,m,f,g;const s=[],o=e.subtype||e.type||"message";return!(o==null?void 0:o.startsWith("bot"))&&e.user&&(s.push(`in:${t.id}`),e.user&&s.push(`from:${e.user}`),(n=e.text.match(/<@(U[\w]+)>/g))==null||n.forEach(d=>{const $=d.replace(/<@(U[\w]+)>/,"$1");s.push(`mentions:${$}`)})),{id:Z(e.ts),type:o,text:((r=e.text)==null?void 0:r.trim())||"",userId:e.user,channelId:t.id,ts:Z(e.ts),tags:s,isEdited:!!e.edited,editedAt:((a=e.edited)==null?void 0:a.ts)?Z(e.edited.ts):void 0,threadId:e.parent_user_id?Z(e.thread_ts):void 0,replyCount:e.reply_count||((l=e.replies)==null?void 0:l.length),replyUsersCount:e.reply_users_count||((u=e.replies_users)==null?void 0:u.length),latestReply:e.latest_reply?Z(e.latest_reply):void 0,replyMessageIds:(p=e.replies)==null?void 0:p.map(d=>Z(d.ts)),replyUserIds:e.reply_users,reactions:(m=e.reactions)==null?void 0:m.map(d=>({name:d.name,count:d.count,userIds:d.users})),files:(f=e.files)==null?void 0:f.map(d=>({id:d.id,name:d.name||d.filetype?`${d.id}.${d.filetype}`:"Untitled",mimeType:d.mimetype,src:d.url_private,width:d.original_w,height:d.original_h})).filter(d=>d.src&&d.mimeType&&d.id),attachments:(g=e.attachments)==null?void 0:g.map(d=>({serviceName:d.service_name,serviceIcon:d.service_icon,title:d.title,titleUrl:d.title_link,text:d.text,thumbUrl:d.thumb_url,thumbWidth:d.thumb_width,thumbHeight:d.thumb_height,imageUrl:d.image_url,imageWidth:d.image_width,imageHeight:d.image_height,authorName:d.author_name,authorUrl:d.author_link,videoHtml:d.video_html,videoWidth:d.video_html_width,videoHeight:d.video_html_height,quoteId:d.ts?Z(d.ts):void 0,channelId:d.channel_id})).filter(d=>!!d.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,o;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((o=e.messages)==null?void 0:o.map(n=>this.processMessage(n,e)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await ce.open(e)).extractFiles();this.status="Processing Channels...";const o=await fe(s,"channels.json"),r=(await fe(s,"users.json")).map(l=>this.processUser(l)),a=o.filter(l=>!l.is_archived||!this.exportConfig.skipArchivedChannels).map(l=>this.processChannel(l));await a.reduce(async(l,u,p)=>{await l,this.status=`Processing Messages for #${u.name} (${p+1}/${a.length})`;const m=[];await Promise.all(Object.keys(s[u.name]).map(async f=>{const g=await fe(s[u.name],f);m.push(...g.filter(d=>{var $;return!(($=d.subtype)==null?void 0:$.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(d=>this.processMessage(d,u)))})),u.messages=ae(m,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await ve.encode({channels:a,users:r})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async updateBinary(e,t){this.binaryData=await ve.encode({channels:e,users:t})},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const o=await(await ce.open(e)).getFilesObject();if(!o["export.bin"])return!1;const n=await((t=o["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await n.arrayBuffer()),this.exportNeeded=!1,this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await he(()=>import("./jszip.min.e8c3367b.js").then(function(a){return a.j}),["assets/jszip.min.e8c3367b.js","assets/vendor.ce23a725.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const o=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download="export.bin.zip",r.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=Ee(this.deviceWidth)},searchUsers(e){return this.lastMentionQuery=e,ae(Object.values(this.users).filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},searchChannels(e){return this.lastMentionQuery=e,ae(this.channels.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},async searchMessages(e,t=50,s=0){var u,p;let o="";const n=[];typeof e=="string"?((u=e.match(/((mentions)|(from)|(in)):\w+/g))==null||u.forEach(m=>{n.push(m)}),o=e.replace(/((mentions)|(from)|(in)):\w+/g,"")):e.forEach(m=>{var f,g;m.type==="text"?o+=m.text:m.type==="mention"&&((f=m.attrs)==null?void 0:f.id)&&n.push((g=m.attrs)==null?void 0:g.id)}),o=o.replace(/(\s{2,})|\+/g," ").trim()||"";let r="and";if(n.filter(m=>m.startsWith("from:")).length>1&&(r="or"),n.filter(m=>m.startsWith("in:")).length>1&&(r="or"),!o&&!n.length)return[];if(!o){const m=[];return Object.values(this.messagesById).forEach(f=>{n[r==="and"?"every":"some"](g=>f.tags.includes(g))&&m.push(f)}),ae(m,f=>f.ts*-1).slice(s,s+t)}return(((p=(await this.messageIndex.searchAsync(O({query:o,limit:t,offset:s},n.length?{index:"content",tag:n,bool:r}:{})))[0])==null?void 0:p.result)||[]).map(m=>this.messagesById[m])}}});G.extend(Ze);G.extend(Xe);const j=L({setup(e){return(t,s)=>(h(),S(i(et),Le(t.$attrs,{class:"icon"}),null,16))}});var B=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s};const It=e=>(q("data-v-72abe67b"),e=e(),Y(),e),Ct={class:"user-avatars"},Mt={class:"replies-count"},Lt={class:"replies-count-text"},St={class:"replies-info"},Bt={class:"last-reply"},Dt=It(()=>c("span",{class:"cta"}," View thread ",-1)),Ht={class:"chevron"},Rt=L({props:{message:null},setup(e){const t=e,s=R(),o=oe(),n=y(()=>{var u;let l=5;return s.deviceType==="sm"&&(l=3),s.deviceType==="xs"&&(l=1),((u=t.message.replyUserIds)==null?void 0:u.map(p=>{const m=s.users[p];return{src:m.image24||m.image72,alt:m.name}}).splice(0,l))||[]}),r=y(()=>G(t.message.latestReply)),a=y(()=>`${o.params.channelId}-${t.message.id}`);return(l,u)=>{const p=j,m=Q("router-link");return h(),S(m,{to:{query:{threadRef:i(a)}},class:"replies-btn"},{default:D(()=>[c("div",Ct,[(h(!0),_(W,null,z(i(n),(f,g)=>(h(),_("img",Le({key:g},f),null,16))),128))]),c("div",Mt,[c("span",Lt,k(e.message.replyCount)+" replies ",1)]),c("div",St,[c("span",Bt," Last reply "+k(i(r).fromNow()),1),Dt]),c("div",Ht,[b(p,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var Et=B(Rt,[["__scopeId","data-v-72abe67b"]]);const re=new tt,X="google";re.img_set=X;re.img_sets[X].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${X}@7.0.2/img/${X}/64/`;re.img_sets[X].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${X}@7.0.2/img/${X}/sheets/64.png`;const Tt=e=>(q("data-v-73aab79a"),e=e(),Y(),e),Ut={class:"react-chip"},Nt=["innerHTML"],jt={class:"react-count"},At={class:"react-popper-content"},Wt=["src","alt"],Pt=Tt(()=>c("br",null,null,-1)),Ot={class:"names"},Vt=V(" reacted with "),Ft=L({props:{react:null},setup(e){const t=e,s=R(),o=y(()=>`:${t.react.name}:`),n=y(()=>re.replace_colons(o.value)),r=y(()=>{var l;return(l=n.value.match(/https?:\/\/[^)]+/))==null?void 0:l[0]}),a=y(()=>{let l=t.react.userIds.map((u,p)=>{const m=s.users[u];let f="";return p!==0&&p===t.react.userIds.length-1&&(f="and "),`${f}${m==null?void 0:m.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(l+=` +${t.react.userIds.length-10} more`),l});return(l,u)=>(h(),S(i(J),{placement:"top",hover:"",arrow:""},{content:D(()=>[c("div",At,[c("img",{src:i(r),alt:e.react.name},null,8,Wt),Pt,c("strong",Ot,k(i(a)),1),Vt,c("strong",null,k(i(o)),1)])]),default:D(()=>[c("div",Ut,[c("span",{innerHTML:i(n)},null,8,Nt),c("span",jt,k(e.react.count),1)])]),_:1}))}});var qt=B(Ft,[["__scopeId","data-v-73aab79a"]]);const Yt=["src"],zt=["href"],Jt=["src","alt"],Kt={key:0,class:"file-name"},Gt=L({props:{file:null,maxWidth:null,maxHeight:null},setup(e){const t=e,s=y(()=>t.file.mimeType.split("/")[0]),o=y(()=>t.file.src),n=y(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const r=t.maxWidth,a=t.maxHeight||360,l=t.file.width,u=t.file.height,p=l/u;return{height:`${Math.min(p>1?r/p:a,u)}px`}});return(r,a)=>{const l=j;return h(),_("div",{class:"file-preview",style:ee(e.maxHeight?{maxHeight:`${e.maxHeight}px`}:{})},[i(s)==="video"?(h(),_("video",{key:0,src:i(o),controls:"",style:ee(i(n))},null,12,Yt)):(h(),_("a",{key:1,href:i(o),target:"_blank",onClick:a[0]||(a[0]=ue(()=>{},["stop"]))},[i(s)==="image"?(h(),_("img",{key:0,src:i(o),alt:t.file.name,style:ee(i(n))},null,12,Jt)):(h(),_("div",{key:1,style:ee(e.maxHeight?{height:`${e.maxHeight}px`,width:`${e.maxHeight}px`}:{}),class:"unknown-preview"},[b(l,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),!e.maxHeight||e.maxHeight>150?(h(),_("div",Kt,k(t.file.name),1)):x("",!0)],4))],8,zt))],4)}}});var Te=B(Gt,[["__scopeId","data-v-5c3a5f50"]]);const F=(e,t)=>e.split(t)[0].length,me={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},ie=e=>Object.keys(me).reduce((t,s)=>t.replaceAll(s,me[s]),e),Qt=e=>Object.keys(me).reduce((t,s)=>t.replaceAll(me[s],s),e),te=/(-|\* |•|◦|▪︎)/,se=/(\d+\.)/,Zt=(e,t,s)=>Qt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,o=>{const n=o.split(`
`).filter(Boolean);return n.map((r,a)=>{let l="";const u=n[a-1],p=a===0,m=a===n.length-1;return u&&F(u,te)!==F(r,te)&&(l+="</ul>"),(p||F(u,te)!==F(r,te))&&(l+=`<ul class="formatter-ul" data-indent="${Math.round(F(r,te)/4)}">`),l+=`<li>${r.split(te)[2].trim()}</li>`,m&&(l+="</ul>"),l}).join("")}).replace(/((\n|^)\s*(\d+\.)[^\n]+)+/g,o=>{const n=o.split(`
`).filter(Boolean);return n.map((r,a)=>{var f,g;let l="";const u=n[a-1],p=a===0,m=a===n.length-1;return u&&F(u,se)!==F(r,se)&&(l+="</ul>"),(p||F(u,se)!==F(r,se))&&(l+=`<ul class="formatter-ol" data-indent="${Math.round(F(r,se)/4)}">`),l+=`<li data-num="${(g=(f=`${r}`.match(/(\d+\.)/))==null?void 0:f[0])!=null?g:`${a+1}.`}">${r.split(se)[2].trim()}</li>`,m&&(l+="</ul>"),l}).join("")}).replace(/((\n|^)(>)[^\n]+)+\n?/g,o=>`<blockquote class="formatter-bq">${o.replace(/(\n|^)(>)/g,`
`).trim()}</blockquote>`).replace(/<@(U[\w]+)\|?([^>]+)?>/g,(o,n,r)=>{var u,p;const a=t[n],l=((u=a.profile)==null?void 0:u.display_name)||((p=a.profile)==null?void 0:p.real_name)||a.name;return ie(a?`<span class="formatter-mention">@${r||l}</span>`:o)}).replace(/<!([\w\^]+\|?([^>]+)?)>/g,(o,n,r)=>ie(`<span class="formatter-mention">@${r||n}</span>`)).replace(/<#(C[\w\^]+)\|?([^>]+)?>/g,(o,n,r)=>{const a=s.find(l=>n.startsWith(l.id));return ie(a?`<a class="formatter-mention" href="/channel/${a.id}">#${r||a.name}</a>`:o)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(o,n,r,a)=>ie(`<a class="formatter-link" href="${n}" target="_blank">${a||n}</a>`)).replace(/(:[^: ]+:)/gm,o=>{const n=re.replace_colons(o);return n.includes("<span")?ie(n):n}).replace(/\*([^\*]+)\*/gm,(o,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(o,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(o,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var _e=(e,t,s)=>e.split("```").map((o,n)=>{if(n%2==0){const r=[],a=o.replace(/(`[^`]+`)/g,u=>(r.push(`<code class="formatter-code inline">${u.replace(/(^`)|(`$)/g,"")}</code>`),`---inline-code-${r.length-1}---`)),l=Zt(a,t,s);return r.reduce((u,p,m)=>u.replace(`---inline-code-${m}---`,p),l)}return`<pre class="formatter-code block"><code>${o}</code></pre>`}).join("");const Xt=e=>(q("data-v-47bf49ee"),e=e(),Y(),e),es={key:0,class:"attach-service"},ts=["src"],ss=["href"],ns={class:"attach-main"},as={class:"attach-content"},os=["href"],rs=["innerHTML"],is=Xt(()=>c("span",null,"View message",-1)),ls={key:0,class:"attach-thumbnail"},cs=["src"],us={key:1},ds={key:0,class:"video-actions"},hs=["href"],ms=["innerHTML"],_s=L({props:{attachment:null,msg:null},setup(e){const t=e,s=R(),o=H(null),n=H(!1),r=y(()=>t.attachment.imageUrl?{id:"1",name:"image.png",mimeType:"image/png",src:t.attachment.imageUrl,width:t.attachment.imageWidth,height:t.attachment.imageHeight}:null),a=y(()=>t.attachment.serviceIcon?`https://slack-imgs.com/?c=1&o1=wi32.he32.si&url=${encodeURIComponent(t.attachment.serviceIcon)}`:null),l=y(()=>{if(!t.attachment.thumbHeight||!t.attachment.thumbWidth)return{};const g=t.attachment.thumbWidth/t.attachment.thumbHeight,d=Math.min(360,t.attachment.thumbWidth),$=d/g;return{backgroundImage:`url(${t.attachment.thumbUrl})`,width:`${d}px`,height:`${$}px`}}),u=y(()=>{if(!t.attachment.quoteId)return null;const g=`${t.attachment.channelId}-${t.attachment.quoteId}`;return s.messagesById[g]}),p=y(()=>u.value?s.channels.find(g=>g.id===u.value.channelId):null),m=y(()=>u.value?G(u.value.ts).format("MMM Do, YYYY"):""),f=y(()=>{if(u.value){const g=s.users[u.value.userId];return{name:g.name,icon:g.image24}}return{name:t.attachment.serviceName,icon:a.value}});return(g,d)=>{var v;const $=Q("router-link"),C=j,I=Te;return h(),_("blockquote",{ref_key:"wrapper",ref:o,class:"formatter-bq"},[i(f)?(h(),_("div",es,[i(f).icon?(h(),_("img",{key:0,src:i(f).icon,alt:""},null,8,ts)):x("",!0),V(" "+k(i(f).name)+" ",1),e.attachment.authorName&&!i(u)?(h(),_("a",{key:1,class:"attach-author",href:e.attachment.authorUrl,target:"_blank"},k(e.attachment.authorName),9,ss)):x("",!0)])):x("",!0),c("div",ns,[c("div",as,[c("a",{class:"attach-title",href:e.attachment.titleUrl,target:"_blank"},k(e.attachment.title),9,os),c("div",{class:"attach-text",innerHTML:i(_e)(e.attachment.text||"",i(s).users,i(s).channels)},null,8,rs),i(u)?(h(),S($,{key:0,class:"quote-link",to:`/channel/${i(u).channelId}?threadRef=${i(u).channelId}-${i(u).id}`},{default:D(()=>[c("span",null,"Posted in #"+k(i(p).name),1),c("span",null,k(i(m)),1),is]),_:1},8,["to"])):x("",!0)]),e.attachment.thumbUrl&&!e.attachment.videoHtml?(h(),_("div",ls,[c("img",{src:e.attachment.thumbUrl,alt:""},null,8,cs)])):x("",!0)]),e.attachment.videoHtml?(h(),_("div",us,[c("div",{class:"video-thumbnail",style:ee(i(l))},[n.value?(h(),_("div",{key:1,class:"video-player",innerHTML:e.attachment.videoHtml},null,8,ms)):(h(),_("div",ds,[c("button",{class:"btn btn-icon",onClick:d[0]||(d[0]=w=>n.value=!0)},[b(C,{icon:"mdi:play-outline"})]),c("a",{class:"btn btn-icon",href:e.attachment.titleUrl,target:"_blank"},[b(C,{icon:"mdi:open-in-new"})],8,hs)]))],4)])):x("",!0),i(r)?(h(),S(I,{key:2,file:i(r),"max-width":(v=o.value)==null?void 0:v.offsetWidth,"max-height":200},null,8,["file","max-width"])):x("",!0)],512)}}});var ps=B(_s,[["__scopeId","data-v-47bf49ee"]]);const gs={class:"file-list-header"},vs={class:"file-list-header-title"},fs={class:"file-list-header-actions"},ys=L({props:{files:null,maxHeight:null},setup(e){const t=e,s=H(!1),o=H(null),n=y(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(r,a)=>{const l=j,u=Te;return h(),_("div",{ref_key:"wrapper",ref:o,class:"file-list"},[c("div",gs,[c("span",vs,k(i(n)),1),c("span",fs,[b(l,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:a[0]||(a[0]=p=>s.value=!s.value)},null,8,["icon"])])]),(h(!0),_(W,null,z(o.value?e.files:[],p=>{var m;return T((h(),S(u,{key:p.id,file:p,"max-width":(m=o.value)==null?void 0:m.offsetWidth,"max-height":e.maxHeight},null,8,["file","max-width","max-height"])),[[U,!s.value]])}),128))],512)}}});var $s=B(ys,[["__scopeId","data-v-4d4e549c"]]);const Ue=e=>(q("data-v-245cd8d2"),e=e(),Y(),e),bs=["id"],xs={key:0,class:"message-list-date-wrap"},ks=Ue(()=>c("hr",null,null,-1)),ws={class:"message-list-date"},Is={class:"message-actions"},Cs={class:"message-left"},Ms={key:0,class:"message-avatar"},Ls=["src"],Ss={key:1},Bs={class:"message-main"},Ds={key:0,class:"message-header"},Hs={class:"message-author"},Rs={class:"message-timestamp"},Es=["innerHTML"],Ts=Ue(()=>c("span",{class:"message-edited"},"\xA0(editied)\xA0",-1)),Us={key:3,class:"message-attachments"},Ns={key:4,class:"message-reactions"},js=L({props:{message:null,aboveMessage:null,channelId:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean},smallReplies:{type:Boolean},nameDateFormat:null,idRef:null,fileMaxHeight:null},setup(e){const t=e,s=R(),o=oe();H([]);const n=H("Copy Link"),r=y(()=>{var v;return G((v=t.message)==null?void 0:v.ts)}),a=y(()=>{var M;const v=r.value.format("YYYY-MM-DD"),w=G((M=t.aboveMessage)==null?void 0:M.ts).format("YYYY-MM-DD");return!t.aboveMessage||v!==w}),l=y(()=>{var v;return!a.value&&t.message.userId===((v=t.aboveMessage)==null?void 0:v.userId)}),u=y(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),p=y(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),m=y(()=>{var v,w;return t.hideDateRule&&a.value?(v=r.value)==null?void 0:v.format(t.nameDateFormat||"Do MMM, YYYY [at] h:mm a"):(w=r.value)==null?void 0:w.format("h:mm a").toUpperCase()}),f=y(()=>`${t.idRef||"message"}-${t.message.id}`),g=y(()=>{var M;const v=o.query.threadRef||"",w=s.messagesById[v];return(w==null?void 0:w.threadId)?(M=s.messagesById[`${t.channelId}-${w.threadId}`])==null?void 0:M.id:w==null?void 0:w.id}),d=y(()=>{const v=`${o.query.threadRef||""}`.split("-")[1];return f.value===`message-${v}`||f.value===`message-${g.value}`}),$=y(()=>!t.message.threadId),C=y(()=>G(t.message.editedAt||0).format("MMM Do, YYYY [at] h:mm a")),I=()=>{const v=`${window.location.origin}/channel/${t.channelId}?threadRef=${t.channelId}-${t.message.id}`;navigator.clipboard.writeText(v),n.value="Copied!",setTimeout(()=>{n.value="Copy Link"},2e3)};return(v,w)=>{var ye,$e,be,xe,ke,we,Ie;const M=j,A=$s,K=ps,N=qt,We=Et;return((ye=e.message)==null?void 0:ye.id)?(h(),_("div",{key:0,id:i(f)},[i(a)&&!e.hideDateRule?(h(),_("div",xs,[ks,c("div",ws,k(i(r).format("MMMM Do, YYYY")),1)])):x("",!0),e.message?(h(),_("div",{key:1,class:P({message:!0,continued:i(l),active:i(d)})},[T(c("div",Is,[e.message.threadId?x("",!0):(h(),S(i(J),{key:0,show:n.value==="Copied!"||null,placement:"top",hover:"",arrow:""},{content:D(()=>[c("div",{class:P({"copy-link-pop-text":!0,success:n.value==="Copied!"})},k(n.value),3)]),default:D(()=>[c("button",{class:"copy-link-btn",onClick:I},[b(M,{icon:"mdi:link-variant"})])]),_:1},8,["show"])),x("",!0)],512),[[U,i($)]]),c("div",Cs,[i(l)?(h(),_("span",Ss,k(i(r).format("h:mm")),1)):(h(),_("div",Ms,[c("img",{src:($e=i(u))==null?void 0:$e.image72,alt:""},null,8,Ls)]))]),c("div",Bs,[i(l)?x("",!0):(h(),_("div",Ds,[c("span",Hs,k((be=i(u))==null?void 0:be.name),1),c("span",Rs,k(i(m)),1)])),e.message.text?(h(),_("div",{key:1,class:P({"message-content":!0,"just-emoji":i(p),"non-message":e.message.type!=="message"})},[c("div",{style:{display:"inline"},innerHTML:i(_e)(e.message.text,i(s).users,i(s).channels)},null,8,Es),e.message.isEdited?(h(),S(i(J),{key:0,content:i(C),placement:"top",arrow:"",hover:""},{default:D(()=>[Ts]),_:1},8,["content"])):x("",!0)],2)):x("",!0),((xe=e.message.files)==null?void 0:xe.length)?(h(),S(A,{key:2,files:e.message.files,"max-height":e.fileMaxHeight},null,8,["files","max-height"])):x("",!0),((ke=e.message.attachments)==null?void 0:ke.length)?(h(),_("div",Us,[(h(!0),_(W,null,z(e.message.attachments,(le,Pe)=>(h(),S(K,{key:Pe,attachment:le,msg:e.message},null,8,["attachment","msg"]))),128))])):x("",!0),((we=e.message.reactions)==null?void 0:we.length)||e.message.replyCount&&e.smallReplies?(h(),_("div",Ns,[(h(!0),_(W,null,z(e.message.reactions,le=>(h(),S(N,{key:le.name,react:le},null,8,["react"]))),128)),e.message.replyCount&&e.smallReplies?(h(),_("div",{key:0,style:ee({marginLeft:((Ie=e.message.reactions)==null?void 0:Ie.length)?"16px":"0"}),class:"small-replies"},[b(M,{icon:"mdi:message-reply-text-outline"}),c("span",null,k(e.message.replyCount)+" "+k(e.message.replyCount===1?"reply":"replies"),1)],4)):x("",!0)])):x("",!0),e.message.replyCount&&!t.hideReplies&&!t.smallReplies?(h(),S(We,{key:5,message:e.message},null,8,["message"])):x("",!0)])],2)):x("",!0)],8,bs)):x("",!0)}}});var As=B(js,[["__scopeId","data-v-245cd8d2"]]);const Ws={class:"chat-header"},Ps={key:0,class:"chat-header-actions"},Os={class:"chat-header-title spacer"},Vs=["innerHTML"],Fs=["innerHTML"],qs={key:1,class:"chat-header-actions"},Ys=L({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,o=R();return(n,r)=>{const a=j,l=Q("router-link");return h(),_("div",Ws,[s.showMenuButton?(h(),_("div",Ps,[c("button",{class:"btn btn-icon menu-button",onClick:r[0]||(r[0]=u=>i(o).toggleSidebar())},[b(a,{icon:"mdi:menu-open"})])])):x("",!0),c("div",Os,[c("strong",null,k(s.title),1),s.subtitle&&!s.subtitleTo?(h(),S(i(J),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:D(()=>[c("div",{class:"subtitle-popout",innerHTML:i(_e)(s.subtitle,i(o).users,i(o).channels)},null,8,Fs)]),default:D(()=>[c("span",{innerHTML:i(_e)(s.subtitle,i(o).users,i(o).channels)},null,8,Vs)]),_:1})):x("",!0),s.subtitle&&s.subtitleTo?(h(),S(l,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:k(s.subtitle)},null,8,["to","textContent"])):x("",!0)]),s.showCloseButton?(h(),_("div",qs,[c("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=u=>t("close"))},[b(a,{icon:"mdi:close"})])])):x("",!0)])}}});var zs=B(Ys,[["__scopeId","data-v-13add010"]]);const Js=e=>(q("data-v-1a67ebd7"),e=e(),Y(),e),Ks={class:"thread-list"},Gs=Js(()=>c("hr",null,null,-1)),Qs={class:"replies-count"},Zs=L({setup(e){var f;const t=oe(),s=pe(),o=R(),n=H(`${(f=t.query.threadRef)!=null?f:""}`),r=y(()=>{var g;return`${(g=t.query.threadRef)!=null?g:""}`}),a=y(()=>{var d;const g=n.value.split("-")[0];return(d=o.channels)==null?void 0:d.find($=>$.id===g)}),l=y(()=>{const g=o.messagesById[n.value];return(g==null?void 0:g.threadId)?o.messagesById[`${a.value.id}-${g.threadId}`]:g}),u=y(()=>{var d,$,C,I;const g=Number(n.value.split("-")[1]);return(($=(d=l.value)==null?void 0:d.replyMessageIds)==null?void 0:$.length)?((I=(C=a.value)==null?void 0:C.messages)==null?void 0:I.filter(v=>{var w,M;return v.threadId===g||((M=(w=l.value)==null?void 0:w.replyMessageIds)==null?void 0:M.indexOf(v.id))!==-1}))||[]:[]}),p=()=>{s.push({query:Se(t.query,"threadRef")})},m=g=>g>0?u.value[g-1]:ne(O({},l.value),{userId:""});return de(r,()=>{var g;n.value=`${(g=t.query.threadRef)!=null?g:""}`}),(g,d)=>{var I,v,w;const $=zs,C=As;return h(),_(W,null,[((I=i(a))==null?void 0:I.id)?(h(),S($,{key:0,title:"Thread",subtitle:`#${(v=i(a))==null?void 0:v.name}`,"subtitle-to":{params:{channelId:i(a).id},query:O({},i(t).query),name:"channel"},"show-close-button":"",onClose:p},null,8,["subtitle","subtitle-to"])):x("",!0),c("div",Ks,[b(C,{message:i(l),"above-message":null,"channel-id":((w=i(a))==null?void 0:w.id)||"",style:{margin:"16px 0"},"id-ref":"thread","hide-date-rule":"","hide-replies":""},null,8,["message","channel-id"]),Gs,c("div",Qs,[c("small",null,k(i(u).length)+" Repl"+k(i(u).length===1?"y":"ies"),1)]),(h(!0),_(W,null,z(i(u),(M,A)=>{var K;return h(),S(C,{key:M.id,message:M,"above-message":m(A),"channel-id":(K=i(a))==null?void 0:K.id,class:P({last:A===i(u).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","channel-id","class"])}),128))])],64)}}});var Xs=B(Zs,[["__scopeId","data-v-1a67ebd7"]]);const en={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},tn=["src"],sn=L({setup(e){const t=R(),s=H(!1),o="mrfrase3",n="Support me on Buy me a coffee!",r=y(()=>`https://www.buymeacoffee.com/widget/page/${o}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return st(()=>{!t.coffeeMenu||(s.value=!0)}),(a,l)=>{const u=j;return h(),S(i(J),{placement:"top",class:"coffee-pop",show:i(t).coffeeMenu},{content:D(()=>[s.value||i(t).coffeeMenu?(h(),_("iframe",{key:0,src:i(r),title:"Buy me a coffee",class:"bmc-iframe"},null,8,tn)):x("",!0)]),default:D(()=>[c("div",{class:"coffee-btn",onClick:l[0]||(l[0]=p=>i(t).coffeeMenu=!i(t).coffeeMenu)},[T(b(u,{icon:"mdi:close"},null,512),[[U,i(t).coffeeMenu]]),T(c("img",en,null,512),[[U,!i(t).coffeeMenu]])])]),_:1},8,["show"])}}});var nn=B(sn,[["__scopeId","data-v-5dfad6fe"]]);const an=e=>(q("data-v-2e3dce46"),e=e(),Y(),e),on={class:"sidebar-footer"},rn=an(()=>c("div",{class:"spacer"},null,-1)),ln={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},cn=L({setup(e){const t=R();H(!1);const s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(o,n)=>{const r=j;Q("router-link");const a=nn;return h(),_("div",on,[i(t).binarySource==="upload"?(h(),S(i(J),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:D(()=>[b(r,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=l=>i(t).downloadBinary())})]),_:1})):x("",!0),b(i(J),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:D(()=>[b(r,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),x("",!0),x("",!0),rn,b(i(J),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:D(()=>[c("a",ln,[b(r,{class:"action-icon",icon:"mdi:github"})])]),_:1}),b(a)])}}});var un=B(cn,[["__scopeId","data-v-2e3dce46"]]);const Ne=e=>(q("data-v-288df464"),e=e(),Y(),e),dn={class:"channel-list"},hn=Ne(()=>c("div",{class:"title"}," Channels ",-1)),mn=Ne(()=>c("span",{style:{"padding-right":"8px"}},"#",-1)),_n=L({setup(e){const t=R(),s=oe(),o=n=>s.params.channelId===n.id;return(n,r)=>{const a=Q("router-link");return h(),_("div",dn,[hn,c("ul",null,[(h(!0),_(W,null,z(i(t).channels,l=>(h(),_("li",{key:l.id},[b(a,{to:{params:{channelId:l.id},query:O({},i(s).query),name:"channel"},class:P({link:!0,active:o(l)})},{default:D(()=>[mn,V(" "+k(l.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var pn=B(_n,[["__scopeId","data-v-288df464"]]);const gn={class:"search-text"},vn={key:0,class:"search-text-prefix"},fn={key:0,class:"search-text-item-text"},yn=["src"],$n=L({props:{content:null,prefix:null,large:{type:Boolean}},setup(e){const t=e,s=R(),o=r=>{var u;const[a,l]=(u=r.attrs)==null?void 0:u.id.split(":");if(a==="from"||a==="mentions")return`${a}:@${s.users[l].name}`;if(a==="in"){const p=s.channels.find(m=>m.id===l);return`${a}:#${p.name}`}return""},n=r=>{var u,p,m;const[a,l]=(u=r.attrs)==null?void 0:u.id.split(":");return a==="from"||a==="mentions"?t.large?(p=s.users[l])==null?void 0:p.image72:(m=s.users[l])==null?void 0:m.image24:""};return(r,a)=>(h(),_("span",gn,[t.prefix?(h(),_("span",vn,k(t.prefix),1)):x("",!0),(h(!0),_(W,null,z(t.content,(l,u)=>(h(),_("span",{key:u,class:"search-text-item"},[l.type==="text"?(h(),_("span",fn,k(l.text),1)):l.type==="mention"?(h(),_("span",{key:1,class:P({"search-text-item-mention":!0,"with-img":!!n(l),large:t.large})},[n(l)?(h(),_("img",{key:0,src:n(l),alt:""},null,8,yn)):x("",!0),V(" "+k(o(l)),1)],2)):x("",!0)]))),128))]))}});var bn=B($n,[["__scopeId","data-v-137baf4c"]]);const xn=nt.create({name:"oneLine",topNode:!0,content:"block",addKeyboardShortcuts(){return{Enter:()=>{var t,s;const e=(s=(t=this.editor.getJSON().content)==null?void 0:t[0])==null?void 0:s.content;return(e==null?void 0:e.length)?(this.options.onEnter(e),!0):!1}}}}),kn=(e="")=>at(e,{allowedTags:[]}),wn=(e="",t="~-~",s="hightlight")=>{const o=kn(e),n=t.replace(/[^\w- ]/g,"").trim();if(!n)return o;const r=new RegExp(n,"gi");return o.replace(r,a=>`<span class="${s}">${a}</span>`)};const In={class:"mention-items"},Cn=["id","onClick","onMouseenter"],Mn={class:"mention-action"},Ln=["src"],Sn={key:1},Bn=["innerHTML"],Dn={key:1,class:"mention-item"},Hn=L({props:{type:null,items:null,command:null},setup(e,{expose:t}){const s=e,o=R(),n=H(0),r=y(()=>{if(s.type!=="users")return s.items.map($=>({action:"In",id:`in:${$.id}`,channel:$}));const d=[];return s.items.forEach($=>{d.push({user:$,action:"From",id:`from:${$.id}`}),d.push({user:$,action:"Mentions",id:`mentions:${$.id}`})}),d}),a=y(()=>r.value.length),l=d=>{const $=r.value[d];$&&s.command($)},u=()=>{n.value=(n.value+a.value-1)%a.value},p=()=>{n.value=(n.value+1)%a.value},m=()=>{l(n.value)},f=({event:d})=>d.key==="ArrowUp"?(u(),!0):d.key==="ArrowDown"?(p(),!0):d.key==="Enter"?(m(),!0):!1,g=d=>{var $,C;return(s.type==="users"?($=d.user)==null?void 0:$.id:(C=d.channel)==null?void 0:C.id)||d.id};return de(s.items,()=>{n.value=0}),de(n,()=>{var $;const d=r.value[n.value];($=document.getElementById(`mention-item-${d.action}-${g(d)}`))==null||$.scrollIntoView({block:"nearest"})}),t({onKeyDown:f}),(d,$)=>(h(),_("div",In,[i(a)?(h(!0),_(W,{key:0},z(i(r),(C,I)=>{var v,w,M;return h(),_("button",{id:`mention-item-${C.action}-${g(C)}`,key:I,class:P(["mention-item",{"is-selected":I===n.value,"action-width":s.type==="users"}]),onClick:A=>l(I),onMouseenter:A=>n.value=I},[c("span",Mn,k(C.action)+":",1),((v=C.user)==null?void 0:v.image24)?(h(),_("img",{key:0,src:C.user.image24,alt:"",class:"mention-item-img"},null,8,Ln)):x("",!0),s.type==="channels"?(h(),_("span",Sn,"#")):x("",!0),c("span",{innerHTML:i(wn)(((w=C.user)==null?void 0:w.name)||((M=C.channel)==null?void 0:M.name),i(o).lastMentionQuery,"mention-hl")},null,8,Bn)],42,Cn)}),128)):(h(),_("button",Dn," No result "))]))}});var Rn=B(Hn,[["__scopeId","data-v-89900674"]]),je=(e,t="users")=>{const s=R();return{char:e,items:({query:o})=>t==="users"?s.searchUsers(o).slice(0,30):s.searchChannels(o).slice(0,30),pluginKey:new ot(t),render:()=>{let o,n;return{onStart:r=>{o=new rt(Rn,{props:ne(O({},r),{type:t}),editor:r.editor}),n=it("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:o.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",sticky:!0,plugins:[lt]})},onUpdate(r){o.updateProps(ne(O({},r),{type:t})),n[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var a;return r.event.key==="Escape"?(n[0].hide(),!0):(a=o.ref)==null?void 0:a.onKeyDown(r,t)},onExit(){n[0].destroy(),o.destroy()}}}}};const En={key:0,class:"search-input"},Tn=L({emits:["close"],setup(e,{expose:t,emit:s}){const o=R(),n=pe(),r=({node:u})=>{const[p,m]=u.attrs.id.split(":");if(p==="from"||p==="mentions")return`${p}:@${o.users[m].name}`;if(p==="in"){const f=o.channels.find(g=>g.id===m);return`${p}:#${f.name}`}return""},a=new ct({autofocus:!0,extensions:[xn.configure({onEnter:u=>{n.push({path:"/search",query:{query:JSON.stringify(u)}}),s("close")}}),ut,dt,ht.configure({placeholder:"Type @ or # to search for users or channels"}),Be.configure({HTMLAttributes:{class:"search-mention"},renderLabel:r,suggestion:je("@","users")}),Be.configure({HTMLAttributes:{class:"search-mention"},renderLabel:r,suggestion:je("#","channels")})],content:o.activeSearch,onUpdate(){o.activeSearch=a.getJSON()}}),l=()=>{a.commands.clearContent(),o.activeSearch=a.getJSON()};return de(o.activeSearch,()=>{JSON.stringify(a.getJSON())!==JSON.stringify(o.activeSearch)&&a.commands.setContent(o.activeSearch,!1)}),mt(()=>{a.destroy()}),t({editor:a,clearContent:l}),(u,p)=>i(a)?(h(),_("div",En,[b(i(_t),{editor:i(a)},null,8,["editor"])])):x("",!0)}});var Un=B(Tn,[["__scopeId","data-v-29a93214"]]);const Nn={class:"search-area"},jn={class:"search-box-icon main-icon"},An=L({emits:["close"],setup(e,{expose:t,emit:s}){const o=R(),n=H(null);return t({searchInput:n}),(r,a)=>{var u,p,m,f;const l=j;return h(),_("div",{class:"search-input-spash",onClick:a[4]||(a[4]=g=>s("close"))},[c("div",{class:"search-input-container",onClick:a[3]||(a[3]=ue(()=>{},["stop"]))},[c("div",Nn,[c("div",jn,[b(l,{icon:"mdi:search"})]),b(Un,{ref_key:"searchInput",ref:n,onClose:a[0]||(a[0]=g=>s("close"))},null,512),T(c("button",{class:"clear-btn",onClick:a[1]||(a[1]=g=>{var d;return(d=n.value)==null?void 0:d.clearContent()})}," Clear ",512),[[U,(f=(m=(p=(u=i(o).activeSearch)==null?void 0:u.content)==null?void 0:p[0])==null?void 0:m.content)==null?void 0:f.length]]),c("button",{class:"close-icon",onClick:a[2]||(a[2]=g=>s("close"))},[b(l,{icon:"mdi:close"})])])])])}}});var Wn=B(An,[["__scopeId","data-v-a8da35e0"]]);const Pn=e=>(q("data-v-08cc159a"),e=e(),Y(),e),On={class:"navbar"},Vn={key:1},Fn=Pn(()=>c("div",{class:"spacer"},null,-1)),qn={class:"search-icon"},Yn=L({setup(e){const t=R(),s=H(!1);return(o,n)=>{var u,p,m,f;const r=Wn,a=bn,l=j;return h(),_(W,null,[s.value?(h(),S(r,{key:0,onClose:n[0]||(n[0]=g=>s.value=!1)})):x("",!0),c("div",On,[c("button",{class:"searchbar",onClick:n[1]||(n[1]=g=>s.value=!0)},[((f=(m=(p=(u=i(t).activeSearch)==null?void 0:u.content)==null?void 0:p[0])==null?void 0:m.content)==null?void 0:f.length)?(h(),S(a,{key:0,content:i(t).activeSearch.content[0].content,prefix:"Search: "},null,8,["content"])):(h(),_("span",Vn,"Search Export")),Fn,c("span",qn,[b(l,{icon:"mdi:search"})])])])],64)}}});var zn=B(Yn,[["__scopeId","data-v-08cc159a"]]);const Jn={class:"checkbox-text"},Kn={class:"checkbox-label"},Gn={class:"checkbox-hint"},Qn=L({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=()=>{t("update:modelValue",!s.modelValue)};return(n,r)=>{const a=j;return h(),_("div",{class:"checkbox-wrap",onClick:o},[b(a,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),c("div",Jn,[c("div",Kn,[De(n.$slots,"label",{},()=>[V(k(s.label),1)],!0)]),c("div",Gn,[De(n.$slots,"hint",{},()=>[V(k(s.hint),1)],!0)])])])}}});var Zn=B(Qn,[["__scopeId","data-v-690ba907"]]),Xn="/assets/loading.7cbe3464.svg",Ae="/slax.svg";const E=e=>(q("data-v-15a14fd9"),e=e(),Y(),e),ea={class:"loading-splash moving-gradient"},ta=E(()=>c("img",{alt:"Loading",src:Xn},null,-1)),sa=E(()=>c("br",null,null,-1)),na=E(()=>c("br",null,null,-1)),aa=E(()=>c("br",null,null,-1)),oa=E(()=>c("div",{class:"header"},[c("h1",null,[c("img",{src:Ae,alt:"",style:{height:"1em","margin-right":"8px"}}),V(" Slax Pro ")]),c("p",null,[V("A "),c("i",null,"Free & Professional"),V(" viewer for slack-like export content.")])],-1)),ra=["onDrop","onDragover"],ia={key:0},la=E(()=>c("strong",null,"Drop .zip file here",-1)),ca=E(()=>c("br",null,null,-1)),ua=E(()=>c("small",null,"or click to select",-1)),da=[la,ca,ua],ha={key:1},ma=E(()=>c("strong",null,"Kobe!",-1)),_a=[ma],pa={key:2},ga=E(()=>c("strong",null,"File must be a .zip",-1)),va=E(()=>c("br",null,null,-1)),fa=E(()=>c("small",null,"Please try again",-1)),ya=[ga,va,fa],$a={class:"actions demo"},ba=E(()=>c("span",null,"Load Demo Export",-1)),xa=[ba],ka={class:"config"},wa=E(()=>c("h2",null,"Export Preferences",-1)),Ia={class:"actions"},Ca=E(()=>c("div",{class:"spacer"},null,-1)),Ma=E(()=>c("span",null,"Process",-1)),La=L({setup(e){const t=R(),s=H(null),o=H(!1),n=H(!1),r=H(!1),a=H(!1),l=y(()=>r.value?"mdi:alert-outline":o.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),u=y(()=>r.value?!0:!(!o.value||n.value)),p=y(()=>u.value?"error":o.value?"success":""),m=I=>I?Array.from(I):[],f=I=>{var v;r.value=!1,o.value=!0,n.value=!!((v=I.dataTransfer)==null?void 0:v.types.includes("Files"))},g=()=>{r.value=!1,o.value=!1,n.value=!1},d=async I=>{var w,M;I.preventDefault();const v=(w=I.dataTransfer)!=null?w:I.target;s.value=(M=m(v.files).find(A=>A.type==="application/zip"))!=null?M:null,g(),r.value=!s.value,s.value&&(a.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),a.value=!1)},$=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)},C=async()=>{await t.loadBinary("/demo.bin.zip")};return He(()=>{t.loadBinary()}),(I,v)=>{var A,K;const w=j,M=Zn;return T((h(),_("div",ea,[T(c("div",null,[ta,sa,na,c("strong",null,k(i(t).status),1),aa,i(t).status.startsWith("Error:")?(h(),_("button",{key:0,onClick:v[0]||(v[0]=N=>i(t).exportNeeded=!0)}," Back ")):x("",!0)],512),[[U,!i(t).exportNeeded||a.value]]),T(c("div",null,[T((h(),_("input",{key:(A=s.value)==null?void 0:A.name,ref:"fileInput",type:"file",accept:".zip",onChange:d},null,32)),[[U,!1]]),oa,T(c("div",{class:P(`drop-area ${i(p)}`),onDrop:ue(d,["prevent"]),onDragenter:f,onDragover:ue(f,["prevent"]),onDragleave:g,onClick:v[1]||(v[1]=N=>I.$refs.fileInput.click())},[b(w,{class:"zip-icon",icon:i(l)},null,8,["icon"]),!i(u)&&!o.value?(h(),_("div",ia,da)):i(u)?(h(),_("div",pa,ya)):(h(),_("div",ha,_a))],42,ra),[[U,!s.value]]),T(c("div",$a,[c("button",{class:"btn btn-text",onClick:C},xa)],512),[[U,!s.value]]),T(c("div",ka,[wa,c("span",null,[b(w,{icon:"mdi:folder-zip-outline"}),c("strong",null,k((K=s.value)==null?void 0:K.name),1)]),b(M,{modelValue:i(t).exportConfig.preferDisplayName,"onUpdate:modelValue":v[2]||(v[2]=N=>i(t).exportConfig.preferDisplayName=N),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),b(M,{modelValue:i(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":v[3]||(v[3]=N=>i(t).exportConfig.hideChannelMessages=N),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),b(M,{modelValue:i(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":v[4]||(v[4]=N=>i(t).exportConfig.skipArchivedChannels=N),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),b(M,{modelValue:i(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":v[5]||(v[5]=N=>i(t).exportConfig.removeLinkPreviews=N),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),c("div",Ia,[c("button",{class:"btn btn-text",onClick:v[6]||(v[6]=N=>s.value=null)}," Back "),Ca,c("button",{class:"btn",onClick:$},[b(w,{icon:"mdi:cog"}),Ma])])],512),[[U,s.value]])],512),[[U,i(t).exportNeeded&&!a.value]])],512)),[[U,!i(t).dataLoaded]])}}});var Sa=B(La,[["__scopeId","data-v-15a14fd9"]]);const Ba=c("h1",null,[c("img",{src:Ae,alt:"",style:{height:"1em","margin-right":"8px"}}),V(" Slax Pro ")],-1),Da=L({setup(e){const t=R(),s=oe(),o=pe(),n=y(()=>{var l;return(l=s.query)==null?void 0:l.threadRef}),r=()=>{t.leftSidebar=!1,o.push({query:O({},Se(s.query,["threadRef"]))})},a=pt(()=>t.onWidthChange(),100);return He(()=>window.addEventListener("resize",a)),gt(()=>window.removeEventListener("resize",a)),(l,u)=>{const p=Sa,m=zn,f=Q("router-link"),g=pn,d=un,$=Xs,C=Q("router-view");return h(),_(W,null,[b(p),b(m),c("div",{class:P({sidebar:!0,closed:!i(t).leftSidebar})},[b(f,{class:"no-link",to:{name:"home",params:{},query:O({},i(s).query)}},{default:D(()=>[Ba]),_:1},8,["to"]),b(g),b(d)],2),c("div",{class:P({"thread-sidebar":!0,closed:!i(n)})},[b($)],2),b(vt,{name:"fade"},{default:D(()=>[T(c("div",{class:"sidebar-overlay",onClick:u[0]||(u[0]=I=>r())},null,512),[[U,i(t).leftSidebar||i(n)]])]),_:1}),c("div",{class:P({main:!0,"offset-right":!!i(n)})},[b(C)],2)],64)}}});window.Buffer=ft.Buffer;yt(Da).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,ge.bind(e,t,s)},updated:ge.update,unmounted:ge.unbind}).use($t()).use(wt).mount("#app");export{zs as C,B as _,As as a,bn as b,j as c,R as u};
