var Oe=Object.defineProperty,qe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Le=(e,t,n)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))Fe.call(t,n)&&Le(e,n,t[n]);if(Me)for(var n of Me(t))Ye.call(t,n)&&Le(e,n,t[n]);return e},le=(e,t)=>qe(e,Ve(t));import{c as ze,a as Ke,T as Je,A as pe,d as Ge,f as Qe,s as ce,b as X,e as Ze,R as Xe,g as L,o as h,h as S,m as Se,u as l,I as et,i as ne,j as b,r as ee,w as R,k as c,l as _,n as Q,F as V,t as k,p as f,q as K,v as J,E as tt,x as G,y as Y,z as ae,B as ue,C as $,D as E,G as j,H as A,J as F,K as _e,L as ge,M as Ue,N as st,O as nt,P as at,Q as ot,V as rt,S as it,U as lt,W as ct,X as ut,Y as dt,Z as ht,_ as Be,$ as mt,a0 as pt,a1 as Re,a2 as Ee,a3 as _t,a4 as gt,a5 as vt,a6 as ft,a7 as yt,a8 as bt,a9 as $t,aa as be,ab as xt}from"./vendor.4a6f8929.js";const kt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};kt();const wt="modulepreload",De={},It="/",ve=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${It}${o}`,o in De)return;De[o]=!0;const s=o.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":wt,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((i,u)=>{a.addEventListener("load",i),a.addEventListener("error",u)})})).then(()=>t())};var Ct=ze({history:Ke(),routes:[{path:"/",name:"home",component:()=>ve(()=>import("./Home.359dbe59.js"),["assets/Home.359dbe59.js","assets/Home.92b09e1b.css","assets/vendor.4a6f8929.js"])},{path:"/search",name:"search",component:()=>ve(()=>import("./Search.e6ab89a6.js"),["assets/Search.e6ab89a6.js","assets/Search.2f23ca79.css","assets/vendor.4a6f8929.js"])},{path:"/channel/:channelId",name:"channel",component:()=>ve(()=>import("./Channel.30f41858.js"),["assets/Channel.30f41858.js","assets/Channel.ff76015b.css","assets/vendor.4a6f8929.js"])}]}),$e=new Je({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",channelId:"string",text:"string",ts:"uint",tags:["string"],isEdited:"boolean","editedAt?":"uint","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","thumbWidth?":"uint","thumbHeight?":"uint","imageUrl?":"string","imageWidth?":"uint","imageHeight?":"uint","authorName?":"string","authorUrl?":"string","videoHtml?":"string","videoWidth?":"uint","videoHeight?":"uint","quoteId?":"uint","channelId?":"string"}]}]}]});pe.init({workerUrl:"/libarchive.js/worker-bundle.js"});const xe=async(e,t)=>{const n=await e[t].text();return JSON.parse(n)},te=e=>Math.floor(Number(e)*1e3),He=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",H=Ge("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,exportUrl:localStorage.getItem("exportUrl")||null,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],messagesById:{},exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:He(window.innerWidth),activeSearch:{type:"oneLine",content:[{type:"paragraph"}]},lastMentionQuery:"",messageIndex:new Qe.exports.Document({document:{id:"id",tag:"tag",index:"content"},worker:!0,charset:"latin:advanced"})}),actions:{async loadBinary(e){try{if(this.binaryData)this.binarySource="upload",this.setExportUrl(null);else{this.status="Downloading...";const a=await fetch(e||"/export.bin.zip");if(!a.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const p=(await(await pe.open(new File([await a.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await p.arrayBuffer()),this.binarySource="download",e&&this.setExportUrl(e)}this.status="Extracting...";const{channels:t,users:n}=await $e.decode(this.binaryData);this.channels=[],this.users={},this.messagesById={},this.channels=t.map(a=>{var i;return le(q({},a),{rootMessages:(i=a.messages)==null?void 0:i.filter(u=>!u.threadId)})});const o={};n.forEach(a=>{o[a.id]=a}),this.users=o,this.status="Indexing...";const s=[],r={};t.forEach(a=>{a.messages.forEach(i=>{i.type.startsWith("bot")||!i.userId||(s.push({id:`${i.channelId}-${i.id}`,tag:i.tags,content:i.text.replace(/(<[^>]+>)|\*|_|•|◦|▪︎/g,"")}),r[`${i.channelId}-${i.id}`]=i)})}),ce(s,a=>Number(a.id.split("-")[1])*-1).forEach(a=>this.messageIndex.add(a)),this.messagesById=r,this.status="Done",this.dataLoaded=!0}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},processUser(e){var t,n,o,s,r,a,i,u;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(n=e.profile)==null?void 0:n.real_name)||((o=e.profile)==null?void 0:o.real_name)||e.name||"",image:((s=e.profile)==null?void 0:s.image_1024)||((r=e.profile)==null?void 0:r.image_512)||((a=e.profile)==null?void 0:a.image_192),image24:(i=e.profile)==null?void 0:i.image_24,image72:(u=e.profile)==null?void 0:u.image_72}},processMessage(e,t){var s,r,a,i,u,p,m,v,g;const n=[],o=e.subtype||e.type||"message";return!(o==null?void 0:o.startsWith("bot"))&&e.user&&(n.push(`in:${t.id}`),e.user&&n.push(`from:${e.user}`),(s=e.text.match(/<@(U[\w]+)>/g))==null||s.forEach(d=>{const y=d.replace(/<@(U[\w]+)>/,"$1");n.push(`mentions:${y}`)})),{id:te(e.ts),type:o,text:((r=e.text)==null?void 0:r.trim())||"",userId:e.user,channelId:t.id,ts:te(e.ts),tags:n,isEdited:!!e.edited,editedAt:((a=e.edited)==null?void 0:a.ts)?te(e.edited.ts):void 0,threadId:e.parent_user_id?te(e.thread_ts):void 0,replyCount:e.reply_count||((i=e.replies)==null?void 0:i.length),replyUsersCount:e.reply_users_count||((u=e.replies_users)==null?void 0:u.length),latestReply:e.latest_reply?te(e.latest_reply):void 0,replyMessageIds:(p=e.replies)==null?void 0:p.map(d=>te(d.ts)),replyUserIds:e.reply_users,reactions:(m=e.reactions)==null?void 0:m.map(d=>({name:d.name,count:d.count,userIds:d.users})),files:(v=e.files)==null?void 0:v.map(d=>({id:d.id,name:d.name||d.filetype?`${d.id}.${d.filetype}`:"Untitled",mimeType:d.mimetype,src:d.url_private,width:d.original_w,height:d.original_h})).filter(d=>d.src&&d.mimeType&&d.id),attachments:(g=e.attachments)==null?void 0:g.map(d=>({serviceName:d.service_name,serviceIcon:d.service_icon,title:d.title,titleUrl:d.title_link,text:d.text,thumbUrl:d.thumb_url,thumbWidth:d.thumb_width,thumbHeight:d.thumb_height,imageUrl:d.image_url,imageWidth:d.image_width,imageHeight:d.image_height,authorName:d.author_name,authorUrl:d.author_link,videoHtml:d.video_html,videoWidth:d.video_html_width,videoHeight:d.video_html_height,quoteId:d.ts?te(d.ts):void 0,channelId:d.channel_id})).filter(d=>!!d.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,n,o;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(n=e.purpose)==null?void 0:n.value,messages:((o=e.messages)==null?void 0:o.map(s=>this.processMessage(s,e)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const n=await(await pe.open(e)).extractFiles();this.status="Processing Channels...";const o=await xe(n,"channels.json"),r=(await xe(n,"users.json")).map(i=>this.processUser(i)),a=o.filter(i=>!i.is_archived||!this.exportConfig.skipArchivedChannels).map(i=>this.processChannel(i));await a.reduce(async(i,u,p)=>{await i,this.status=`Processing Messages for #${u.name} (${p+1}/${a.length})`;const m=[];await Promise.all(Object.keys(n[u.name]).map(async v=>{const g=await xe(n[u.name],v);m.push(...g.filter(d=>{var y;return!((y=d.subtype)==null?void 0:y.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(d=>this.processMessage(d,u)))})),u.messages=ce(m,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await $e.encode({channels:a,users:r})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async updateBinary(e,t){this.binaryData=await $e.encode({channels:e,users:t})},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const o=await(await pe.open(e)).getFilesObject();if(!o["export.bin"])return!1;const s=await((t=o["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await s.arrayBuffer()),this.exportNeeded=!1,await this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await ve(()=>import("./jszip.min.26331368.js").then(function(a){return a.j}),["assets/jszip.min.26331368.js","assets/vendor.4a6f8929.js"]),t=new e,n=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",n);const o=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),s=URL.createObjectURL(o),r=document.createElement("a");r.href=s,r.download="export.bin.zip",r.click(),URL.revokeObjectURL(s)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=He(this.deviceWidth)},setExportUrl(e){this.exportUrl=e,e?localStorage.setItem("exportUrl",e):localStorage.removeItem("exportUrl")},searchUsers(e){return this.lastMentionQuery=e,ce(Object.values(this.users).filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},searchChannels(e){return this.lastMentionQuery=e,ce(this.channels.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},async searchMessages(e,t=50,n=0){var u,p;let o="";const s=[];typeof e=="string"?((u=e.match(/((mentions)|(from)|(in)):\w+/g))==null||u.forEach(m=>{s.push(m)}),o=e.replace(/((mentions)|(from)|(in)):\w+/g,"")):e.forEach(m=>{var v,g;m.type==="text"?o+=m.text:m.type==="mention"&&((v=m.attrs)==null?void 0:v.id)&&s.push((g=m.attrs)==null?void 0:g.id)}),o=o.replace(/(\s{2,})|\+/g," ").trim()||"";let r="and";if(s.filter(m=>m.startsWith("from:")).length>1&&(r="or"),s.filter(m=>m.startsWith("in:")).length>1&&(r="or"),!o&&!s.length)return[];if(!o){const m=[];return Object.values(this.messagesById).forEach(v=>{s[r==="and"?"every":"some"](g=>v.tags.includes(g))&&m.push(v)}),ce(m,v=>v.ts*-1).slice(n,n+t)}return(((p=(await this.messageIndex.searchAsync(q({query:o,limit:t,offset:n},s.length?{index:"content",tag:s,bool:r}:{})))[0])==null?void 0:p.result)||[]).map(m=>this.messagesById[m])}}});X.extend(Ze);X.extend(Xe);const O=L({setup(e){return(t,n)=>(h(),S(l(et),Se(t.$attrs,{class:"icon"}),null,16))}});var D=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const Mt=e=>(K("data-v-72abe67b"),e=e(),J(),e),Lt={class:"user-avatars"},St={class:"replies-count"},Ut={class:"replies-count-text"},Bt={class:"replies-info"},Rt={class:"last-reply"},Et=Mt(()=>c("span",{class:"cta"}," View thread ",-1)),Dt={class:"chevron"},Ht=L({props:{message:null},setup(e){const t=e,n=H(),o=ne(),s=b(()=>{var u;let i=5;return n.deviceType==="sm"&&(i=3),n.deviceType==="xs"&&(i=1),((u=t.message.replyUserIds)==null?void 0:u.map(p=>{const m=n.users[p];return{src:m.image24||m.image72,alt:m.name}}).splice(0,i))||[]}),r=b(()=>X(t.message.latestReply)),a=b(()=>`${o.params.channelId}-${t.message.id}`);return(i,u)=>{const p=O,m=ee("router-link");return h(),S(m,{to:{query:{threadRef:l(a)}},class:"replies-btn"},{default:R(()=>[c("div",Lt,[(h(!0),_(V,null,Q(l(s),(v,g)=>(h(),_("img",Se({key:g},v),null,16))),128))]),c("div",St,[c("span",Ut,k(e.message.replyCount)+" replies ",1)]),c("div",Bt,[c("span",Rt," Last reply "+k(l(r).fromNow()),1),Et]),c("div",Dt,[f(p,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var Tt=D(Ht,[["__scopeId","data-v-72abe67b"]]);const de=new tt,se="google";de.img_set=se;de.img_sets[se].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${se}@7.0.2/img/${se}/64/`;de.img_sets[se].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${se}@7.0.2/img/${se}/sheets/64.png`;const Nt=e=>(K("data-v-73aab79a"),e=e(),J(),e),jt={class:"react-chip"},At=["innerHTML"],Wt={class:"react-count"},Pt={class:"react-popper-content"},Ot=["src","alt"],qt=Nt(()=>c("br",null,null,-1)),Vt={class:"names"},Ft=Y(" reacted with "),Yt=L({props:{react:null},setup(e){const t=e,n=H(),o=b(()=>`:${t.react.name}:`),s=b(()=>de.replace_colons(o.value)),r=b(()=>{var i;return(i=s.value.match(/https?:\/\/[^)]+/))==null?void 0:i[0]}),a=b(()=>{let i=t.react.userIds.map((u,p)=>{const m=n.users[u];let v="";return p!==0&&p===t.react.userIds.length-1&&(v="and "),`${v}${m==null?void 0:m.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(i+=` +${t.react.userIds.length-10} more`),i});return(i,u)=>(h(),S(l(G),{placement:"top",hover:"",arrow:""},{content:R(()=>[c("div",Pt,[c("img",{src:l(r),alt:e.react.name},null,8,Ot),qt,c("strong",Vt,k(l(a)),1),Ft,c("strong",null,k(l(o)),1)])]),default:R(()=>[c("div",jt,[c("span",{innerHTML:l(s)},null,8,At),c("span",Wt,k(e.react.count),1)])]),_:1}))}});var zt=D(Yt,[["__scopeId","data-v-73aab79a"]]);const Kt=["src"],Jt=["href"],Gt=["src","alt"],Qt={key:0,class:"file-name"},Zt=L({props:{file:null,maxWidth:null,maxHeight:null},setup(e){const t=e,n=b(()=>t.file.mimeType.split("/")[0]),o=b(()=>t.file.src),s=b(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const r=t.maxWidth,a=t.maxHeight||360,i=t.file.width,u=t.file.height,p=i/u;return{height:`${Math.min(p>1?r/p:a,u)}px`}});return(r,a)=>{const i=O;return h(),_("div",{class:"file-preview",style:ae(e.maxHeight?{maxHeight:`${e.maxHeight}px`}:{})},[l(n)==="video"?(h(),_("video",{key:0,src:l(o),controls:"",style:ae(l(s))},null,12,Kt)):(h(),_("a",{key:1,href:l(o),target:"_blank",onClick:a[0]||(a[0]=ue(()=>{},["stop"]))},[l(n)==="image"?(h(),_("img",{key:0,src:l(o),alt:t.file.name,style:ae(l(s))},null,12,Gt)):(h(),_("div",{key:1,style:ae(e.maxHeight?{height:`${e.maxHeight}px`,width:`${e.maxHeight}px`}:{}),class:"unknown-preview"},[f(i,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),!e.maxHeight||e.maxHeight>150?(h(),_("div",Qt,k(t.file.name),1)):$("",!0)],4))],8,Jt))],4)}}});var Te=D(Zt,[["__scopeId","data-v-5c3a5f50"]]);const z=(e,t)=>e.split(t)[0].length,fe={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},he=e=>Object.keys(fe).reduce((t,n)=>t.replaceAll(n,fe[n]),e),Xt=e=>Object.keys(fe).reduce((t,n)=>t.replaceAll(fe[n],n),e),oe=/(-|\* |•|◦|▪︎)/,re=/(\d+\.)/,es=(e,t,n)=>Xt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,o=>{const s=o.split(`
`).filter(Boolean);return s.map((r,a)=>{let i="";const u=s[a-1],p=a===0,m=a===s.length-1;return u&&z(u,oe)!==z(r,oe)&&(i+="</ul>"),(p||z(u,oe)!==z(r,oe))&&(i+=`<ul class="formatter-ul" data-indent="${Math.round(z(r,oe)/4)}">`),i+=`<li>${r.split(oe)[2].trim()}</li>`,m&&(i+="</ul>"),i}).join("")}).replace(/((\n|^)\s*(\d+\.)[^\n]+)+/g,o=>{const s=o.split(`
`).filter(Boolean);return s.map((r,a)=>{var v,g;let i="";const u=s[a-1],p=a===0,m=a===s.length-1;return u&&z(u,re)!==z(r,re)&&(i+="</ul>"),(p||z(u,re)!==z(r,re))&&(i+=`<ul class="formatter-ol" data-indent="${Math.round(z(r,re)/4)}">`),i+=`<li data-num="${(g=(v=`${r}`.match(/(\d+\.)/))==null?void 0:v[0])!=null?g:`${a+1}.`}">${r.split(re)[2].trim()}</li>`,m&&(i+="</ul>"),i}).join("")}).replace(/((\n|^)(>)[^\n]+)+\n?/g,o=>`<blockquote class="formatter-bq">${o.replace(/(\n|^)(>)/g,`
`).trim()}</blockquote>`).replace(/<@(U[\w]+)\|?([^>]+)?>/g,(o,s,r)=>{var u,p;const a=t[s],i=((u=a.profile)==null?void 0:u.display_name)||((p=a.profile)==null?void 0:p.real_name)||a.name;return he(a?`<span class="formatter-mention">@${r||i}</span>`:o)}).replace(/<!([\w\^]+\|?([^>]+)?)>/g,(o,s,r)=>he(`<span class="formatter-mention">@${r||s}</span>`)).replace(/<#(C[\w\^]+)\|?([^>]+)?>/g,(o,s,r)=>{const a=n.find(i=>s.startsWith(i.id));return he(a?`<a class="formatter-mention" href="/channel/${a.id}">#${r||a.name}</a>`:o)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(o,s,r,a)=>he(`<a class="formatter-link" href="${s}" target="_blank">${a||s}</a>`)).replace(/(:[^: ]+:)/gm,o=>{const s=de.replace_colons(o);return s.includes("<span")?he(s):s}).replace(/\*([^\*]+)\*/gm,(o,s)=>`<strong>${s}</strong>`).replace(/\_([^\_]+)\_/gm,(o,s)=>`<em>${s}</em>`).replace(/\~([^\~]+)\~/gm,(o,s)=>`<del>${s}</del>`).replace(/\n/g,"<br>"));var ye=(e,t,n)=>e.split("```").map((o,s)=>{if(s%2==0){const r=[],a=o.replace(/(`[^`]+`)/g,u=>(r.push(`<code class="formatter-code inline">${u.replace(/(^`)|(`$)/g,"")}</code>`),`---inline-code-${r.length-1}---`)),i=es(a,t,n);return r.reduce((u,p,m)=>u.replace(`---inline-code-${m}---`,p),i)}return`<pre class="formatter-code block"><code>${o}</code></pre>`}).join("");const ts=e=>(K("data-v-47bf49ee"),e=e(),J(),e),ss={key:0,class:"attach-service"},ns=["src"],as=["href"],os={class:"attach-main"},rs={class:"attach-content"},is=["href"],ls=["innerHTML"],cs=ts(()=>c("span",null,"View message",-1)),us={key:0,class:"attach-thumbnail"},ds=["src"],hs={key:1},ms={key:0,class:"video-actions"},ps=["href"],_s=["innerHTML"],gs=L({props:{attachment:null,msg:null},setup(e){const t=e,n=H(),o=E(null),s=E(!1),r=b(()=>t.attachment.imageUrl?{id:"1",name:"image.png",mimeType:"image/png",src:t.attachment.imageUrl,width:t.attachment.imageWidth,height:t.attachment.imageHeight}:null),a=b(()=>t.attachment.serviceIcon?`https://slack-imgs.com/?c=1&o1=wi32.he32.si&url=${encodeURIComponent(t.attachment.serviceIcon)}`:null),i=b(()=>{if(!t.attachment.thumbHeight||!t.attachment.thumbWidth)return{};const g=t.attachment.thumbWidth/t.attachment.thumbHeight,d=Math.min(360,t.attachment.thumbWidth),y=d/g;return{backgroundImage:`url(${t.attachment.thumbUrl})`,width:`${d}px`,height:`${y}px`}}),u=b(()=>{if(!t.attachment.quoteId)return null;const g=`${t.attachment.channelId}-${t.attachment.quoteId}`;return n.messagesById[g]}),p=b(()=>u.value?n.channels.find(g=>g.id===u.value.channelId):null),m=b(()=>u.value?X(u.value.ts).format("MMM Do, YYYY"):""),v=b(()=>{if(u.value){const g=n.users[u.value.userId];return{name:g.name,icon:g.image24}}return{name:t.attachment.serviceName,icon:a.value}});return(g,d)=>{var x;const y=ee("router-link"),I=O,B=Te;return h(),_("blockquote",{ref_key:"wrapper",ref:o,class:"formatter-bq"},[l(v)?(h(),_("div",ss,[l(v).icon?(h(),_("img",{key:0,src:l(v).icon,alt:""},null,8,ns)):$("",!0),Y(" "+k(l(v).name)+" ",1),e.attachment.authorName&&!l(u)?(h(),_("a",{key:1,class:"attach-author",href:e.attachment.authorUrl,target:"_blank"},k(e.attachment.authorName),9,as)):$("",!0)])):$("",!0),c("div",os,[c("div",rs,[c("a",{class:"attach-title",href:e.attachment.titleUrl,target:"_blank"},k(e.attachment.title),9,is),c("div",{class:"attach-text",innerHTML:l(ye)(e.attachment.text||"",l(n).users,l(n).channels)},null,8,ls),l(u)?(h(),S(y,{key:0,class:"quote-link",to:`/channel/${l(u).channelId}?threadRef=${l(u).channelId}-${l(u).id}`},{default:R(()=>[c("span",null,"Posted in #"+k(l(p).name),1),c("span",null,k(l(m)),1),cs]),_:1},8,["to"])):$("",!0)]),e.attachment.thumbUrl&&!e.attachment.videoHtml?(h(),_("div",us,[c("img",{src:e.attachment.thumbUrl,alt:""},null,8,ds)])):$("",!0)]),e.attachment.videoHtml?(h(),_("div",hs,[c("div",{class:"video-thumbnail",style:ae(l(i))},[s.value?(h(),_("div",{key:1,class:"video-player",innerHTML:e.attachment.videoHtml},null,8,_s)):(h(),_("div",ms,[c("button",{class:"btn btn-icon",onClick:d[0]||(d[0]=C=>s.value=!0)},[f(I,{icon:"mdi:play-outline"})]),c("a",{class:"btn btn-icon",href:e.attachment.titleUrl,target:"_blank"},[f(I,{icon:"mdi:open-in-new"})],8,ps)]))],4)])):$("",!0),l(r)?(h(),S(B,{key:2,file:l(r),"max-width":(x=o.value)==null?void 0:x.offsetWidth,"max-height":200},null,8,["file","max-width"])):$("",!0)],512)}}});var vs=D(gs,[["__scopeId","data-v-47bf49ee"]]);const fs={class:"file-list-header"},ys={class:"file-list-header-title"},bs={class:"file-list-header-actions"},$s=L({props:{files:null,maxHeight:null},setup(e){const t=e,n=E(!1),o=E(null),s=b(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(r,a)=>{const i=O,u=Te;return h(),_("div",{ref_key:"wrapper",ref:o,class:"file-list"},[c("div",fs,[c("span",ys,k(l(s)),1),c("span",bs,[f(i,{icon:`mdi:chevron-${n.value?"right":"down"}-circle`,onClick:a[0]||(a[0]=p=>n.value=!n.value)},null,8,["icon"])])]),(h(!0),_(V,null,Q(o.value?e.files:[],p=>{var m;return j((h(),S(u,{key:p.id,file:p,"max-width":(m=o.value)==null?void 0:m.offsetWidth,"max-height":e.maxHeight},null,8,["file","max-width","max-height"])),[[A,!n.value]])}),128))],512)}}});var xs=D($s,[["__scopeId","data-v-4d4e549c"]]);const Ne=e=>(K("data-v-0e23bdb0"),e=e(),J(),e),ks=["id"],ws={key:0,class:"message-list-date-wrap"},Is=Ne(()=>c("hr",null,null,-1)),Cs={class:"message-list-date"},Ms={class:"message-actions"},Ls={class:"message-left"},Ss={key:0,class:"message-avatar"},Us=["src"],Bs={key:1},Rs={class:"message-main"},Es={key:0,class:"message-header"},Ds={class:"message-author"},Hs={class:"message-timestamp"},Ts=["innerHTML"],Ns=Ne(()=>c("span",{class:"message-edited"},"\xA0(editied)\xA0",-1)),js={key:3,class:"message-attachments"},As={key:4,class:"message-reactions"},Ws=L({props:{message:null,aboveMessage:null,channelId:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean},smallReplies:{type:Boolean},nameDateFormat:null,idRef:null,fileMaxHeight:null},setup(e){const t=e,n=H(),o=ne();E([]);const s=E("Copy Link"),r=b(()=>{var x;return X((x=t.message)==null?void 0:x.ts)}),a=b(()=>{var M;const x=r.value.format("YYYY-MM-DD"),C=X((M=t.aboveMessage)==null?void 0:M.ts).format("YYYY-MM-DD");return!t.aboveMessage||x!==C}),i=b(()=>{var x;return!a.value&&t.message.userId===((x=t.aboveMessage)==null?void 0:x.userId)}),u=b(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:n.users[t.message.userId]),p=b(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),m=b(()=>{var x,C;return t.hideDateRule&&a.value?(x=r.value)==null?void 0:x.format(t.nameDateFormat||"Do MMM, YYYY [at] h:mm a"):(C=r.value)==null?void 0:C.format("h:mm a").toUpperCase()}),v=b(()=>`${t.idRef||"message"}-${t.message.id}`),g=b(()=>{var M;const x=o.query.threadRef||"",C=n.messagesById[x];return(C==null?void 0:C.threadId)?(M=n.messagesById[`${t.channelId}-${C.threadId}`])==null?void 0:M.id:C==null?void 0:C.id}),d=b(()=>{const x=`${o.query.threadRef||""}`.split("-")[1];return v.value===`message-${x}`||v.value===`message-${g.value}`}),y=b(()=>!t.message.threadId),I=b(()=>X(t.message.editedAt||0).format("MMM Do, YYYY [at] h:mm a")),B=()=>{let x=`${window.location.origin}/channel/${t.channelId}?threadRef=${t.channelId}-${t.message.id}`;n.exportUrl&&(x+=`&exportUrl=${encodeURIComponent(n.exportUrl)}`),navigator.clipboard.writeText(x),s.value="Copied!",setTimeout(()=>{s.value="Copy Link"},2e3)};return(x,C)=>{var Z,ie,N,ke,we,Ie,Ce;const M=O,U=xs,w=vs,W=zt,P=Tt;return((Z=e.message)==null?void 0:Z.id)?(h(),_("div",{key:0,id:l(v)},[l(a)&&!e.hideDateRule?(h(),_("div",ws,[Is,c("div",Cs,k(l(r).format("MMMM Do, YYYY")),1)])):$("",!0),e.message?(h(),_("div",{key:1,class:F({message:!0,continued:l(i),active:l(d)})},[j(c("div",Ms,[e.message.threadId?$("",!0):(h(),S(l(G),{key:0,show:s.value==="Copied!"||null,placement:"top",hover:"",arrow:""},{content:R(()=>[c("div",{class:F({"copy-link-pop-text":!0,success:s.value==="Copied!"})},k(s.value),3)]),default:R(()=>[c("button",{class:"copy-link-btn",onClick:B},[f(M,{icon:"mdi:link-variant"})])]),_:1},8,["show"])),$("",!0)],512),[[A,l(y)]]),c("div",Ls,[l(i)?(h(),_("span",Bs,k(l(r).format("h:mm")),1)):(h(),_("div",Ss,[c("img",{src:(ie=l(u))==null?void 0:ie.image72,alt:""},null,8,Us)]))]),c("div",Rs,[l(i)?$("",!0):(h(),_("div",Es,[c("span",Ds,k((N=l(u))==null?void 0:N.name),1),c("span",Hs,k(l(m)),1)])),e.message.text?(h(),_("div",{key:1,class:F({"message-content":!0,"just-emoji":l(p),"non-message":e.message.type!=="message"})},[c("div",{style:{display:"inline"},innerHTML:l(ye)(e.message.text,l(n).users,l(n).channels)},null,8,Ts),e.message.isEdited?(h(),S(l(G),{key:0,content:l(I),placement:"top",arrow:"",hover:""},{default:R(()=>[Ns]),_:1},8,["content"])):$("",!0)],2)):$("",!0),((ke=e.message.files)==null?void 0:ke.length)?(h(),S(U,{key:2,files:e.message.files,"max-height":e.fileMaxHeight},null,8,["files","max-height"])):$("",!0),((we=e.message.attachments)==null?void 0:we.length)?(h(),_("div",js,[(h(!0),_(V,null,Q(e.message.attachments,(me,Pe)=>(h(),S(w,{key:Pe,attachment:me,msg:e.message},null,8,["attachment","msg"]))),128))])):$("",!0),((Ie=e.message.reactions)==null?void 0:Ie.length)||e.message.replyCount&&e.smallReplies?(h(),_("div",As,[(h(!0),_(V,null,Q(e.message.reactions,me=>(h(),S(W,{key:me.name,react:me},null,8,["react"]))),128)),e.message.replyCount&&e.smallReplies?(h(),_("div",{key:0,style:ae({marginLeft:((Ce=e.message.reactions)==null?void 0:Ce.length)?"16px":"0"}),class:"small-replies"},[f(M,{icon:"mdi:message-reply-text-outline"}),c("span",null,k(e.message.replyCount)+" "+k(e.message.replyCount===1?"reply":"replies"),1)],4)):$("",!0)])):$("",!0),e.message.replyCount&&!t.hideReplies&&!t.smallReplies?(h(),S(P,{key:5,message:e.message},null,8,["message"])):$("",!0)])],2)):$("",!0)],8,ks)):$("",!0)}}});var Ps=D(Ws,[["__scopeId","data-v-0e23bdb0"]]);const Os={class:"chat-header"},qs={key:0,class:"chat-header-actions"},Vs={class:"chat-header-title spacer"},Fs=["innerHTML"],Ys=["innerHTML"],zs={key:1,class:"chat-header-actions"},Ks=L({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=e,o=H();return(s,r)=>{const a=O,i=ee("router-link");return h(),_("div",Os,[n.showMenuButton?(h(),_("div",qs,[c("button",{class:"btn btn-icon menu-button",onClick:r[0]||(r[0]=u=>l(o).toggleSidebar())},[f(a,{icon:"mdi:menu-open"})])])):$("",!0),c("div",Vs,[c("strong",null,k(n.title),1),n.subtitle&&!n.subtitleTo?(h(),S(l(G),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:R(()=>[c("div",{class:"subtitle-popout",innerHTML:l(ye)(n.subtitle,l(o).users,l(o).channels)},null,8,Ys)]),default:R(()=>[c("span",{innerHTML:l(ye)(n.subtitle,l(o).users,l(o).channels)},null,8,Fs)]),_:1})):$("",!0),n.subtitle&&n.subtitleTo?(h(),S(i,{key:1,to:n.subtitleTo,class:"chat-header-subtitle",textContent:k(n.subtitle)},null,8,["to","textContent"])):$("",!0)]),n.showCloseButton?(h(),_("div",zs,[c("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=u=>t("close"))},[f(a,{icon:"mdi:close"})])])):$("",!0)])}}});var Js=D(Ks,[["__scopeId","data-v-13add010"]]);const Gs=e=>(K("data-v-1a67ebd7"),e=e(),J(),e),Qs={class:"thread-list"},Zs=Gs(()=>c("hr",null,null,-1)),Xs={class:"replies-count"},en=L({setup(e){var v;const t=ne(),n=_e(),o=H(),s=E(`${(v=t.query.threadRef)!=null?v:""}`),r=b(()=>{var g;return`${(g=t.query.threadRef)!=null?g:""}`}),a=b(()=>{var d;const g=s.value.split("-")[0];return(d=o.channels)==null?void 0:d.find(y=>y.id===g)}),i=b(()=>{const g=o.messagesById[s.value];return(g==null?void 0:g.threadId)?o.messagesById[`${a.value.id}-${g.threadId}`]:g}),u=b(()=>{var d,y,I,B;const g=Number(s.value.split("-")[1]);return((y=(d=i.value)==null?void 0:d.replyMessageIds)==null?void 0:y.length)?((B=(I=a.value)==null?void 0:I.messages)==null?void 0:B.filter(x=>{var C,M;return x.threadId===g||((M=(C=i.value)==null?void 0:C.replyMessageIds)==null?void 0:M.indexOf(x.id))!==-1}))||[]:[]}),p=()=>{n.push({query:Ue(t.query,"threadRef")})},m=g=>g>0?u.value[g-1]:le(q({},i.value),{userId:""});return ge(r,()=>{var g;s.value=`${(g=t.query.threadRef)!=null?g:""}`}),(g,d)=>{var B,x,C;const y=Js,I=Ps;return h(),_(V,null,[((B=l(a))==null?void 0:B.id)?(h(),S(y,{key:0,title:"Thread",subtitle:`#${(x=l(a))==null?void 0:x.name}`,"subtitle-to":{params:{channelId:l(a).id},query:q({},l(t).query),name:"channel"},"show-close-button":"",onClose:p},null,8,["subtitle","subtitle-to"])):$("",!0),c("div",Qs,[f(I,{message:l(i),"above-message":null,"channel-id":((C=l(a))==null?void 0:C.id)||"",style:{margin:"16px 0"},"id-ref":"thread","hide-date-rule":"","hide-replies":""},null,8,["message","channel-id"]),Zs,c("div",Xs,[c("small",null,k(l(u).length)+" Repl"+k(l(u).length===1?"y":"ies"),1)]),(h(!0),_(V,null,Q(l(u),(M,U)=>{var w;return h(),S(I,{key:M.id,message:M,"above-message":m(U),"channel-id":(w=l(a))==null?void 0:w.id,class:F({last:U===l(u).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","channel-id","class"])}),128))])],64)}}});var tn=D(en,[["__scopeId","data-v-1a67ebd7"]]);const sn={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},nn=["src"],an=L({setup(e){const t=H(),n=E(!1),o="mrfrase3",s="Support me on Buy me a coffee!",r=b(()=>`https://www.buymeacoffee.com/widget/page/${o}?description=${encodeURIComponent(s)}&color=${encodeURIComponent("#5F7FFF")}`);return st(()=>{!t.coffeeMenu||(n.value=!0)}),(a,i)=>{const u=O;return h(),S(l(G),{placement:"top",class:"coffee-pop",show:l(t).coffeeMenu},{content:R(()=>[n.value||l(t).coffeeMenu?(h(),_("iframe",{key:0,src:l(r),title:"Buy me a coffee",class:"bmc-iframe"},null,8,nn)):$("",!0)]),default:R(()=>[c("div",{class:"coffee-btn",onClick:i[0]||(i[0]=p=>l(t).coffeeMenu=!l(t).coffeeMenu)},[j(f(u,{icon:"mdi:close"},null,512),[[A,l(t).coffeeMenu]]),j(c("img",sn,null,512),[[A,!l(t).coffeeMenu]])])]),_:1},8,["show"])}}});var on=D(an,[["__scopeId","data-v-5dfad6fe"]]);const rn=e=>(K("data-v-2e3dce46"),e=e(),J(),e),ln={class:"sidebar-footer"},cn=rn(()=>c("div",{class:"spacer"},null,-1)),un={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},dn=L({setup(e){const t=H();E(!1);const n=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(o,s)=>{const r=O;ee("router-link");const a=on;return h(),_("div",ln,[l(t).binarySource==="upload"?(h(),S(l(G),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:R(()=>[f(r,{class:"action-icon",icon:"mdi:download",onClick:s[0]||(s[0]=i=>l(t).downloadBinary())})]),_:1})):$("",!0),f(l(G),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:R(()=>[f(r,{class:"action-icon",icon:"mdi:upload",onClick:n})]),_:1}),$("",!0),$("",!0),cn,f(l(G),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:R(()=>[c("a",un,[f(r,{class:"action-icon",icon:"mdi:github"})])]),_:1}),f(a)])}}});var hn=D(dn,[["__scopeId","data-v-2e3dce46"]]);const je=e=>(K("data-v-288df464"),e=e(),J(),e),mn={class:"channel-list"},pn=je(()=>c("div",{class:"title"}," Channels ",-1)),_n=je(()=>c("span",{style:{"padding-right":"8px"}},"#",-1)),gn=L({setup(e){const t=H(),n=ne(),o=s=>n.params.channelId===s.id;return(s,r)=>{const a=ee("router-link");return h(),_("div",mn,[pn,c("ul",null,[(h(!0),_(V,null,Q(l(t).channels,i=>(h(),_("li",{key:i.id},[f(a,{to:{params:{channelId:i.id},query:q({},l(n).query),name:"channel"},class:F({link:!0,active:o(i)})},{default:R(()=>[_n,Y(" "+k(i.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var vn=D(gn,[["__scopeId","data-v-288df464"]]);const fn={class:"search-text"},yn={key:0,class:"search-text-prefix"},bn={key:0,class:"search-text-item-text"},$n=["src"],xn=L({props:{content:null,prefix:null,large:{type:Boolean}},setup(e){const t=e,n=H(),o=r=>{var u;const[a,i]=(u=r.attrs)==null?void 0:u.id.split(":");if(a==="from"||a==="mentions")return`${a}:@${n.users[i].name}`;if(a==="in"){const p=n.channels.find(m=>m.id===i);return`${a}:#${p.name}`}return""},s=r=>{var u,p,m;const[a,i]=(u=r.attrs)==null?void 0:u.id.split(":");return a==="from"||a==="mentions"?t.large?(p=n.users[i])==null?void 0:p.image72:(m=n.users[i])==null?void 0:m.image24:""};return(r,a)=>(h(),_("span",fn,[t.prefix?(h(),_("span",yn,k(t.prefix),1)):$("",!0),(h(!0),_(V,null,Q(t.content,(i,u)=>(h(),_("span",{key:u,class:"search-text-item"},[i.type==="text"?(h(),_("span",bn,k(i.text),1)):i.type==="mention"?(h(),_("span",{key:1,class:F({"search-text-item-mention":!0,"with-img":!!s(i),large:t.large})},[s(i)?(h(),_("img",{key:0,src:s(i),alt:""},null,8,$n)):$("",!0),Y(" "+k(o(i)),1)],2)):$("",!0)]))),128))]))}});var kn=D(xn,[["__scopeId","data-v-137baf4c"]]);const wn=nt.create({name:"oneLine",topNode:!0,content:"block",addKeyboardShortcuts(){return{Enter:()=>{var t,n;const e=(n=(t=this.editor.getJSON().content)==null?void 0:t[0])==null?void 0:n.content;return(e==null?void 0:e.length)?(this.options.onEnter(e),!0):!1}}}}),In=(e="")=>at(e,{allowedTags:[]}),Cn=(e="",t="~-~",n="hightlight")=>{const o=In(e),s=t.replace(/[^\w- ]/g,"").trim();if(!s)return o;const r=new RegExp(s,"gi");return o.replace(r,a=>`<span class="${n}">${a}</span>`)};const Mn={class:"mention-items"},Ln=["id","onClick","onMouseenter"],Sn={class:"mention-action"},Un=["src"],Bn={key:1},Rn=["innerHTML"],En={key:1,class:"mention-item"},Dn=L({props:{type:null,items:null,command:null},setup(e,{expose:t}){const n=e,o=H(),s=E(0),r=b(()=>{if(n.type!=="users")return n.items.map(y=>({action:"In",id:`in:${y.id}`,channel:y}));const d=[];return n.items.forEach(y=>{d.push({user:y,action:"From",id:`from:${y.id}`}),d.push({user:y,action:"Mentions",id:`mentions:${y.id}`})}),d}),a=b(()=>r.value.length),i=d=>{const y=r.value[d];y&&n.command(y)},u=()=>{s.value=(s.value+a.value-1)%a.value},p=()=>{s.value=(s.value+1)%a.value},m=()=>{i(s.value)},v=({event:d})=>d.key==="ArrowUp"?(u(),!0):d.key==="ArrowDown"?(p(),!0):d.key==="Enter"?(m(),!0):!1,g=d=>{var y,I;return(n.type==="users"?(y=d.user)==null?void 0:y.id:(I=d.channel)==null?void 0:I.id)||d.id};return ge(n.items,()=>{s.value=0}),ge(s,()=>{var y;const d=r.value[s.value];(y=document.getElementById(`mention-item-${d.action}-${g(d)}`))==null||y.scrollIntoView({block:"nearest"})}),t({onKeyDown:v}),(d,y)=>(h(),_("div",Mn,[l(a)?(h(!0),_(V,{key:0},Q(l(r),(I,B)=>{var x,C,M;return h(),_("button",{id:`mention-item-${I.action}-${g(I)}`,key:B,class:F(["mention-item",{"is-selected":B===s.value,"action-width":n.type==="users"}]),onClick:U=>i(B),onMouseenter:U=>s.value=B},[c("span",Sn,k(I.action)+":",1),((x=I.user)==null?void 0:x.image24)?(h(),_("img",{key:0,src:I.user.image24,alt:"",class:"mention-item-img"},null,8,Un)):$("",!0),n.type==="channels"?(h(),_("span",Bn,"#")):$("",!0),c("span",{innerHTML:l(Cn)(((C=I.user)==null?void 0:C.name)||((M=I.channel)==null?void 0:M.name),l(o).lastMentionQuery,"mention-hl")},null,8,Rn)],42,Ln)}),128)):(h(),_("button",En," No result "))]))}});var Hn=D(Dn,[["__scopeId","data-v-89900674"]]),Ae=(e,t="users")=>{const n=H();return{char:e,items:({query:o})=>t==="users"?n.searchUsers(o).slice(0,30):n.searchChannels(o).slice(0,30),pluginKey:new ot(t),render:()=>{let o,s;return{onStart:r=>{o=new rt(Hn,{props:le(q({},r),{type:t}),editor:r.editor}),s=it("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:o.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",sticky:!0,plugins:[lt]})},onUpdate(r){o.updateProps(le(q({},r),{type:t})),s[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var a;return r.event.key==="Escape"?(s[0].hide(),!0):(a=o.ref)==null?void 0:a.onKeyDown(r,t)},onExit(){s[0].destroy(),o.destroy()}}}}};const Tn={key:0,class:"search-input"},Nn=L({emits:["close"],setup(e,{expose:t,emit:n}){const o=H(),s=_e(),r=({node:u})=>{const[p,m]=u.attrs.id.split(":");if(p==="from"||p==="mentions")return`${p}:@${o.users[m].name}`;if(p==="in"){const v=o.channels.find(g=>g.id===m);return`${p}:#${v.name}`}return""},a=new ct({autofocus:!0,extensions:[wn.configure({onEnter:u=>{s.push({path:"/search",query:{query:JSON.stringify(u)}}),n("close")}}),ut,dt,ht.configure({placeholder:"Type @ or # to search for users or channels"}),Be.configure({HTMLAttributes:{class:"search-mention"},renderLabel:r,suggestion:Ae("@","users")}),Be.configure({HTMLAttributes:{class:"search-mention"},renderLabel:r,suggestion:Ae("#","channels")})],content:o.activeSearch,onUpdate(){o.activeSearch=a.getJSON()}}),i=()=>{a.commands.clearContent(),o.activeSearch=a.getJSON()};return ge(o.activeSearch,()=>{JSON.stringify(a.getJSON())!==JSON.stringify(o.activeSearch)&&a.commands.setContent(o.activeSearch,!1)}),mt(()=>{a.destroy()}),t({editor:a,clearContent:i}),(u,p)=>l(a)?(h(),_("div",Tn,[f(l(pt),{editor:l(a)},null,8,["editor"])])):$("",!0)}});var jn=D(Nn,[["__scopeId","data-v-29a93214"]]);const An={class:"search-area"},Wn={class:"search-box-icon main-icon"},Pn=L({emits:["close"],setup(e,{expose:t,emit:n}){const o=H(),s=E(null);return t({searchInput:s}),(r,a)=>{var u,p,m,v;const i=O;return h(),_("div",{class:"search-input-spash",onClick:a[4]||(a[4]=g=>n("close"))},[c("div",{class:"search-input-container",onClick:a[3]||(a[3]=ue(()=>{},["stop"]))},[c("div",An,[c("div",Wn,[f(i,{icon:"mdi:search"})]),f(jn,{ref_key:"searchInput",ref:s,onClose:a[0]||(a[0]=g=>n("close"))},null,512),j(c("button",{class:"clear-btn",onClick:a[1]||(a[1]=g=>{var d;return(d=s.value)==null?void 0:d.clearContent()})}," Clear ",512),[[A,(v=(m=(p=(u=l(o).activeSearch)==null?void 0:u.content)==null?void 0:p[0])==null?void 0:m.content)==null?void 0:v.length]]),c("button",{class:"close-icon",onClick:a[2]||(a[2]=g=>n("close"))},[f(i,{icon:"mdi:close"})])])])])}}});var On=D(Pn,[["__scopeId","data-v-a8da35e0"]]);const qn=e=>(K("data-v-08cc159a"),e=e(),J(),e),Vn={class:"navbar"},Fn={key:1},Yn=qn(()=>c("div",{class:"spacer"},null,-1)),zn={class:"search-icon"},Kn=L({setup(e){const t=H(),n=E(!1);return(o,s)=>{var u,p,m,v;const r=On,a=kn,i=O;return h(),_(V,null,[n.value?(h(),S(r,{key:0,onClose:s[0]||(s[0]=g=>n.value=!1)})):$("",!0),c("div",Vn,[c("button",{class:"searchbar",onClick:s[1]||(s[1]=g=>n.value=!0)},[((v=(m=(p=(u=l(t).activeSearch)==null?void 0:u.content)==null?void 0:p[0])==null?void 0:m.content)==null?void 0:v.length)?(h(),S(a,{key:0,content:l(t).activeSearch.content[0].content,prefix:"Search: "},null,8,["content"])):(h(),_("span",Fn,"Search Export")),Yn,c("span",zn,[f(i,{icon:"mdi:search"})])])])],64)}}});var Jn=D(Kn,[["__scopeId","data-v-08cc159a"]]);const Gn={class:"checkbox-text"},Qn={class:"checkbox-label"},Zn={class:"checkbox-hint"},Xn=L({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=()=>{t("update:modelValue",!n.modelValue)};return(s,r)=>{const a=O;return h(),_("div",{class:"checkbox-wrap",onClick:o},[f(a,{icon:`mdi:${n.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),c("div",Gn,[c("div",Qn,[Re(s.$slots,"label",{},()=>[Y(k(n.label),1)],!0)]),c("div",Zn,[Re(s.$slots,"hint",{},()=>[Y(k(n.hint),1)],!0)])])])}}});var ea=D(Xn,[["__scopeId","data-v-690ba907"]]),ta="/assets/loading.7cbe3464.svg",We="/slax.svg";const T=e=>(K("data-v-a2919b4c"),e=e(),J(),e),sa={class:"loading-splash moving-gradient"},na=T(()=>c("img",{alt:"Loading",src:ta},null,-1)),aa=T(()=>c("br",null,null,-1)),oa=T(()=>c("br",null,null,-1)),ra=T(()=>c("br",null,null,-1)),ia=T(()=>c("div",{class:"header"},[c("h1",null,[c("img",{src:We,alt:"",style:{height:"1em","margin-right":"8px"}}),Y(" Slax Pro ")]),c("p",null,[Y("A "),c("i",null,"Free & Professional"),Y(" viewer for slack-like export content.")])],-1)),la=["onDrop","onDragover"],ca={key:0},ua=T(()=>c("strong",null,"Drop .zip file here",-1)),da=T(()=>c("br",null,null,-1)),ha=T(()=>c("small",null,"or click to select",-1)),ma=[ua,da,ha],pa={key:1},_a=T(()=>c("strong",null,"Kobe!",-1)),ga=[_a],va={key:2},fa=T(()=>c("strong",null,"File must be a .zip",-1)),ya=T(()=>c("br",null,null,-1)),ba=T(()=>c("small",null,"Please try again",-1)),$a=[fa,ya,ba],xa={class:"actions upload"},ka={class:"input-group"},wa=["onKeypress"],Ia=T(()=>c("div",{class:"spacer"},null,-1)),Ca=T(()=>c("span",null,"Load Demo Export",-1)),Ma=[Ca],La={class:"config"},Sa=T(()=>c("h2",null,"Export Preferences",-1)),Ua={class:"actions"},Ba=T(()=>c("div",{class:"spacer"},null,-1)),Ra=T(()=>c("span",null,"Process",-1)),Ea=L({setup(e){const t=H(),n=ne(),o=_e(),s=E(null),r=E(!1),a=E(!1),i=E(!1),u=E(!1),p=E(""),m=b(()=>i.value?"mdi:alert-outline":r.value?a.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),v=b(()=>i.value?!0:!(!r.value||a.value)),g=b(()=>v.value?"error":r.value?"success":""),d=U=>U?Array.from(U):[],y=U=>{var w;i.value=!1,r.value=!0,a.value=!!((w=U.dataTransfer)==null?void 0:w.types.includes("Files"))},I=()=>{i.value=!1,r.value=!1,a.value=!1},B=async U=>{var W,P;U.preventDefault();const w=(W=U.dataTransfer)!=null?W:U.target;s.value=(P=d(w.files).find(Z=>Z.type==="application/zip"))!=null?P:null,I(),i.value=!s.value,s.value&&(u.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),u.value=!1)},x=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)},C=async()=>{await t.loadBinary("/demo.bin.zip")},M=async()=>{!p.value||await t.loadBinary(p.value)};return Ee(async()=>{var w,W;await o.isReady();const U=((w=n.query)==null?void 0:w.exportUrl)||t.exportUrl;if(await t.loadBinary(U),(W=n.query)==null?void 0:W.exportUrl){const P=q({},n.query);delete P.exportUrl,o.replace({query:P})}}),(U,w)=>{var Z,ie;const W=O,P=ea;return j((h(),_("div",sa,[j(c("div",null,[na,aa,oa,c("strong",null,k(l(t).status),1),ra,l(t).status.startsWith("Error:")?(h(),_("button",{key:0,onClick:w[0]||(w[0]=N=>l(t).exportNeeded=!0)}," Back ")):$("",!0)],512),[[A,!l(t).exportNeeded||u.value]]),j(c("div",null,[j((h(),_("input",{key:(Z=s.value)==null?void 0:Z.name,ref:"fileInput",type:"file",accept:".zip",onChange:B},null,32)),[[A,!1]]),ia,j(c("div",{class:F(`drop-area ${l(g)}`),onDrop:ue(B,["prevent"]),onDragenter:y,onDragover:ue(y,["prevent"]),onDragleave:I,onClick:w[1]||(w[1]=N=>U.$refs.fileInput.click())},[f(W,{class:"zip-icon",icon:l(m)},null,8,["icon"]),!l(v)&&!r.value?(h(),_("div",ca,ma)):l(v)?(h(),_("div",va,$a)):(h(),_("div",pa,ga))],42,la),[[A,!s.value]]),j(c("div",xa,[c("div",ka,[j(c("input",{"onUpdate:modelValue":w[2]||(w[2]=N=>p.value=N),type:"text",placeholder:"Use Hosted Binary URL",onKeypress:_t(ue(M,["prevent"]),["enter"])},null,40,wa),[[gt,p.value]]),c("div",null,[f(l(G),{content:"Fetch Binary",placement:"top",hover:"",arrow:""},{default:R(()=>[c("button",{class:"btn btn-icon",onClick:M},[f(W,{icon:"mdi:arrow-right-thick"})])]),_:1})])]),Ia,c("button",{class:"btn btn-text",onClick:C},Ma)],512),[[A,!s.value]]),j(c("div",La,[Sa,c("span",null,[f(W,{icon:"mdi:folder-zip-outline"}),c("strong",null,k((ie=s.value)==null?void 0:ie.name),1)]),f(P,{modelValue:l(t).exportConfig.preferDisplayName,"onUpdate:modelValue":w[3]||(w[3]=N=>l(t).exportConfig.preferDisplayName=N),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),f(P,{modelValue:l(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":w[4]||(w[4]=N=>l(t).exportConfig.hideChannelMessages=N),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),f(P,{modelValue:l(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":w[5]||(w[5]=N=>l(t).exportConfig.skipArchivedChannels=N),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),f(P,{modelValue:l(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":w[6]||(w[6]=N=>l(t).exportConfig.removeLinkPreviews=N),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),c("div",Ua,[c("button",{class:"btn btn-text",onClick:w[7]||(w[7]=N=>s.value=null)}," Back "),Ba,c("button",{class:"btn",onClick:x},[f(W,{icon:"mdi:cog"}),Ra])])],512),[[A,s.value]])],512),[[A,l(t).exportNeeded&&!u.value]])],512)),[[A,!l(t).dataLoaded]])}}});var Da=D(Ea,[["__scopeId","data-v-a2919b4c"]]);const Ha=c("h1",null,[c("img",{src:We,alt:"",style:{height:"1em","margin-right":"8px"}}),Y(" Slax Pro ")],-1),Ta=L({setup(e){const t=H(),n=ne(),o=_e(),s=b(()=>{var i;return(i=n.query)==null?void 0:i.threadRef}),r=()=>{t.leftSidebar=!1,o.push({query:q({},Ue(n.query,["threadRef"]))})},a=vt(()=>t.onWidthChange(),100);return Ee(()=>window.addEventListener("resize",a)),ft(()=>window.removeEventListener("resize",a)),(i,u)=>{const p=Da,m=Jn,v=ee("router-link"),g=vn,d=hn,y=tn,I=ee("router-view");return h(),_(V,null,[f(p),f(m),c("div",{class:F({sidebar:!0,closed:!l(t).leftSidebar})},[f(v,{class:"no-link",to:{name:"home",params:{},query:q({},l(n).query)}},{default:R(()=>[Ha]),_:1},8,["to"]),f(g),f(d)],2),c("div",{class:F({"thread-sidebar":!0,closed:!l(s)})},[f(y)],2),f(yt,{name:"fade"},{default:R(()=>[j(c("div",{class:"sidebar-overlay",onClick:u[0]||(u[0]=B=>r())},null,512),[[A,l(t).leftSidebar||l(s)]])]),_:1}),c("div",{class:F({main:!0,"offset-right":!!l(s)})},[f(I)],2)],64)}}});window.Buffer=bt.Buffer;$t(Ta).directive("observe-visibility",{beforeMount:(e,t,n)=>{n.context=t.instance,be.bind(e,t,n)},updated:be.update,unmounted:be.unbind}).use(xt()).use(Ct).mount("#app");export{Js as C,D as _,O as a,Ps as b,kn as c,H as u};
