var Oe=Object.defineProperty,Ve=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Ie=(e,t,s)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,P=(e,t)=>{for(var s in t||(t={}))qe.call(t,s)&&Ie(e,s,t[s]);if(we)for(var s of we(t))Ye.call(t,s)&&Ie(e,s,t[s]);return e},se=(e,t)=>Ve(e,Fe(t));import{c as ze,a as Je,T as Ke,A as le,d as Ge,f as Qe,s as ne,b as K,e as Ze,R as Xe,g as L,o as h,h as S,m as Ce,u as i,I as et,i as ae,j as f,r as Z,w as H,k as l,l as p,n as z,F as A,t as I,p as $,q,v as Y,E as tt,x as J,y as O,z as X,B as ce,C as x,D,G as U,H as N,J as W,K as pe,L as ue,M as Me,N as st,O as nt,P as at,Q as ot,V as rt,S as it,U as lt,W as ct,X as ut,Y as dt,Z as ht,_ as Le,$ as mt,a0 as pt,a1 as Se,a2 as Be,a3 as _t,a4 as gt,a5 as vt,a6 as ft,a7 as yt,a8 as _e,a9 as $t}from"./vendor.ce23a725.js";const bt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};bt();const xt="modulepreload",He={},kt="/",de=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${kt}${r}`,r in He)return;He[r]=!0;const n=r.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":xt,n||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),n)return new Promise((c,u)=>{a.addEventListener("load",c),a.addEventListener("error",u)})})).then(()=>t())};var wt=ze({history:Je(),routes:[{path:"/",name:"home",component:()=>de(()=>import("./Home.37027f30.js"),[])},{path:"/search",name:"search",component:()=>de(()=>import("./Search.7833946e.js"),["assets/Search.7833946e.js","assets/Search.2f23ca79.css","assets/vendor.ce23a725.js"])},{path:"/channel/:channelId",name:"channel",component:()=>de(()=>import("./Channel.3152d8bc.js"),["assets/Channel.3152d8bc.js","assets/Channel.ff76015b.css","assets/vendor.ce23a725.js"])}]}),Re=new Ke({users:[{id:"string",name:"string","image?":"string","image72?":"string","image24?":"string"}],channels:[{id:"string",name:"string",isArchived:"boolean",isGeneral:"boolean","topic?":"string","purpose?":"string","pinnedMessageIds?":["uint"],messages:[{id:"uint",type:"string","userId?":"string",channelId:"string",text:"string",ts:"uint",tags:["string"],isEdited:"boolean","editedAt?":"uint","threadId?":"uint","replyCount?":"uint","replyUsersCount?":"uint","replyUserIds?":["string"],"replyMessageIds?":["uint"],"latestReply?":"uint","reactions?":[{name:"string",count:"uint",userIds:["string"]}],"files?":[{id:"string",name:"string",mimeType:"string",src:"string","width?":"uint","height?":"uint"}],"attachments?":[{"serviceName?":"string","serviceIcon?":"string","title?":"string","titleUrl?":"string","text?":"string","thumbUrl?":"string","thumbWidth?":"uint","thumbHeight?":"uint","imageUrl?":"string","imageWidth?":"uint","imageHeight?":"uint","authorName?":"string","authorUrl?":"string","videoHtml?":"string","videoWidth?":"uint","videoHeight?":"uint","quoteId?":"uint","channelId?":"string"}]}]}]});le.init({workerUrl:"/libarchive.js/worker-bundle.js"});const ge=async(e,t)=>{const s=await e[t].text();return JSON.parse(s)},G=e=>Math.floor(Number(e)*1e3),De=e=>e<600?"xs":e<960?"sm":e<1264?"md":"lg",R=Ge("store",{state:()=>({dataLoaded:!1,exportNeeded:!1,binaryData:null,binarySource:"download",status:"Loading...",users:{},channels:[],messagesById:{},exportConfig:{preferDisplayName:!0,hideChannelMessages:!0,skipArchivedChannels:!0,removeLinkPreviews:!1},coffeeMenu:!1,leftSidebar:!1,deviceWidth:window.innerWidth,deviceType:De(window.innerWidth),activeSearch:{type:"oneLine",content:[{type:"paragraph"}]},lastMentionQuery:"",messageIndex:new Qe.exports.Document({document:{id:"id",tag:"tag",index:"content"},worker:!0,charset:"latin:advanced"})}),actions:{async loadBinary(){try{if(this.binaryData)this.binarySource="upload";else{this.status="Downloading...";const o=await fetch("/export.bin.zip");if(!o.ok){this.exportNeeded=!0,this.status="Waiting for export";return}const u=(await(await le.open(new File([await o.arrayBuffer()],"export.bin.zip"))).extractFiles())["export.bin"];this.binaryData=Buffer.from(await u.arrayBuffer()),this.binarySource="download"}this.status="Extracting...";const{channels:e,users:t}=await Re.decode(this.binaryData);this.channels=e.map(o=>{var a;return se(P({},o),{rootMessages:(a=o.messages)==null?void 0:a.filter(c=>!c.threadId)})});const s={};t.forEach(o=>{s[o.id]=o}),this.users=s,this.status="Indexing...";const r=[],n={};e.forEach(o=>{o.messages.forEach(a=>{a.type.startsWith("bot")||!a.userId||(r.push({id:`${a.channelId}-${a.id}`,tag:a.tags,content:a.text.replace(/(<[^>]+>)|\*|_|•|◦|▪︎/g,"")}),n[`${a.channelId}-${a.id}`]=a)})}),ne(r,o=>Number(o.id.split("-")[1])*-1).forEach(o=>this.messageIndex.add(o)),this.messagesById=n,this.status="Done",this.dataLoaded=!0}catch(e){this.status=`Error: ${e.message}`,console.error(e)}},processUser(e){var t,s,r,n,o,a,c,u;return{id:e.id,name:(this.exportConfig.preferDisplayName?(t=e.profile)==null?void 0:t.display_name:(s=e.profile)==null?void 0:s.real_name)||((r=e.profile)==null?void 0:r.real_name)||e.name||"",image:((n=e.profile)==null?void 0:n.image_1024)||((o=e.profile)==null?void 0:o.image_512)||((a=e.profile)==null?void 0:a.image_192),image24:(c=e.profile)==null?void 0:c.image_24,image72:(u=e.profile)==null?void 0:u.image_72}},processMessage(e,t){var n,o,a,c,u,g,m,v,_;const s=[],r=e.subtype||e.type||"message";return!(r==null?void 0:r.startsWith("bot"))&&e.user&&(s.push(`in:${t.id}`),e.user&&s.push(`from:${e.user}`),(n=e.text.match(/<@(U[\w]+)>/g))==null||n.forEach(d=>{const y=d.replace(/<@(U[\w]+)>/,"$1");s.push(`mentions:${y}`)})),{id:G(e.ts),type:r,text:((o=e.text)==null?void 0:o.trim())||"",userId:e.user,channelId:t.id,ts:G(e.ts),tags:s,isEdited:!!e.edited,editedAt:((a=e.edited)==null?void 0:a.ts)?G(e.edited.ts):void 0,threadId:e.parent_user_id?G(e.thread_ts):void 0,replyCount:e.reply_count||((c=e.replies)==null?void 0:c.length),replyUsersCount:e.reply_users_count||((u=e.replies_users)==null?void 0:u.length),latestReply:e.latest_reply?G(e.latest_reply):void 0,replyMessageIds:(g=e.replies)==null?void 0:g.map(d=>G(d.ts)),replyUserIds:e.reply_users,reactions:(m=e.reactions)==null?void 0:m.map(d=>({name:d.name,count:d.count,userIds:d.users})),files:(v=e.files)==null?void 0:v.map(d=>({id:d.id,name:d.name||d.filetype?`${d.id}.${d.filetype}`:"Untitled",mimeType:d.mimetype,src:d.url_private,width:d.original_w,height:d.original_h})).filter(d=>d.src&&d.mimeType&&d.id),attachments:(_=e.attachments)==null?void 0:_.map(d=>({serviceName:d.service_name,serviceIcon:d.service_icon,title:d.title,titleUrl:d.title_link,text:d.text,thumbUrl:d.thumb_url,thumbWidth:d.thumb_width,thumbHeight:d.thumb_height,imageUrl:d.image_url,imageWidth:d.image_width,imageHeight:d.image_height,authorName:d.author_name,authorUrl:d.author_link,videoHtml:d.video_html,videoWidth:d.video_html_width,videoHeight:d.video_html_height,quoteId:d.ts?G(d.ts):void 0,channelId:d.channel_id})).filter(d=>!!d.quoteId||!this.exportConfig.removeLinkPreviews)}},processChannel(e){var t,s,r;return{id:e.id,name:e.name,isArchived:e.is_archived,isGeneral:e.is_general,topic:(t=e.topic)==null?void 0:t.value,purpose:(s=e.purpose)==null?void 0:s.value,messages:((r=e.messages)==null?void 0:r.map(n=>this.processMessage(n,e)))||[]}},async loadExport(e){try{this.exportNeeded=!1,this.status="Extracting...";const s=await(await le.open(e)).extractFiles();this.status="Processing Channels...";const r=await ge(s,"channels.json"),o=(await ge(s,"users.json")).map(c=>this.processUser(c)),a=r.filter(c=>!c.is_archived||!this.exportConfig.skipArchivedChannels).map(c=>this.processChannel(c));await a.reduce(async(c,u,g)=>{await c,this.status=`Processing Messages for #${u.name} (${g+1}/${a.length})`;const m=[];await Promise.all(Object.keys(s[u.name]).map(async v=>{const _=await ge(s[u.name],v);m.push(..._.filter(d=>{var y;return!((y=d.subtype)==null?void 0:y.startsWith("channel_"))||!this.exportConfig.hideChannelMessages}).map(d=>this.processMessage(d,u)))})),u.messages=ne(m,"ts")},Promise.resolve()),this.status="Making Binary...",this.binaryData=await Re.encode({channels:a,users:o})}catch(t){this.status=`Error: ${t.message}`,console.error(t)}},async checkIfBinZip(e){var t;try{this.status="Checking Files...";const r=await(await le.open(e)).getFilesObject();if(!r["export.bin"])return!1;const n=await((t=r["export.bin"])==null?void 0:t.extract());return this.binaryData=Buffer.from(await n.arrayBuffer()),this.exportNeeded=!1,this.loadBinary(),!0}catch{return!1}},async downloadBinary(){if(!this.binaryData)return;const{default:e}=await de(()=>import("./jszip.min.e8c3367b.js").then(function(a){return a.j}),["assets/jszip.min.e8c3367b.js","assets/vendor.ce23a725.js"]),t=new e,s=new Blob([this.binaryData],{type:"application/octet-stream"});t.file("export.bin",s);const r=await t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download="export.bin.zip",o.click(),URL.revokeObjectURL(n)},toggleSidebar(){this.leftSidebar=!this.leftSidebar},onWidthChange(){this.deviceWidth=window.innerWidth,this.deviceType=De(this.deviceWidth)},searchUsers(e){return this.lastMentionQuery=e,ne(Object.values(this.users).filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},searchChannels(e){return this.lastMentionQuery=e,ne(this.channels.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),[t=>t.name.toLowerCase().indexOf(e.toLowerCase()),t=>t.name.toLowerCase()])},async searchMessages(e,t=50,s=0){var u,g;let r="";const n=[];typeof e=="string"?((u=e.match(/((mentions)|(from)|(in)):\w+/g))==null||u.forEach(m=>{n.push(m)}),r=e.replace(/((mentions)|(from)|(in)):\w+/g,"")):e.forEach(m=>{var v,_;m.type==="text"?r+=m.text:m.type==="mention"&&((v=m.attrs)==null?void 0:v.id)&&n.push((_=m.attrs)==null?void 0:_.id)}),r=r.replace(/(\s{2,})|\+/g," ").trim()||"";let o="and";if(n.filter(m=>m.startsWith("from:")).length>1&&(o="or"),n.filter(m=>m.startsWith("in:")).length>1&&(o="or"),!r&&!n.length)return[];if(!r){const m=[];return Object.values(this.messagesById).forEach(v=>{n[o==="and"?"every":"some"](_=>v.tags.includes(_))&&m.push(v)}),ne(m,v=>v.ts*-1).slice(s,s+t)}return(((g=(await this.messageIndex.searchAsync(P({query:r,limit:t,offset:s},n.length?{index:"content",tag:n,bool:o}:{})))[0])==null?void 0:g.result)||[]).map(m=>this.messagesById[m])}}});K.extend(Ze);K.extend(Xe);const j=L({setup(e){return(t,s)=>(h(),S(i(et),Ce(t.$attrs,{class:"icon"}),null,16))}});var B=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s};const It=e=>(q("data-v-72abe67b"),e=e(),Y(),e),Ct={class:"user-avatars"},Mt={class:"replies-count"},Lt={class:"replies-count-text"},St={class:"replies-info"},Bt={class:"last-reply"},Ht=It(()=>l("span",{class:"cta"}," View thread ",-1)),Rt={class:"chevron"},Dt=L({props:{message:null},setup(e){const t=e,s=R(),r=ae(),n=f(()=>{var u;let c=5;return s.deviceType==="sm"&&(c=3),s.deviceType==="xs"&&(c=1),((u=t.message.replyUserIds)==null?void 0:u.map(g=>{const m=s.users[g];return{src:m.image24||m.image72,alt:m.name}}).splice(0,c))||[]}),o=f(()=>K(t.message.latestReply)),a=f(()=>`${r.params.channelId}-${t.message.id}`);return(c,u)=>{const g=j,m=Z("router-link");return h(),S(m,{to:{query:{threadRef:i(a)}},class:"replies-btn"},{default:H(()=>[l("div",Ct,[(h(!0),p(A,null,z(i(n),(v,_)=>(h(),p("img",Ce({key:_},v),null,16))),128))]),l("div",Mt,[l("span",Lt,I(e.message.replyCount)+" replies ",1)]),l("div",St,[l("span",Bt," Last reply "+I(i(o).fromNow()),1),Ht]),l("div",Rt,[$(g,{icon:"mdi:chevron-right"})])]),_:1},8,["to"])}}});var Et=B(Dt,[["__scopeId","data-v-72abe67b"]]);const oe=new tt,Q="google";oe.img_set=Q;oe.img_sets[Q].path=`https://cdn.jsdelivr.net/npm/emoji-datasource-${Q}@7.0.2/img/${Q}/64/`;oe.img_sets[Q].sheet=`https://cdn.jsdelivr.net/npm/emoji-datasource-${Q}@7.0.2/img/${Q}/sheets/64.png`;const Tt=e=>(q("data-v-73aab79a"),e=e(),Y(),e),Ut={class:"react-chip"},Nt=["innerHTML"],jt={class:"react-count"},At={class:"react-popper-content"},Wt=["src","alt"],Pt=Tt(()=>l("br",null,null,-1)),Ot={class:"names"},Vt=O(" reacted with "),Ft=L({props:{react:null},setup(e){const t=e,s=R(),r=f(()=>`:${t.react.name}:`),n=f(()=>oe.replace_colons(r.value)),o=f(()=>{var c;return(c=n.value.match(/https?:\/\/[^)]+/))==null?void 0:c[0]}),a=f(()=>{let c=t.react.userIds.map((u,g)=>{const m=s.users[u];let v="";return g!==0&&g===t.react.userIds.length-1&&(v="and "),`${v}${m==null?void 0:m.name}`}).filter(Boolean).sort().slice(0,10).join(", ");return t.react.userIds.length>10&&(c+=` +${t.react.userIds.length-10} more`),c});return(c,u)=>(h(),S(i(J),{placement:"top",hover:"",arrow:""},{content:H(()=>[l("div",At,[l("img",{src:i(o),alt:e.react.name},null,8,Wt),Pt,l("strong",Ot,I(i(a)),1),Vt,l("strong",null,I(i(r)),1)])]),default:H(()=>[l("div",Ut,[l("span",{innerHTML:i(n)},null,8,Nt),l("span",jt,I(e.react.count),1)])]),_:1}))}});var qt=B(Ft,[["__scopeId","data-v-73aab79a"]]);const Yt=["src"],zt=["href"],Jt=["src","alt"],Kt={key:0,class:"file-name"},Gt=L({props:{file:null,maxWidth:null,maxHeight:null},setup(e){const t=e,s=f(()=>t.file.mimeType.split("/")[0]),r=f(()=>t.file.src),n=f(()=>{if(!t.file.width||!t.file.height||!t.maxWidth)return{};const o=t.maxWidth,a=t.maxHeight||360,c=t.file.width,u=t.file.height,g=c/u;return{height:`${Math.min(g>1?o/g:a,u)}px`}});return(o,a)=>{const c=j;return h(),p("div",{class:"file-preview",style:X(e.maxHeight?{maxHeight:`${e.maxHeight}px`}:{})},[i(s)==="video"?(h(),p("video",{key:0,src:i(r),controls:"",style:X(i(n))},null,12,Yt)):(h(),p("a",{key:1,href:i(r),target:"_blank",onClick:a[0]||(a[0]=ce(()=>{},["stop"]))},[i(s)==="image"?(h(),p("img",{key:0,src:i(r),alt:t.file.name,style:X(i(n))},null,12,Jt)):(h(),p("div",{key:1,style:X(e.maxHeight?{height:`${e.maxHeight}px`,width:`${e.maxHeight}px`}:{}),class:"unknown-preview"},[$(c,{icon:"mdi:file-download-outline",style:{"font-size":"48px"}}),!e.maxHeight||e.maxHeight>150?(h(),p("div",Kt,I(t.file.name),1)):x("",!0)],4))],8,zt))],4)}}});var Ee=B(Gt,[["__scopeId","data-v-5c3a5f50"]]);const V=(e,t)=>e.split(t)[0].length,he={"*":"---escape-star---",_:"---escape-underscore---","~":"---escape-tilde---",":":"---escape-colon---"},re=e=>Object.keys(he).reduce((t,s)=>t.replaceAll(s,he[s]),e),Qt=e=>Object.keys(he).reduce((t,s)=>t.replaceAll(he[s],s),e),ee=/(-|\* |•|◦|▪︎)/,te=/(\d+\.)/,Zt=(e,t,s)=>Qt(e.trim().replace(/((\n|^)\s*(-|\* |•|◦|▪︎)[^\n]+)+/g,r=>{const n=r.split(`
`).filter(Boolean);return n.map((o,a)=>{let c="";const u=n[a-1],g=a===0,m=a===n.length-1;return u&&V(u,ee)!==V(o,ee)&&(c+="</ul>"),(g||V(u,ee)!==V(o,ee))&&(c+=`<ul class="formatter-ul" data-indent="${Math.round(V(o,ee)/4)}">`),c+=`<li>${o.split(ee)[2].trim()}</li>`,m&&(c+="</ul>"),c}).join("")}).replace(/((\n|^)\s*(\d+\.)[^\n]+)+/g,r=>{const n=r.split(`
`).filter(Boolean);return n.map((o,a)=>{var v,_;let c="";const u=n[a-1],g=a===0,m=a===n.length-1;return u&&V(u,te)!==V(o,te)&&(c+="</ul>"),(g||V(u,te)!==V(o,te))&&(c+=`<ul class="formatter-ol" data-indent="${Math.round(V(o,te)/4)}">`),c+=`<li data-num="${(_=(v=`${o}`.match(/(\d+\.)/))==null?void 0:v[0])!=null?_:`${a+1}.`}">${o.split(te)[2].trim()}</li>`,m&&(c+="</ul>"),c}).join("")}).replace(/((\n|^)(>)[^\n]+)+\n?/g,r=>`<blockquote class="formatter-bq">${r.replace(/(\n|^)(>)/g,`
`).trim()}</blockquote>`).replace(/<@(U[\w]+)\|?([^>]+)?>/g,(r,n,o)=>{var u,g;const a=t[n],c=((u=a.profile)==null?void 0:u.display_name)||((g=a.profile)==null?void 0:g.real_name)||a.name;return re(a?`<span class="formatter-mention">@${o||c}</span>`:r)}).replace(/<!([\w\^]+\|?([^>]+)?)>/g,(r,n,o)=>re(`<span class="formatter-mention">@${o||n}</span>`)).replace(/<#(C[\w\^]+)\|?([^>]+)?>/g,(r,n,o)=>{const a=s.find(c=>n.startsWith(c.id));return re(a?`<a class="formatter-mention" href="/channel/${a.id}">#${o||a.name}</a>`:r)}).replace(/<((https?:\/\/|mailto:|tel:)[^<|>]+)\|?([^<>]+)?>/g,(r,n,o,a)=>re(`<a class="formatter-link" href="${n}" target="_blank">${a||n}</a>`)).replace(/(:[^: ]+:)/gm,r=>{const n=oe.replace_colons(r);return n.includes("<span")?re(n):n}).replace(/\*([^\*]+)\*/gm,(r,n)=>`<strong>${n}</strong>`).replace(/\_([^\_]+)\_/gm,(r,n)=>`<em>${n}</em>`).replace(/\~([^\~]+)\~/gm,(r,n)=>`<del>${n}</del>`).replace(/\n/g,"<br>"));var me=(e,t,s)=>e.split("```").map((r,n)=>{if(n%2==0){const o=[],a=r.replace(/(`[^`]+`)/g,u=>(o.push(`<code class="formatter-code inline">${u.replace(/(^`)|(`$)/g,"")}</code>`),`---inline-code-${o.length-1}---`)),c=Zt(a,t,s);return o.reduce((u,g,m)=>u.replace(`---inline-code-${m}---`,g),c)}return`<pre class="formatter-code block"><code>${r}</code></pre>`}).join("");const Xt=e=>(q("data-v-47bf49ee"),e=e(),Y(),e),es={key:0,class:"attach-service"},ts=["src"],ss=["href"],ns={class:"attach-main"},as={class:"attach-content"},os=["href"],rs=["innerHTML"],is=Xt(()=>l("span",null,"View message",-1)),ls={key:0,class:"attach-thumbnail"},cs=["src"],us={key:1},ds={key:0,class:"video-actions"},hs=["href"],ms=["innerHTML"],ps=L({props:{attachment:null,msg:null},setup(e){const t=e,s=R(),r=D(null),n=D(!1),o=f(()=>t.attachment.imageUrl?{id:"1",name:"image.png",mimeType:"image/png",src:t.attachment.imageUrl,width:t.attachment.imageWidth,height:t.attachment.imageHeight}:null),a=f(()=>t.attachment.serviceIcon?`https://slack-imgs.com/?c=1&o1=wi32.he32.si&url=${encodeURIComponent(t.attachment.serviceIcon)}`:null),c=f(()=>{if(!t.attachment.thumbHeight||!t.attachment.thumbWidth)return{};const _=t.attachment.thumbWidth/t.attachment.thumbHeight,d=Math.min(360,t.attachment.thumbWidth),y=d/_;return{backgroundImage:`url(${t.attachment.thumbUrl})`,width:`${d}px`,height:`${y}px`}}),u=f(()=>{if(!t.attachment.quoteId)return null;const _=`${t.attachment.channelId}-${t.attachment.quoteId}`;return s.messagesById[_]}),g=f(()=>u.value?s.channels.find(_=>_.id===u.value.channelId):null),m=f(()=>u.value?K(u.value.ts).format("MMM Do, YYYY"):""),v=f(()=>{if(u.value){const _=s.users[u.value.userId];return{name:_.name,icon:_.image24}}return{name:t.attachment.serviceName,icon:a.value}});return(_,d)=>{var b;const y=Z("router-link"),w=j,k=Ee;return h(),p("blockquote",{ref_key:"wrapper",ref:r,class:"formatter-bq"},[i(v)?(h(),p("div",es,[i(v).icon?(h(),p("img",{key:0,src:i(v).icon,alt:""},null,8,ts)):x("",!0),O(" "+I(i(v).name)+" ",1),e.attachment.authorName&&!i(u)?(h(),p("a",{key:1,class:"attach-author",href:e.attachment.authorUrl,target:"_blank"},I(e.attachment.authorName),9,ss)):x("",!0)])):x("",!0),l("div",ns,[l("div",as,[l("a",{class:"attach-title",href:e.attachment.titleUrl,target:"_blank"},I(e.attachment.title),9,os),l("div",{class:"attach-text",innerHTML:i(me)(e.attachment.text||"",i(s).users,i(s).channels)},null,8,rs),i(u)?(h(),S(y,{key:0,class:"quote-link",to:`/channel/${i(u).channelId}?threadRef=${i(u).channelId}-${i(u).id}`},{default:H(()=>[l("span",null,"Posted in #"+I(i(g).name),1),l("span",null,I(i(m)),1),is]),_:1},8,["to"])):x("",!0)]),e.attachment.thumbUrl&&!e.attachment.videoHtml?(h(),p("div",ls,[l("img",{src:e.attachment.thumbUrl,alt:""},null,8,cs)])):x("",!0)]),e.attachment.videoHtml?(h(),p("div",us,[l("div",{class:"video-thumbnail",style:X(i(c))},[n.value?(h(),p("div",{key:1,class:"video-player",innerHTML:e.attachment.videoHtml},null,8,ms)):(h(),p("div",ds,[l("button",{class:"btn btn-icon",onClick:d[0]||(d[0]=C=>n.value=!0)},[$(w,{icon:"mdi:play-outline"})]),l("a",{class:"btn btn-icon",href:e.attachment.titleUrl,target:"_blank"},[$(w,{icon:"mdi:open-in-new"})],8,hs)]))],4)])):x("",!0),i(o)?(h(),S(k,{key:2,file:i(o),"max-width":(b=r.value)==null?void 0:b.offsetWidth,"max-height":200},null,8,["file","max-width"])):x("",!0)],512)}}});var _s=B(ps,[["__scopeId","data-v-47bf49ee"]]);const gs={class:"file-list-header"},vs={class:"file-list-header-title"},fs={class:"file-list-header-actions"},ys=L({props:{files:null,maxHeight:null},setup(e){const t=e,s=D(!1),r=D(null),n=f(()=>t.files.length===1?t.files[0].name:`${t.files.length} Files`);return(o,a)=>{const c=j,u=Ee;return h(),p("div",{ref_key:"wrapper",ref:r,class:"file-list"},[l("div",gs,[l("span",vs,I(i(n)),1),l("span",fs,[$(c,{icon:`mdi:chevron-${s.value?"right":"down"}-circle`,onClick:a[0]||(a[0]=g=>s.value=!s.value)},null,8,["icon"])])]),(h(!0),p(A,null,z(r.value?e.files:[],g=>{var m;return U((h(),S(u,{key:g.id,file:g,"max-width":(m=r.value)==null?void 0:m.offsetWidth,"max-height":e.maxHeight},null,8,["file","max-width","max-height"])),[[N,!s.value]])}),128))],512)}}});var $s=B(ys,[["__scopeId","data-v-4d4e549c"]]);const Te=e=>(q("data-v-245cd8d2"),e=e(),Y(),e),bs=["id"],xs={key:0,class:"message-list-date-wrap"},ks=Te(()=>l("hr",null,null,-1)),ws={class:"message-list-date"},Is={class:"message-actions"},Cs={class:"message-left"},Ms={key:0,class:"message-avatar"},Ls=["src"],Ss={key:1},Bs={class:"message-main"},Hs={key:0,class:"message-header"},Rs={class:"message-author"},Ds={class:"message-timestamp"},Es=["innerHTML"],Ts=Te(()=>l("span",{class:"message-edited"},"\xA0(editied)\xA0",-1)),Us={key:3,class:"message-attachments"},Ns={key:4,class:"message-reactions"},js=L({props:{message:null,aboveMessage:null,channelId:null,hideDateRule:{type:Boolean},hideReplies:{type:Boolean},smallReplies:{type:Boolean},nameDateFormat:null,idRef:null,fileMaxHeight:null},setup(e){const t=e,s=R(),r=ae();D([]);const n=D("Copy Link"),o=f(()=>{var b;return K((b=t.message)==null?void 0:b.ts)}),a=f(()=>{var M;const b=o.value.format("YYYY-MM-DD"),C=K((M=t.aboveMessage)==null?void 0:M.ts).format("YYYY-MM-DD");return!t.aboveMessage||b!==C}),c=f(()=>{var b;return!a.value&&t.message.userId===((b=t.aboveMessage)==null?void 0:b.userId)}),u=f(()=>t.message.type.startsWith("bot")?{name:"Bot",image:"/robot.png",image24:"/robot.png",image72:"/robot.png"}:s.users[t.message.userId]),g=f(()=>t.message.text.match(/^(:[+a-z0-9_-]+:)+$/i)),m=f(()=>{var b,C;return t.hideDateRule&&a.value?(b=o.value)==null?void 0:b.format(t.nameDateFormat||"Do MMM, YYYY [at] h:mm a"):(C=o.value)==null?void 0:C.format("h:mm a").toUpperCase()}),v=f(()=>`${t.idRef||"message"}-${t.message.id}`),_=f(()=>{var M;const b=r.query.threadRef||"",C=s.messagesById[b];return(C==null?void 0:C.threadId)?(M=s.messagesById[`${t.channelId}-${C.threadId}`])==null?void 0:M.id:C==null?void 0:C.id}),d=f(()=>{const b=`${r.query.threadRef||""}`.split("-")[1];return v.value===`message-${b}`||v.value===`message-${_.value}`}),y=f(()=>!t.message.threadId),w=f(()=>K(t.message.editedAt||0).format("MMM Do, YYYY [at] h:mm a")),k=()=>{const b=`${window.location.origin}/channel/${t.channelId}?threadRef=${t.channelId}-${t.message.id}`;navigator.clipboard.writeText(b),n.value="Copied!",setTimeout(()=>{n.value="Copy Link"},2e3)};return(b,C)=>{var ve,fe,ye,$e,be,xe,ke;const M=j,F=$s,E=_s,Ae=qt,We=Et;return((ve=e.message)==null?void 0:ve.id)?(h(),p("div",{key:0,id:i(v)},[i(a)&&!e.hideDateRule?(h(),p("div",xs,[ks,l("div",ws,I(i(o).format("MMMM Do, YYYY")),1)])):x("",!0),e.message?(h(),p("div",{key:1,class:W({message:!0,continued:i(c),active:i(d)})},[U(l("div",Is,[e.message.threadId?x("",!0):(h(),S(i(J),{key:0,show:n.value==="Copied!"||null,placement:"top",hover:"",arrow:""},{content:H(()=>[l("div",{class:W({"copy-link-pop-text":!0,success:n.value==="Copied!"})},I(n.value),3)]),default:H(()=>[l("button",{class:"copy-link-btn",onClick:k},[$(M,{icon:"mdi:link-variant"})])]),_:1},8,["show"])),x("",!0)],512),[[N,i(y)]]),l("div",Cs,[i(c)?(h(),p("span",Ss,I(i(o).format("h:mm")),1)):(h(),p("div",Ms,[l("img",{src:(fe=i(u))==null?void 0:fe.image72,alt:""},null,8,Ls)]))]),l("div",Bs,[i(c)?x("",!0):(h(),p("div",Hs,[l("span",Rs,I((ye=i(u))==null?void 0:ye.name),1),l("span",Ds,I(i(m)),1)])),e.message.text?(h(),p("div",{key:1,class:W({"message-content":!0,"just-emoji":i(g),"non-message":e.message.type!=="message"})},[l("div",{style:{display:"inline"},innerHTML:i(me)(e.message.text,i(s).users,i(s).channels)},null,8,Es),e.message.isEdited?(h(),S(i(J),{key:0,content:i(w),placement:"top",arrow:"",hover:""},{default:H(()=>[Ts]),_:1},8,["content"])):x("",!0)],2)):x("",!0),(($e=e.message.files)==null?void 0:$e.length)?(h(),S(F,{key:2,files:e.message.files,"max-height":e.fileMaxHeight},null,8,["files","max-height"])):x("",!0),((be=e.message.attachments)==null?void 0:be.length)?(h(),p("div",Us,[(h(!0),p(A,null,z(e.message.attachments,(ie,Pe)=>(h(),S(E,{key:Pe,attachment:ie,msg:e.message},null,8,["attachment","msg"]))),128))])):x("",!0),((xe=e.message.reactions)==null?void 0:xe.length)||e.message.replyCount&&e.smallReplies?(h(),p("div",Ns,[(h(!0),p(A,null,z(e.message.reactions,ie=>(h(),S(Ae,{key:ie.name,react:ie},null,8,["react"]))),128)),e.message.replyCount&&e.smallReplies?(h(),p("div",{key:0,style:X({marginLeft:((ke=e.message.reactions)==null?void 0:ke.length)?"16px":"0"}),class:"small-replies"},[$(M,{icon:"mdi:message-reply-text-outline"}),l("span",null,I(e.message.replyCount)+" "+I(e.message.replyCount===1?"reply":"replies"),1)],4)):x("",!0)])):x("",!0),e.message.replyCount&&!t.hideReplies&&!t.smallReplies?(h(),S(We,{key:5,message:e.message},null,8,["message"])):x("",!0)])],2)):x("",!0)],8,bs)):x("",!0)}}});var As=B(js,[["__scopeId","data-v-245cd8d2"]]);const Ws={class:"chat-header"},Ps={key:0,class:"chat-header-actions"},Os={class:"chat-header-title spacer"},Vs=["innerHTML"],Fs=["innerHTML"],qs={key:1,class:"chat-header-actions"},Ys=L({props:{title:null,subtitle:null,subtitleTo:null,showMenuButton:{type:Boolean},showCloseButton:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const s=e,r=R();return(n,o)=>{const a=j,c=Z("router-link");return h(),p("div",Ws,[s.showMenuButton?(h(),p("div",Ps,[l("button",{class:"btn btn-icon menu-button",onClick:o[0]||(o[0]=u=>i(r).toggleSidebar())},[$(a,{icon:"mdi:menu-open"})])])):x("",!0),l("div",Os,[l("strong",null,I(s.title),1),s.subtitle&&!s.subtitleTo?(h(),S(i(J),{key:0,arrow:"",hover:"",placement:"bottom",class:"chat-header-subtitle"},{content:H(()=>[l("div",{class:"subtitle-popout",innerHTML:i(me)(s.subtitle,i(r).users,i(r).channels)},null,8,Fs)]),default:H(()=>[l("span",{innerHTML:i(me)(s.subtitle,i(r).users,i(r).channels)},null,8,Vs)]),_:1})):x("",!0),s.subtitle&&s.subtitleTo?(h(),S(c,{key:1,to:s.subtitleTo,class:"chat-header-subtitle",textContent:I(s.subtitle)},null,8,["to","textContent"])):x("",!0)]),s.showCloseButton?(h(),p("div",qs,[l("button",{class:"btn btn-icon",onClick:o[1]||(o[1]=u=>t("close"))},[$(a,{icon:"mdi:close"})])])):x("",!0)])}}});var zs=B(Ys,[["__scopeId","data-v-13add010"]]);const Js=e=>(q("data-v-1a67ebd7"),e=e(),Y(),e),Ks={class:"thread-list"},Gs=Js(()=>l("hr",null,null,-1)),Qs={class:"replies-count"},Zs=L({setup(e){var v;const t=ae(),s=pe(),r=R(),n=D(`${(v=t.query.threadRef)!=null?v:""}`),o=f(()=>{var _;return`${(_=t.query.threadRef)!=null?_:""}`}),a=f(()=>{var d;const _=n.value.split("-")[0];return(d=r.channels)==null?void 0:d.find(y=>y.id===_)}),c=f(()=>{const _=r.messagesById[n.value];return(_==null?void 0:_.threadId)?r.messagesById[`${a.value.id}-${_.threadId}`]:_}),u=f(()=>{var d,y,w,k;const _=Number(n.value.split("-")[1]);return((y=(d=c.value)==null?void 0:d.replyMessageIds)==null?void 0:y.length)?((k=(w=a.value)==null?void 0:w.messages)==null?void 0:k.filter(b=>{var C,M;return b.threadId===_||((M=(C=c.value)==null?void 0:C.replyMessageIds)==null?void 0:M.indexOf(b.id))!==-1}))||[]:[]}),g=()=>{s.push({query:Me(t.query,"threadRef")})},m=_=>_>0?u.value[_-1]:se(P({},c.value),{userId:""});return ue(o,()=>{var _;n.value=`${(_=t.query.threadRef)!=null?_:""}`}),(_,d)=>{var k,b,C;const y=zs,w=As;return h(),p(A,null,[((k=i(a))==null?void 0:k.id)?(h(),S(y,{key:0,title:"Thread",subtitle:`#${(b=i(a))==null?void 0:b.name}`,"subtitle-to":{params:{channelId:i(a).id},query:P({},i(t).query),name:"channel"},"show-close-button":"",onClose:g},null,8,["subtitle","subtitle-to"])):x("",!0),l("div",Ks,[$(w,{message:i(c),"above-message":null,"channel-id":((C=i(a))==null?void 0:C.id)||"",style:{margin:"16px 0"},"id-ref":"thread","hide-date-rule":"","hide-replies":""},null,8,["message","channel-id"]),Gs,l("div",Qs,[l("small",null,I(i(u).length)+" Repl"+I(i(u).length===1?"y":"ies"),1)]),(h(!0),p(A,null,z(i(u),(M,F)=>{var E;return h(),S(w,{key:M.id,message:M,"above-message":m(F),"channel-id":(E=i(a))==null?void 0:E.id,class:W({last:F===i(u).length-1}),"hide-date-rule":"","hide-replies":""},null,8,["message","above-message","channel-id","class"])}),128))])],64)}}});var Xs=B(Zs,[["__scopeId","data-v-1a67ebd7"]]);const en={src:"https://cdn.buymeacoffee.com/widget/assets/coffee%20cup.svg",alt:"Buy me a coffee",style:{height:"20px"}},tn=["src"],sn=L({setup(e){const t=R(),s=D(!1),r="mrfrase3",n="Support me on Buy me a coffee!",o=f(()=>`https://www.buymeacoffee.com/widget/page/${r}?description=${encodeURIComponent(n)}&color=${encodeURIComponent("#5F7FFF")}`);return st(()=>{!t.coffeeMenu||(s.value=!0)}),(a,c)=>{const u=j;return h(),S(i(J),{placement:"top",class:"coffee-pop",show:i(t).coffeeMenu},{content:H(()=>[s.value||i(t).coffeeMenu?(h(),p("iframe",{key:0,src:i(o),title:"Buy me a coffee",class:"bmc-iframe"},null,8,tn)):x("",!0)]),default:H(()=>[l("div",{class:"coffee-btn",onClick:c[0]||(c[0]=g=>i(t).coffeeMenu=!i(t).coffeeMenu)},[U($(u,{icon:"mdi:close"},null,512),[[N,i(t).coffeeMenu]]),U(l("img",en,null,512),[[N,!i(t).coffeeMenu]])])]),_:1},8,["show"])}}});var nn=B(sn,[["__scopeId","data-v-5dfad6fe"]]);const an=e=>(q("data-v-04a5d832"),e=e(),Y(),e),on={class:"sidebar-footer"},rn=an(()=>l("div",{class:"spacer"},null,-1)),ln={href:"https://github.com/mrfrase3/slack-export-vue",target:"_blank"},cn=L({setup(e){const t=R(),s=()=>{t.binaryData=null,t.dataLoaded=!1,t.exportNeeded=!0};return(r,n)=>{const o=j,a=nn;return h(),p("div",on,[(i(t).binarySource,h(),S(i(J),{key:0,content:"Download Binary",placement:"top",hover:"",arrow:""},{default:H(()=>[$(o,{class:"action-icon",icon:"mdi:download",onClick:n[0]||(n[0]=c=>i(t).downloadBinary())})]),_:1})),$(i(J),{content:"Upload Export",placement:"top",hover:"",arrow:""},{default:H(()=>[$(o,{class:"action-icon",icon:"mdi:upload",onClick:s})]),_:1}),x("",!0),rn,$(i(J),{content:"GitHub",placement:"top",hover:"",arrow:""},{default:H(()=>[l("a",ln,[$(o,{class:"action-icon",icon:"mdi:github"})])]),_:1}),$(a)])}}});var un=B(cn,[["__scopeId","data-v-04a5d832"]]);const Ue=e=>(q("data-v-288df464"),e=e(),Y(),e),dn={class:"channel-list"},hn=Ue(()=>l("div",{class:"title"}," Channels ",-1)),mn=Ue(()=>l("span",{style:{"padding-right":"8px"}},"#",-1)),pn=L({setup(e){const t=R(),s=ae(),r=n=>s.params.channelId===n.id;return(n,o)=>{const a=Z("router-link");return h(),p("div",dn,[hn,l("ul",null,[(h(!0),p(A,null,z(i(t).channels,c=>(h(),p("li",{key:c.id},[$(a,{to:{params:{channelId:c.id},query:P({},i(s).query),name:"channel"},class:W({link:!0,active:r(c)})},{default:H(()=>[mn,O(" "+I(c.name),1)]),_:2},1032,["to","class"])]))),128))])])}}});var _n=B(pn,[["__scopeId","data-v-288df464"]]);const gn={class:"search-text"},vn={key:0,class:"search-text-prefix"},fn={key:0,class:"search-text-item-text"},yn=["src"],$n=L({props:{content:null,prefix:null,large:{type:Boolean}},setup(e){const t=e,s=R(),r=o=>{var u;const[a,c]=(u=o.attrs)==null?void 0:u.id.split(":");if(a==="from"||a==="mentions")return`${a}:@${s.users[c].name}`;if(a==="in"){const g=s.channels.find(m=>m.id===c);return`${a}:#${g.name}`}return""},n=o=>{var u,g,m;const[a,c]=(u=o.attrs)==null?void 0:u.id.split(":");return a==="from"||a==="mentions"?t.large?(g=s.users[c])==null?void 0:g.image72:(m=s.users[c])==null?void 0:m.image24:""};return(o,a)=>(h(),p("span",gn,[t.prefix?(h(),p("span",vn,I(t.prefix),1)):x("",!0),(h(!0),p(A,null,z(t.content,(c,u)=>(h(),p("span",{key:u,class:"search-text-item"},[c.type==="text"?(h(),p("span",fn,I(c.text),1)):c.type==="mention"?(h(),p("span",{key:1,class:W({"search-text-item-mention":!0,"with-img":!!n(c),large:t.large})},[n(c)?(h(),p("img",{key:0,src:n(c),alt:""},null,8,yn)):x("",!0),O(" "+I(r(c)),1)],2)):x("",!0)]))),128))]))}});var bn=B($n,[["__scopeId","data-v-137baf4c"]]);const xn=nt.create({name:"oneLine",topNode:!0,content:"block",addKeyboardShortcuts(){return{Enter:()=>{var t,s;const e=(s=(t=this.editor.getJSON().content)==null?void 0:t[0])==null?void 0:s.content;return(e==null?void 0:e.length)?(this.options.onEnter(e),!0):!1}}}}),kn=(e="")=>at(e,{allowedTags:[]}),wn=(e="",t="~-~",s="hightlight")=>{const r=kn(e),n=t.replace(/[^\w- ]/g,"").trim();if(!n)return r;const o=new RegExp(n,"gi");return r.replace(o,a=>`<span class="${s}">${a}</span>`)};const In={class:"mention-items"},Cn=["id","onClick","onMouseenter"],Mn={class:"mention-action"},Ln=["src"],Sn={key:1},Bn=["innerHTML"],Hn={key:1,class:"mention-item"},Rn=L({props:{type:null,items:null,command:null},setup(e,{expose:t}){const s=e,r=R(),n=D(0),o=f(()=>{if(s.type!=="users")return s.items.map(y=>({action:"In",id:`in:${y.id}`,channel:y}));const d=[];return s.items.forEach(y=>{d.push({user:y,action:"From",id:`from:${y.id}`}),d.push({user:y,action:"Mentions",id:`mentions:${y.id}`})}),d}),a=f(()=>o.value.length),c=d=>{const y=o.value[d];y&&s.command(y)},u=()=>{n.value=(n.value+a.value-1)%a.value},g=()=>{n.value=(n.value+1)%a.value},m=()=>{c(n.value)},v=({event:d})=>d.key==="ArrowUp"?(u(),!0):d.key==="ArrowDown"?(g(),!0):d.key==="Enter"?(m(),!0):!1,_=d=>{var y,w;return(s.type==="users"?(y=d.user)==null?void 0:y.id:(w=d.channel)==null?void 0:w.id)||d.id};return ue(s.items,()=>{n.value=0}),ue(n,()=>{var y;const d=o.value[n.value];(y=document.getElementById(`mention-item-${d.action}-${_(d)}`))==null||y.scrollIntoView({block:"nearest"})}),t({onKeyDown:v}),(d,y)=>(h(),p("div",In,[i(a)?(h(!0),p(A,{key:0},z(i(o),(w,k)=>{var b,C,M;return h(),p("button",{id:`mention-item-${w.action}-${_(w)}`,key:k,class:W(["mention-item",{"is-selected":k===n.value,"action-width":s.type==="users"}]),onClick:F=>c(k),onMouseenter:F=>n.value=k},[l("span",Mn,I(w.action)+":",1),((b=w.user)==null?void 0:b.image24)?(h(),p("img",{key:0,src:w.user.image24,alt:"",class:"mention-item-img"},null,8,Ln)):x("",!0),s.type==="channels"?(h(),p("span",Sn,"#")):x("",!0),l("span",{innerHTML:i(wn)(((C=w.user)==null?void 0:C.name)||((M=w.channel)==null?void 0:M.name),i(r).lastMentionQuery,"mention-hl")},null,8,Bn)],42,Cn)}),128)):(h(),p("button",Hn," No result "))]))}});var Dn=B(Rn,[["__scopeId","data-v-89900674"]]),Ne=(e,t="users")=>{const s=R();return{char:e,items:({query:r})=>t==="users"?s.searchUsers(r).slice(0,30):s.searchChannels(r).slice(0,30),pluginKey:new ot(t),render:()=>{let r,n;return{onStart:o=>{r=new rt(Dn,{props:se(P({},o),{type:t}),editor:o.editor}),n=it("body",{getReferenceClientRect:o.clientRect,appendTo:()=>document.body,content:r.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",sticky:!0,plugins:[lt]})},onUpdate(o){r.updateProps(se(P({},o),{type:t})),n[0].setProps({getReferenceClientRect:o.clientRect})},onKeyDown(o){var a;return o.event.key==="Escape"?(n[0].hide(),!0):(a=r.ref)==null?void 0:a.onKeyDown(o,t)},onExit(){n[0].destroy(),r.destroy()}}}}};const En={key:0,class:"search-input"},Tn=L({emits:["close"],setup(e,{expose:t,emit:s}){const r=R(),n=pe(),o=({node:u})=>{const[g,m]=u.attrs.id.split(":");if(g==="from"||g==="mentions")return`${g}:@${r.users[m].name}`;if(g==="in"){const v=r.channels.find(_=>_.id===m);return`${g}:#${v.name}`}return""},a=new ct({autofocus:!0,extensions:[xn.configure({onEnter:u=>{n.push({path:"/search",query:{query:JSON.stringify(u)}}),s("close")}}),ut,dt,ht.configure({placeholder:"Type @ or # to search for users or channels"}),Le.configure({HTMLAttributes:{class:"search-mention"},renderLabel:o,suggestion:Ne("@","users")}),Le.configure({HTMLAttributes:{class:"search-mention"},renderLabel:o,suggestion:Ne("#","channels")})],content:r.activeSearch,onUpdate(){r.activeSearch=a.getJSON()}}),c=()=>{a.commands.clearContent(),r.activeSearch=a.getJSON()};return ue(r.activeSearch,()=>{JSON.stringify(a.getJSON())!==JSON.stringify(r.activeSearch)&&a.commands.setContent(r.activeSearch,!1)}),mt(()=>{a.destroy()}),t({editor:a,clearContent:c}),(u,g)=>i(a)?(h(),p("div",En,[$(i(pt),{editor:i(a)},null,8,["editor"])])):x("",!0)}});var Un=B(Tn,[["__scopeId","data-v-29a93214"]]);const Nn={class:"search-area"},jn={class:"search-box-icon main-icon"},An=L({emits:["close"],setup(e,{expose:t,emit:s}){const r=R(),n=D(null);return t({searchInput:n}),(o,a)=>{var u,g,m,v;const c=j;return h(),p("div",{class:"search-input-spash",onClick:a[4]||(a[4]=_=>s("close"))},[l("div",{class:"search-input-container",onClick:a[3]||(a[3]=ce(()=>{},["stop"]))},[l("div",Nn,[l("div",jn,[$(c,{icon:"mdi:search"})]),$(Un,{ref_key:"searchInput",ref:n,onClose:a[0]||(a[0]=_=>s("close"))},null,512),U(l("button",{class:"clear-btn",onClick:a[1]||(a[1]=_=>{var d;return(d=n.value)==null?void 0:d.clearContent()})}," Clear ",512),[[N,(v=(m=(g=(u=i(r).activeSearch)==null?void 0:u.content)==null?void 0:g[0])==null?void 0:m.content)==null?void 0:v.length]]),l("button",{class:"close-icon",onClick:a[2]||(a[2]=_=>s("close"))},[$(c,{icon:"mdi:close"})])])])])}}});var Wn=B(An,[["__scopeId","data-v-a8da35e0"]]);const Pn=e=>(q("data-v-08cc159a"),e=e(),Y(),e),On={class:"navbar"},Vn={key:1},Fn=Pn(()=>l("div",{class:"spacer"},null,-1)),qn={class:"search-icon"},Yn=L({setup(e){const t=R(),s=D(!1);return(r,n)=>{var u,g,m,v;const o=Wn,a=bn,c=j;return h(),p(A,null,[s.value?(h(),S(o,{key:0,onClose:n[0]||(n[0]=_=>s.value=!1)})):x("",!0),l("div",On,[l("button",{class:"searchbar",onClick:n[1]||(n[1]=_=>s.value=!0)},[((v=(m=(g=(u=i(t).activeSearch)==null?void 0:u.content)==null?void 0:g[0])==null?void 0:m.content)==null?void 0:v.length)?(h(),S(a,{key:0,content:i(t).activeSearch.content[0].content,prefix:"Search: "},null,8,["content"])):(h(),p("span",Vn,"Search Export")),Fn,l("span",qn,[$(c,{icon:"mdi:search"})])])])],64)}}});var zn=B(Yn,[["__scopeId","data-v-08cc159a"]]);const Jn={class:"checkbox-text"},Kn={class:"checkbox-label"},Gn={class:"checkbox-hint"},Qn=L({props:{modelValue:{type:Boolean},label:null,hint:null,disabled:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=()=>{t("update:modelValue",!s.modelValue)};return(n,o)=>{const a=j;return h(),p("div",{class:"checkbox-wrap",onClick:r},[$(a,{icon:`mdi:${s.modelValue?"checkbox-marked":"checkbox-blank-outline"}`,class:"checkbox-icon"},null,8,["icon"]),l("div",Jn,[l("div",Kn,[Se(n.$slots,"label",{},()=>[O(I(s.label),1)],!0)]),l("div",Gn,[Se(n.$slots,"hint",{},()=>[O(I(s.hint),1)],!0)])])])}}});var Zn=B(Qn,[["__scopeId","data-v-690ba907"]]),Xn="/assets/loading.7cbe3464.svg",je="/slax.svg";const T=e=>(q("data-v-f73075ca"),e=e(),Y(),e),ea={class:"loading-splash moving-gradient"},ta=T(()=>l("img",{alt:"Loading",src:Xn},null,-1)),sa=T(()=>l("br",null,null,-1)),na=T(()=>l("br",null,null,-1)),aa=T(()=>l("br",null,null,-1)),oa=T(()=>l("div",{class:"header"},[l("h1",null,[l("img",{src:je,alt:"",style:{height:"1em","margin-right":"8px"}}),O(" Slax Pro ")]),l("p",null,[O("A "),l("i",null,"Free & Professional"),O(" viewer for slack-like export content.")])],-1)),ra=["onDrop","onDragover"],ia={key:0},la=T(()=>l("strong",null,"Drop .zip file here",-1)),ca=T(()=>l("br",null,null,-1)),ua=T(()=>l("small",null,"or click to select",-1)),da=[la,ca,ua],ha={key:1},ma=T(()=>l("strong",null,"Kobe!",-1)),pa=[ma],_a={key:2},ga=T(()=>l("strong",null,"File must be a .zip",-1)),va=T(()=>l("br",null,null,-1)),fa=T(()=>l("small",null,"Please try again",-1)),ya=[ga,va,fa],$a={class:"config"},ba=T(()=>l("h2",null,"Export Preferences",-1)),xa={class:"actions"},ka=T(()=>l("div",{class:"spacer"},null,-1)),wa=T(()=>l("span",null,"Process",-1)),Ia=L({setup(e){const t=R(),s=D(null),r=D(!1),n=D(!1),o=D(!1),a=D(!1),c=f(()=>o.value?"mdi:alert-outline":r.value?n.value?"mdi:basketball-hoop-outline":"mdi:alert-outline":"mdi:folder-zip-outline"),u=f(()=>o.value?!0:!(!r.value||n.value)),g=f(()=>u.value?"error":r.value?"success":""),m=w=>w?Array.from(w):[],v=w=>{var k;o.value=!1,r.value=!0,n.value=!!((k=w.dataTransfer)==null?void 0:k.types.includes("Files"))},_=()=>{o.value=!1,r.value=!1,n.value=!1},d=async w=>{var b,C;w.preventDefault();const k=(b=w.dataTransfer)!=null?b:w.target;s.value=(C=m(k.files).find(M=>M.type==="application/zip"))!=null?C:null,_(),o.value=!s.value,s.value&&(a.value=!0,await t.checkIfBinZip(s.value)&&(s.value=null),a.value=!1)},y=async()=>{s.value&&(await t.loadExport(s.value),await t.loadBinary(),s.value=null)};return Be(()=>{t.loadBinary()}),(w,k)=>{var M,F;const b=j,C=Zn;return U((h(),p("div",ea,[U(l("div",null,[ta,sa,na,l("strong",null,I(i(t).status),1),aa,i(t).status.startsWith("Error:")?(h(),p("button",{key:0,onClick:k[0]||(k[0]=E=>i(t).exportNeeded=!0)}," Back ")):x("",!0)],512),[[N,!i(t).exportNeeded||a.value]]),U(l("div",null,[U((h(),p("input",{key:(M=s.value)==null?void 0:M.name,ref:"fileInput",type:"file",accept:".zip",onChange:d},null,32)),[[N,!1]]),oa,U(l("div",{class:W(`drop-area ${i(g)}`),onDrop:ce(d,["prevent"]),onDragenter:v,onDragover:ce(v,["prevent"]),onDragleave:_,onClick:k[1]||(k[1]=E=>w.$refs.fileInput.click())},[$(b,{class:"zip-icon",icon:i(c)},null,8,["icon"]),!i(u)&&!r.value?(h(),p("div",ia,da)):i(u)?(h(),p("div",_a,ya)):(h(),p("div",ha,pa))],42,ra),[[N,!s.value]]),U(l("div",$a,[ba,l("span",null,[$(b,{icon:"mdi:folder-zip-outline"}),l("strong",null,I((F=s.value)==null?void 0:F.name),1)]),$(C,{modelValue:i(t).exportConfig.preferDisplayName,"onUpdate:modelValue":k[2]||(k[2]=E=>i(t).exportConfig.preferDisplayName=E),label:"Prefer display name",hint:"e.g. 'mrfrase3' instead of 'Fraser The Third'"},null,8,["modelValue"]),$(C,{modelValue:i(t).exportConfig.hideChannelMessages,"onUpdate:modelValue":k[3]||(k[3]=E=>i(t).exportConfig.hideChannelMessages=E),label:"Hide channel messages",hint:"Hide user join/leave messages"},null,8,["modelValue"]),$(C,{modelValue:i(t).exportConfig.skipArchivedChannels,"onUpdate:modelValue":k[4]||(k[4]=E=>i(t).exportConfig.skipArchivedChannels=E),label:"Skip archived channels",hint:"Skip channels that have been archived"},null,8,["modelValue"]),$(C,{modelValue:i(t).exportConfig.removeLinkPreviews,"onUpdate:modelValue":k[5]||(k[5]=E=>i(t).exportConfig.removeLinkPreviews=E),label:"Remove link previews",hint:"Remove the image/description under messages with links"},null,8,["modelValue"]),l("div",xa,[l("button",{class:"btn btn-text",onClick:k[6]||(k[6]=E=>s.value=null)}," Back "),ka,l("button",{class:"btn",onClick:y},[$(b,{icon:"mdi:cog"}),wa])])],512),[[N,s.value]])],512),[[N,i(t).exportNeeded&&!a.value]])],512)),[[N,!i(t).dataLoaded]])}}});var Ca=B(Ia,[["__scopeId","data-v-f73075ca"]]);const Ma=l("h1",null,[l("img",{src:je,alt:"",style:{height:"1em","margin-right":"8px"}}),O(" Slax Pro ")],-1),La=L({setup(e){const t=R(),s=ae(),r=pe(),n=f(()=>{var c;return(c=s.query)==null?void 0:c.threadRef}),o=()=>{t.leftSidebar=!1,r.push({query:P({},Me(s.query,["threadRef"]))})},a=_t(()=>t.onWidthChange(),100);return Be(()=>window.addEventListener("resize",a)),gt(()=>window.removeEventListener("resize",a)),(c,u)=>{const g=Ca,m=zn,v=Z("router-link"),_=_n,d=un,y=Xs,w=Z("router-view");return h(),p(A,null,[$(g),$(m),l("div",{class:W({sidebar:!0,closed:!i(t).leftSidebar})},[$(v,{class:"no-link",to:{name:"home",params:{},query:P({},i(s).query)}},{default:H(()=>[Ma]),_:1},8,["to"]),$(_),$(d)],2),l("div",{class:W({"thread-sidebar":!0,closed:!i(n)})},[$(y)],2),$(vt,{name:"fade"},{default:H(()=>[U(l("div",{class:"sidebar-overlay",onClick:u[0]||(u[0]=k=>o())},null,512),[[N,i(t).leftSidebar||i(n)]])]),_:1}),l("div",{class:W({main:!0,"offset-right":!!i(n)})},[$(w)],2)],64)}}});window.Buffer=ft.Buffer;yt(La).directive("observe-visibility",{beforeMount:(e,t,s)=>{s.context=t.instance,_e.bind(e,t,s)},updated:_e.update,unmounted:_e.unbind}).use($t()).use(wt).mount("#app");export{zs as C,B as _,As as a,bn as b,j as c,R as u};
